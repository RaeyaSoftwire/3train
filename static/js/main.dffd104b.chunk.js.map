{"version":3,"sources":["data/logo.svg","data/payment.png","data/userCaseScreens/1ab-review.png","data/userCaseScreens/1ab-confirmation.png","data/userCaseScreens/1c-review.png","data/userCaseScreens/1c-confirmation.png","data/userCaseScreens/1e-review.png","data/userCaseScreens/1e-confirmation.png","data/userCaseScreens/2a-review.png","data/userCaseScreens/2a-confirmation.png","data/userCaseScreens/2b-review.png","data/userCaseScreens/2b-confirmation.png","data/userCaseScreens/2b2-review.png","data/userCaseScreens/2b2-confirmation.png","data/userCaseScreens/3ab-review.png","data/userCaseScreens/3ab-confirmation.png","data/confirmation.png","ui/Block.js","ui/Badge.js","utility/format.js","data/icon/single.js","data/icon/return.js","data/icon/open-return.js","data/icon/season.js","data/icon/back.js","data/icon/adult.js","data/icon/child.js","data/icon/railcard.js","ui/Header.js","utility/get.js","data/icon/person.js","data/icon/large-chevron.js","data/icon/arrow.js","ui/ServiceResult.js","ui/ServiceResultList.js","ui/TicketResult.js","ui/TicketResultList.js","ui/ResultsHeader.js","ui/Footer.js","redux/actions.js","redux/actionTypes.js","screens/Results.js","data/screen.js","screens/ResultsThree/ResultsThreeServiceEarlier/index.js","screens/ResultsThree/ResultsThreeServiceLater/index.js","screens/ResultsThree/ResultsThreeServiceOutbound/index.js","screens/ResultsThree/ResultsThreeServiceInbound/index.js","ui/HighlightScreen.js","screens/ResultsThree/ResultsThreeTicketHighlights/index.js","screens/ResultsThree/ResultsThreeTicketOutbound/index.js","screens/ResultsThree/ResultsThreeTicketInbound/index.js","screens/ResultsThree/ResultsThreePriceBreakdown/index.js","screens/ResultsThree/index.js","pickers/TicketTypePicker.js","pickers/StationPicker.js","pickers/JourneyTimePicker.js","pickers/PassengerPicker.js","ui/Button.js","screens/Search.js","screens/Review.js","screens/ReviewThree.js","screens/Payment.js","data/userCases.js","screens/Confirmation.js","screens/Menu.js","data/icon/spinner.js","App.js","serviceWorker.js","redux/reducers/screen.js","redux/reducers/search.js","redux/reducers/selection.js","redux/reducers/results.js","redux/reducers/usercase.js","redux/reducers/loading.js","redux/reducers/index.js","redux/store.js","index.js","data/serviceInfo.png","data/termsAndConditions.png","data/review-footer.png","data/review.png"],"names":["module","exports","Block","this","props","className","children","onClick","React","Component","cheapest","fastest","recommended","text","getClassName","formatPrice","price","absPrice","Math","abs","absString","toFixed","padStart","icon","viewBox","fillRule","d","Header","noBack","onBackClick","hasClose","onCloseClick","data","title","subtitle","hasSubheader","adults","railcards","Fragment","getBackButton","getTitle","getCloseButton","getSubheader","getPadder","getSelectedOutboundService","results","selection","outbound","find","service","id","outboundJourney","getSelectedOutboundTicket","selectedOutboundService","tickets","ticket","outboundTicket","getSelectedInboundService","inbound","inboundJourney","getSelectedInboundTicket","selectedInboundService","inboundTicket","getDurationString","departure","arrival","duration","diff","hours","floor","minutes","getChangesString","changes","transform","fill","points","ServiceResult","handleClick","bind","elements","isCheapest","push","key","isFastest","length","onServiceInfoClick","getBadges","standard","passengers","time","format","legs","origin","destination","note","first","toc","src","logo","e","stopPropagation","ServiceResultList","map","item","TicketResult","isRecommended","isDiscounted","onConditionsClick","onPriceBreakdownClick","descriptionLines","line","index","getPrice","TicketResultList","ResultsHeader","ticketType","stage","Footer","changeSearchData","change","type","findTrains","getState","searchParams","search","queryParams","ocrs","stations","station","from","crs","dcrs","to","outy","outm","outd","outh","outmi","outda","after","ret","rety","retm","retd","reth","retmi","retda","nad","nch","axios","get","params","changeResults","executeSearch","redirectScreen","dispatch","searching","then","changeScreen","earlierOutboundServices","earlierInboundServices","laterOutboundServices","laterInboundServices","changeSelectedOutboundService","changeSelectedOutboundTicket","changeSelectedInboundService","changeSelectedInboundTicket","executeLoad","milliseconds","t","Promise","resolve","setTimeout","v","random","getCheapestTicketPrice","min","Infinity","addDataToServices","services","forEach","filter","isFirst","addQualifiers","cheapestServicePrice","fastestServiceTime","Results","state","serviceInfo","termsAndConditions","priceBreakdown","cheapestService","reduce","result","cheapestFirst","cheapestFlexible","isFlexible","highlights","otherFixed","some","highlight","otherFlexible","categories","screen","selectOutboundService","getEarlierButton","goToNextScreen","setState","getLaterButton","selectOutboundTicket","getTicketPresentationData","isReturn","selectInboundService","selectInboundTicket","goToPreviousScreen","getPreviousScreenId","getNextScreenId","getOutboundServiceContent","getOutboundTicketContent","getReturnServiceContent","getReturnTicketContent","selectedOutboundTicket","name","selectedInboundTicket","getPriceBreakdownService","serviceInfoScreen","termsAndConditionsScreen","getHeader","getResultsHeader","getContent","getFooter","getPriceBreakdown","connect","parseInt","userCaseMenu","serviceOutbound","serviceInbound","ticketHighlights","ticketOutbound","ticketInbound","review","payment","confirmation","ResultsThreeServiceEarlier","ResultsThreeServiceLater","ResultsThreeServiceOutbound","onServiceSelect","servicesInbound","servicesOutbound","presentationServices","inboundSingles","concat","cheapestInboundLegStandard","cheapestInboundLegFirst","outboundReturns","cheapestOutboundReturnStandard","cheapestOutboundReturnFirst","ResultsThreeServiceInbound","onHighlightClick","idOut","idIn","onMixClick","presentHighlights","ResultsThreeTicketHighlights","cheapestPrice","outTickets","inTickets","twoLegTickets","outLegTickets","inLegTickets","cheapestOutPrice","cheapestInPrice","cheapestTwoLegPrice","cheapestOut","cheapestIn","cheapestTwoLeg","bestValue","getCheapestForReturn","cheapestMixed","cheapestFirstStd","cheapestStdFirst","getCheapestForSingle","idsAreSame","dataA","dataB","getTicketHighlightsData","ResultsThreeTicketOutbound","onTicketSelect","ResultsThreeTicketInbound","ResultsThreePriceBreakdown","priceBreakdownOutId","priceBreakdownInId","renderService","ResultsThree","priceBreakdownOpen","onPriceBreakdownClickHighlights","onPriceBreakdownClickOutbound","onPriceBreakdownClickInbound","screens","prevProps","onScreenChange","TicketTypePicker","selected","onSelect","ticketTypes","getTicketTypeIcon","options","toLowerCase","includes","value","sort","a","b","stationSearchFunction","term","option","termLower","startsWith","StationPicker","onChange","Form","Dropdown","placeholder","defaultValue","beforeOrAfterOptions","calculateFormValues","input","timeMoment","moment","date","JourneyTimePicker","formValues","handleChange","handleAfterChange","handleDateChange","handleTimeChange","nextProps","newFormValues","target","PassengerPicker","maxOption","passengerDropdownOptions","Array","keys","n","toString","Button","loading","disabled","Search","primary","canSearch","Review","outboundService","inboundService","presentService","reviewScreen","reviewFooter","ReviewThree","coaches","seats","seat","leg","legIndex","selectedCoach","selectedSeats","isLner","presentSeatGroupRowItem","seatIndex","presentSeatGroup","Payment","paymentScreen","userCases","oneABReview","oneABConfirmation","oneCReview","oneCConfirmation","oneEReview","oneEConfirmation","twoAReview","twoAConfirmation","twoBReview","twoBConfirmation","twoBTwoReview","twoBTwoConfirmation","threeABReview","threeABConfirmation","Confirmation","goToFirstScreen","usercase","confirmationScreen","uc","Menu","changeUserCase","userCase","userCaseIndex","selectUserCase","App","displaySpinner","getScreen","Boolean","window","location","hostname","match","reducer","action","nextTime","add","remainder","startOf","initialState","clone","translateJourneyResponse","journey","Services","serviceIndex","DisplayFaresFixed","DisplayFaresFlexible","fare","Available","fareIndex","IsDiscounted","IsReturn","TicketClass","IsFlexible","DisplayName","TotalPrice","description","RouteRestrictionDisplayName","ShortTermsLabel","Legs","Destination","Name","Origin","TocIdString","DepartureDateTime","ArrivalDateTime","Changes","PrimaryTocId","translateApiResponse","response","OutwardJourney","ReturnJourney","combineReducers","store","createStore","rootReducer","applyMiddleware","thunk","documentRoot","document","getElementById","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.dffd104b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.13d35289.svg\";","module.exports = __webpack_public_path__ + \"static/media/payment.f30d4edb.png\";","module.exports = __webpack_public_path__ + \"static/media/1ab-review.418212f3.png\";","module.exports = __webpack_public_path__ + \"static/media/1ab-confirmation.2f35a209.png\";","module.exports = __webpack_public_path__ + \"static/media/1c-review.de5e6a65.png\";","module.exports = __webpack_public_path__ + \"static/media/1c-confirmation.c09f7846.png\";","module.exports = __webpack_public_path__ + \"static/media/1e-review.14d80ccd.png\";","module.exports = __webpack_public_path__ + \"static/media/1e-confirmation.6123a1a2.png\";","module.exports = __webpack_public_path__ + \"static/media/2a-review.105b218c.png\";","module.exports = __webpack_public_path__ + \"static/media/2a-confirmation.32c5c341.png\";","module.exports = __webpack_public_path__ + \"static/media/2b-review.d800acaa.png\";","module.exports = __webpack_public_path__ + \"static/media/2b-confirmation.cb628398.png\";","module.exports = __webpack_public_path__ + \"static/media/2b2-review.e5b345a7.png\";","module.exports = __webpack_public_path__ + \"static/media/2b2-confirmation.6655ed73.png\";","module.exports = __webpack_public_path__ + \"static/media/3ab-review.b328a18c.png\";","module.exports = __webpack_public_path__ + \"static/media/3ab-confirmation.5c8f5e96.png\";","module.exports = __webpack_public_path__ + \"static/media/confirmation.5bfea8de.png\";","import React from 'react';\n\nimport './Block.css';\n\nexport default class Block extends React.Component {\n  render() {\n    const { className, children, onClick } = this.props;\n\n    return (\n      <div className={`Block ${className}`} onClick={onClick}>\n        {children}\n      </div>\n    )\n  }\n}\n","import React from 'react';\n\nimport './Badge.css';\n\nexport default class Block extends React.Component {\n  getClassName() {\n    const { cheapest, fastest, recommended } = this.props;\n\n    return `Badge ${cheapest ? 'Badge-cheapest' : ''} ${fastest ? 'Badge-fastest' : ''} ${recommended ? 'Badge-recommended' : ''}`\n  }\n\n  render() {\n    const { text } = this.props;\n\n    return (\n      <div className={this.getClassName()}>\n        {text}\n      </div>\n    )\n  }\n}\n","export const formatPrice = price => {\n  if (price) {\n    const absPrice = Math.abs(price);\n    const absString = `£${(absPrice / 100).toFixed(0)}.${(absPrice % 100).toFixed(0).padStart(2, '0')}`;\n    return price < 0 ? `-${absString}` : absString;\n  }\n  return null;\n};\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 20\">\n        <path fillRule=\"nonzero\" d=\"M23.616 10.934l-8.667 8.682a1.303 1.303 0 0 1-.929.384c-.352 0-.681-.136-.929-.384l-.787-.788a1.333 1.333 0 0 1 0-1.872l5.057-5.076H1.297A1.283 1.283 0 0 1 0 10.586V9.472C0 8.746.572 8.12 1.297 8.12h16.121l-5.113-5.105a1.288 1.288 0 0 1-.384-.921c0-.352.136-.679.384-.926l.787-.786c.247-.248.577-.383.929-.383.351 0 .68.137.928.385l8.668 8.682c.248.248.384.58.383.933 0 .354-.135.686-.384.934z\"/>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 18\">\n        <g fillRule=\"nonzero\">\n            <path d=\"M.192 12.936l4.333 4.408a.646.646 0 0 0 .465.194c.176 0 .34-.069.464-.194l.394-.4a.682.682 0 0 0 0-.95L3.32 13.415h8.032a.646.646 0 0 0 .648-.657v-.566c0-.368-.286-.686-.648-.686H3.29l2.557-2.591a.659.659 0 0 0 .191-.468.664.664 0 0 0-.191-.47l-.394-.399a.646.646 0 0 0-.464-.194c-.176 0-.341.07-.465.195L.192 11.988A.67.67 0 0 0 0 12.46c0 .18.068.349.192.475zM23.808 5.551L19.475 9.96a.646.646 0 0 1-.465.195.647.647 0 0 1-.464-.195l-.394-.4a.682.682 0 0 1 0-.95L20.68 6.03h-8.032A.646.646 0 0 1 12 5.375v-.566c0-.369.286-.686.648-.686h8.061L18.152 1.53a.659.659 0 0 1-.191-.468c0-.178.068-.344.191-.47l.394-.399A.646.646 0 0 1 19.01 0c.176 0 .341.07.465.195l4.333 4.408a.67.67 0 0 1 .192.474.67.67 0 0 1-.192.474z\"/>\n        </g>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 18\">\n        <g fillRule=\"nonzero\">\n            <path d=\"M5.032 17.058a.87.87 0 0 0 .623-.262l.377-.383a.89.89 0 0 0 .256-.628l-.008-.118a.898.898 0 0 0-.248-.516l-2.005-2.043 7.102-.001a.87.87 0 0 0 .871-.88v-.542l-.007-.112c-.053-.441-.417-.795-.864-.795H4L6.032 8.72a.882.882 0 0 0 .256-.624.886.886 0 0 0-.256-.626l-.377-.382a.87.87 0 0 0-1.246.001L.255 11.313a.891.891 0 0 0-.255.63c0 .236.09.461.256.63l4.153 4.223a.87.87 0 0 0 .623.262zm0-.5a.37.37 0 0 1-.267-.112L.612 12.22a.391.391 0 0 1-.112-.278c0-.108.04-.206.112-.28L4.765 7.44a.37.37 0 0 1 .267-.112c.102 0 .195.039.267.111l.377.383c.073.074.112.17.112.275a.382.382 0 0 1-.112.273l-2.87 2.909h8.323c.2 0 .371.184.371.407v.543a.37.37 0 0 1-.371.379H2.836l2.84 2.895a.404.404 0 0 1 0 .56l-.377.384a.37.37 0 0 1-.267.112zM23.808 5.551L19.475 9.96a.646.646 0 0 1-.465.195.647.647 0 0 1-.464-.195l-.394-.4a.682.682 0 0 1 0-.95L20.68 6.03h-8.032A.646.646 0 0 1 12 5.375v-.566c0-.369.286-.686.648-.686h8.061L18.152 1.53a.659.659 0 0 1-.191-.468c0-.178.068-.344.191-.47l.394-.399A.646.646 0 0 1 19.01 0c.176 0 .341.07.465.195l4.333 4.408a.67.67 0 0 1 .192.474.67.67 0 0 1-.192.474z\"/>\n        </g>\n    </svg>\n);\n\nexport default icon;\n\n\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 16\">\n        <g fillRule=\"nonzero\">\n            <path d=\"M22.993 8.397l-6.603 6.668a.989.989 0 0 1-.708.295.989.989 0 0 1-.708-.295l-.6-.605a1.028 1.028 0 0 1 0-1.437l3.853-3.9H5.987A.981.981 0 0 1 5 8.13v-.856c0-.557.436-1.037.988-1.037H18.27l-3.896-3.92a.993.993 0 0 1-.292-.708 1 1 0 0 1 .292-.711l.6-.604A.988.988 0 0 1 15.682 0a.99.99 0 0 1 .708.295l6.604 6.668c.189.191.292.446.292.717 0 .272-.103.527-.293.717z\"/>\n            <path d=\"M.292 8.397l6.604 6.668c.188.19.44.295.708.295.268 0 .519-.105.707-.295l.6-.605c.188-.19.292-.444.292-.715 0-.27-.104-.533-.292-.723L5.058 9.124h12.24a.981.981 0 0 0 .988-.994v-.856c0-.557-.436-1.037-.988-1.037H5.015l3.896-3.92a.993.993 0 0 0 .292-.708A1 1 0 0 0 8.91.898l-.6-.604A.988.988 0 0 0 7.603 0a.99.99 0 0 0-.707.295L.292 6.963C.103 7.154 0 7.41 0 7.68c0 .272.103.527.292.717z\"/>\n        </g>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 24\">\n        <path d=\"M9.59765625,20.390625 L0.48046875,11.4726562 C0.1640625,11.15625 0,10.8046875 0,10.3945312 C0,9.984375 0.1640625,9.609375 0.4921875,9.3046875 L9.609375,0.3984375 C9.8671875,0.140625 10.1953125,0 10.5703125,0 C11.3554688,0 11.9648438,0.609375 11.9648438,1.3828125 C11.9648438,1.7578125 11.8125,2.12109375 11.5429688,2.390625 L3.33984375,10.3828125 L11.5429688,18.3984375 C11.8125,18.6679688 11.9648438,19.0195312 11.9648438,19.40625 C11.9648438,20.1796875 11.3554688,20.7890625 10.5703125,20.7890625 C10.1953125,20.7890625 9.8671875,20.6484375 9.59765625,20.390625 Z\" />\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 24\">\n        <path d=\"M13.4,5.65 C14.575,5.65 15.65,6.4 16.05,7.5 L16.05,7.5 L17.75,12.125 C17.925,12.575 17.75,13.125 17.35,13.375 C17.175,13.475 16.975,13.525 16.8,13.525 C16.4,13.525 16,13.25 15.85,12.85 L15.85,12.85 L14.725,9.775 L14.725,22.7 C14.725,23.4 14.125,23.95 13.425,23.875 C12.8,23.825 12.35,23.275 12.35,22.65 L12.35,22.65 L12.35,15.1 C12.35,14.9 12.2,14.75 12,14.75 L12,14.75 L11.9275391,14.7568359 C11.7648437,14.7882813 11.65,14.925 11.65,15.1 L11.65,15.1 L11.65,22.7 C11.65,23.4 11.05,23.95 10.35,23.875 C9.725,23.825 9.275,23.275 9.275,22.65 L9.275,22.65 L9.275,9.775 L8.15,12.85 C7.975,13.375 7.375,13.65 6.85,13.45 C6.325,13.275 6.05,12.675 6.25,12.15 L6.25,12.15 L7.95,7.5 C8.375,6.375 9.425,5.65 10.6,5.65 L10.6,5.65 Z M11.8896878,0.127619125 C13.2414323,0.066972653 14.3869031,1.12479612 14.4481685,2.49033397 C14.5094338,3.85587182 13.4632937,5.01202265 12.1115491,5.07266912 C10.7598046,5.1333156 9.61433377,4.07549213 9.55306846,2.70995428 C9.49180314,1.34441643 10.5379433,0.188265597 11.8896878,0.127619125 Z\"></path>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 24\">\n        <path d=\"M13.4830769,9.33661538 C14.0738462,9.33661538 14.6449231,9.57292308 15.0584615,9.98646154 L15.0584615,9.98646154 L17.3033846,12.2510769 C17.7366154,12.6646154 17.7366154,13.3735385 17.3230769,13.7870769 L17.3230769,13.7870769 L17.2265172,13.8730011 C16.7927912,14.2154851 16.1710769,14.1710769 15.7870769,13.7870769 L15.7870769,13.7870769 L14.4086154,12.4086154 L14.4086154,18.6707692 C14.4086154,19.2615385 13.9163077,19.7538462 13.3255385,19.7538462 C12.7150769,19.7538462 12.2424615,19.2615385 12.2424615,18.6707692 L12.2424615,18.6707692 L12.2424615,16.3076923 C12.2424615,16.1304615 12.0849231,15.9729231 11.9076923,15.9729231 C11.7304615,15.9729231 11.5729231,16.1304615 11.5729231,16.3076923 L11.5729231,16.3076923 L11.5729231,18.6707692 C11.5729231,19.2615385 11.0806154,19.7538462 10.4898462,19.7538462 C9.87938462,19.7538462 9.40676923,19.2615385 9.40676923,18.6707692 L9.40676923,18.6707692 L9.40676923,12.3889231 L8.02830769,13.7673846 C7.59507692,14.2006154 6.90584615,14.2203077 6.49230769,13.7673846 L6.49230769,13.7673846 L6.41002198,13.6783889 C6.08087912,13.2737708 6.10830769,12.6350769 6.49230769,12.2510769 L6.49230769,12.2510769 L8.77661538,9.98646154 C9.19015385,9.57292308 9.76123077,9.33661538 10.352,9.33661538 L10.352,9.33661538 Z M11.9076923,4 C13.288914,4 14.4086154,5.1197014 14.4086154,6.50092308 C14.4086154,7.88214475 13.288914,9.00184615 11.9076923,9.00184615 C10.5264706,9.00184615 9.40676923,7.88214475 9.40676923,6.50092308 C9.40676923,5.1197014 10.5264706,4 11.9076923,4 Z\"></path>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 24\">\n        <path d=\"M18.7911111,4.5 C19.6173855,4.5 20.4097207,4.82868992 20.9933593,5.41357911 C21.5769978,5.99846829 21.9039928,6.79150533 21.9022294,7.61777778 L21.9022294,7.61777778 L21.9022294,16.1022222 C21.9022294,17.8204414 20.5093303,19.2133333 18.7911111,19.2133333 L18.7911111,19.2133333 L5.31111111,19.2133333 C3.59289189,19.2133333 2.2,17.8204414 2.2,16.1022222 L2.2,16.1022222 L2.2,7.61111111 C2.2,5.89289189 3.59289189,4.5 5.31111111,4.5 L5.31111111,4.5 Z M18.7911111,4.95111111 L5.31111111,4.95111111 C3.83835178,4.95111111 2.64444444,6.14501844 2.64444444,7.61777778 L2.64444444,7.61777778 L2.64444444,16.1022222 C2.64444444,17.5749816 3.83835178,18.7688889 5.31111111,18.7688889 L5.31111111,18.7688889 L18.7911111,18.7688889 C20.2638704,18.7688889 21.4577778,17.5749816 21.4577778,16.1022222 L21.4577778,16.1022222 L21.4577778,7.61777778 C21.4577778,6.14501844 20.2638704,4.95111111 18.7911111,4.95111111 L18.7911111,4.95111111 Z M16.7518519,12.3129612 C18.1566919,12.309893 19.2985985,13.4451703 19.3037037,14.8500045 C19.3037037,14.9522794 19.2207935,15.0351896 19.1185185,15.0351896 L19.1185185,15.0351896 L14.3851852,15.0351896 C14.2829102,15.0351896 14.2,14.9522794 14.2,14.8500045 C14.2051052,13.4451703 15.3470118,12.309893 16.7518519,12.3129612 Z M16.7509259,12.6921315 C15.6266941,12.6921315 14.6862424,13.5458319 14.5777778,14.6648193 L14.5777778,14.6648193 L18.9240741,14.6648193 C18.8156094,13.5458319 17.8751578,12.6921315 16.7509259,12.6921315 Z M11.7378456,14.0555556 C11.9112665,14.0555556 12.0518519,14.1550478 12.0518519,14.2777778 C12.0518519,14.4005077 11.9112665,14.5 11.7378456,14.5 L11.7378456,14.5 L4.95845069,14.5 C4.78502983,14.5 4.64444444,14.4005077 4.64444444,14.2777778 C4.64444444,14.1550478 4.78502983,14.0555556 4.95845069,14.0555556 L4.95845069,14.0555556 Z M11.7378456,11.8333333 C11.9112665,11.8333333 12.0518519,11.9328256 12.0518519,12.0555556 C12.0518519,12.1782855 11.9112665,12.2777778 11.7378456,12.2777778 L11.7378456,12.2777778 L4.95845069,12.2777778 C4.78502983,12.2777778 4.64444444,12.1782855 4.64444444,12.0555556 C4.64444444,11.9328256 4.78502983,11.8333333 4.95845069,11.8333333 L4.95845069,11.8333333 Z M16.7555427,8.50000436 C17.636426,8.50205079 18.3491558,9.21726102 18.3481385,10.0981462 C18.3471191,10.9790313 17.6327376,11.692597 16.7518519,11.692597 C16.3275234,11.692597 15.920655,11.5236565 15.6211312,11.2230902 C15.3216073,10.9225239 15.1540788,10.515071 15.1555459,10.0907452 C15.1586213,9.2098648 15.8746593,8.4979667 16.7555427,8.50000436 Z M16.7518519,8.87222668 C16.0776739,8.87222668 15.5299995,9.41657957 15.5259034,10.0907452 C15.5229258,10.587249 15.8197035,11.0365345 16.2775549,11.2286207 C16.7354064,11.4207068 17.2639093,11.3176581 17.6160592,10.967636 C17.9682091,10.6176139 18.0744589,10.0897452 17.8851511,9.63073801 C17.6958433,9.17173083 17.2483647,8.87222668 16.7518519,8.87222668 Z M11.7378456,9.61111111 C11.9112665,9.61111111 12.0518519,9.71060339 12.0518519,9.83333333 C12.0518519,9.95606328 11.9112665,10.0555556 11.7378456,10.0555556 L11.7378456,10.0555556 L4.95845069,10.0555556 C4.78502983,10.0555556 4.64444444,9.95606328 4.64444444,9.83333333 C4.64444444,9.71060339 4.78502983,9.61111111 4.95845069,9.61111111 L4.95845069,9.61111111 Z\"></path>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\nimport BackIcon from '../data/icon/back';\nimport AdultIcon from '../data/icon/adult';\nimport ChildIcon from '../data/icon/child';\nimport RailcardIcon from '../data/icon/railcard';\n\nimport './Header.css';\n\nexport default class Header extends React.Component {\n  getBackButton() {\n    const { noBack, onBackClick } = this.props;\n    \n    if (noBack) {\n      return <div className=\"Header-left Header-button\" />\n    }\n    else {\n      return (\n        <button className=\"Header-left Header-button\" onClick={onBackClick}>\n          <BackIcon className=\"Header-button-icon\" />\n          <div className=\"Header-button-text\">\n            Back\n          </div>\n        </button>\n      );\n    }\n  }\n\n  getCloseButton() {\n    const { hasClose, onCloseClick } = this.props;\n    \n    if (hasClose) {\n      return (\n        <button className=\"Header-right Header-button\" onClick={onCloseClick}>\n          Close\n        </button>\n      );\n    }\n    else {\n      return <div className=\"Header-right Header-button\" />\n    }\n  }\n\n  getTitle() {\n    const { data } = this.props;\n    \n    return (\n      <div className=\"Header-middle\">\n        {data.title && <div className=\"Header-title\">\n          {data.title}\n        </div>}\n        {data.subtitle && <div className=\"Header-subtitle\">\n          {data.subtitle}\n        </div>}\n      </div>\n    );\n  }\n\n  getSubheader() {\n    const { data } = this.props;\n\n    if (!data.hasSubheader) return null;\n\n    return (\n      <div className=\"Header-sub\">\n        {data.adults > 0 && <div className=\"Header-sub-item\">\n          <AdultIcon className=\"Header-sub-item-icon\" />\n          <div className=\"Header-sub-item-text\">\n            {data.adults} {data.adults === 1 ? 'Adult' : 'Adults'}\n          </div>\n        </div>}\n        {data.children > 0 && <div className=\"Header-sub-item\">\n          <ChildIcon className=\"Header-sub-item-icon\" />\n          <div className=\"Header-sub-item-text\">\n            {data.children} {data.adults === 1 ? 'Child' : 'Children'}\n          </div>\n        </div>}\n        {data.railcards > 0 && <div className=\"Header-sub-item\">\n          <RailcardIcon className=\"Header-sub-item-icon\" />\n          <div className=\"Header-sub-item-text\">\n            {data.railcards} {data.railcards === 1 ? 'Railcard' : 'Railcards'}\n          </div>\n        </div>}\n      </div>\n    );\n  }\n\n  getPadder() {\n    const { data } = this.props;\n    \n    return (\n      <React.Fragment>\n        <div className=\"Header-padder-main\" />\n        {data.hasSubheader && <div className=\"Header-padder-sub\" />}\n      </React.Fragment>\n    )\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <header className=\"Header\">\n          <div className=\"Header-main\">\n            {this.getBackButton()}\n            {this.getTitle()}\n            {this.getCloseButton()}\n          </div>\n          {this.getSubheader()}\n        </header>\n        {this.getPadder()}\n      </React.Fragment>\n    )\n  }\n}\n","import React from 'react';\nimport stations from '../data/stations.json';\nimport SingleIcon from '../data/icon/single';\nimport ReturnIcon from '../data/icon/return';\nimport OpenReturnIcon from '../data/icon/open-return';\nimport SeasonIcon from '../data/icon/season';\nimport Header from '../ui/Header';\n\nexport const getStationName = id => {\n  return stations.find(station => station.id === id).name;\n};\n\nexport const getSelectedOutboundService = (results, selection) => {\n  if (results.outbound) {\n    return results.outbound.find(service => service.id === selection.outboundJourney);\n  }\n\n  return null;\n};\n\nexport const getSelectedOutboundTicket = (results, selection) => {\n  const selectedOutboundService = getSelectedOutboundService(results, selection);\n\n  if (selectedOutboundService) {\n    return selectedOutboundService.tickets.find(ticket => ticket.id === selection.outboundTicket);\n  }\n\n  return null;\n};\n\nexport const getSelectedInboundService = (results, selection) => {\n  if (results.inbound) {\n    return results.inbound.find(service => service.id === selection.inboundJourney);\n  }\n\n  return null;\n};\n\nexport const getSelectedInboundTicket = (results, selection) => {\n  const selectedInboundService = getSelectedInboundService(results, selection);\n\n  if (selectedInboundService) {\n    return selectedInboundService.tickets.find(ticket => ticket.id === selection.inboundTicket);\n  }\n\n  return null;\n};\n\nexport const getDurationString = (departure, arrival) => {\n  if (!departure || !arrival) {\n    return null;\n  }\n\n  const duration = arrival.diff(departure, 'minutes');\n\n  const hours = Math.floor(duration / 60).toFixed(0);\n  const minutes = (duration % 60).toFixed(0).padStart(2, '0');\n\n  if (hours === '0') {\n    return `${minutes}m`;\n  } else {\n    return `${hours}h ${minutes}m`;\n  }\n};\n\nexport const getChangesString = changes => {\n  if (changes === 0) {\n    return 'direct';\n  } else {\n    return `${changes} changes`;\n  }\n}\n\nexport const getTicketTypeIcon = (id, className) => {\n  switch (id) {\n    case 0:\n      return <SingleIcon className={className} />\n    case 1:\n      return <ReturnIcon className={className} />\n    case 2:\n      return <OpenReturnIcon className={className} />\n    case 3:\n      return <SeasonIcon className={className} />\n    default:\n      return null;\n  }\n};\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 10 14\">\n        <path transform=\"translate(-13.000000, -2.000000)\" d=\"M18,8 C20.7614237,8 23,10.2385763 23,13 C23,15.7614237 13,15.7614237 13,13 C13,10.2385763 15.2385763,8 18,8 Z M18,2 C19.6568542,2 21,3.34314575 21,5 C21,6.65685425 19.6568542,8 18,8 C16.3431458,8 15,6.65685425 15,5 C15,3.34314575 16.3431458,2 18,2 Z\" id=\"Combined-Shape\"></path>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 12 24\">\n        <path transform=\"translate(-340.000000, -14.000000)\" d=\"M340.499776,38 C340.37574,38 340.250719,37.9541089 340.154059,37.8613423 C339.954832,37.6704184 339.947988,37.3540087 340.138449,37.1543191 L350.807805,25.9998722 L340.138449,14.8454722 C339.947988,14.6457826 339.954832,14.329373 340.154059,14.1384491 C340.353286,13.9470564 340.669704,13.9558221 340.861102,14.1540586 L351.861549,25.6541654 C352.04615,25.8475269 352.04615,26.1522176 351.861549,26.345579 L340.861149,37.8457327 C340.762473,37.9482494 340.63164,38 340.499776,38 Z\" id=\"Path\"></path>\n    </svg>\n);\n\nexport default icon;\n","\nimport React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 24\">\n        <polygon id=\"Mask\" fill=\"#382F2D\" transform=\"translate(12.000000, 12.000714) scale(1, -1) translate(-12.000000, -12.000714) \" points=\"24 12.0138506 13.8071506 22.2864286 10.4008667 22.2864286 19.3716143 13.2749343 0 13.2749343 0 10.7264943 19.3716143 10.7264943 10.4008667 1.715 13.8071506 1.715\"></polygon>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\nimport Block from './Block';\nimport Badge from './Badge';\nimport { formatPrice } from '../utility/format';\nimport { getChangesString, getDurationString } from '../utility/get';\n\nimport PersonIcon from '../data/icon/person';\nimport LargeChevron from '../data/icon/large-chevron';\nimport Arrow from '../data/icon/arrow';\nimport logo from '../data/logo.svg';\n\nimport './ServiceResult.css';\n\nexport default class ServiceResult extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.handleClick = this.handleClick.bind(this);\n  }\n  \n  getBadges() {\n    const { data } = this.props;\n\n    const elements = [];\n\n    if (data.isCheapest) {\n      elements.push(<Badge key=\"cheapest\" cheapest text=\"Cheapest\" />);\n    }\n    if (data.isFastest) {\n      elements.push(<Badge key=\"fastest\" fastest text=\"Fastest\" />);\n    }\n    \n    if (elements.length > 0) {\n      return (\n        <div className=\"ServiceResult-horizontal ServiceResult-badges\">\n          {elements}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  handleClick() {\n    const { data, onClick } = this.props;\n\n    if (data.tickets.length > 0) {\n      onClick();\n    }\n  }\n\n  render() {\n    const { data, onServiceInfoClick } = this.props;\n\n    return (\n      <Block className=\"ServiceResult\" onClick={this.handleClick}>\n        <div className=\"ServiceResult-horizontal ServiceResult-top\">\n          <div className=\"ServiceResult-top-content\">\n            <div className=\"ServiceResult-topLine\">\n              {this.getBadges()}\n              {data.price.standard && <div className=\"ServiceResult-priceLabel\">\n                <PersonIcon className=\"ServiceResult-personIcon\" />\n                <b>{data.passengers}&nbsp;</b>\n                Return from\n              </div>}\n            </div>\n            <div className=\"ServiceResult-horizontal\">\n              <div className=\"ServiceResult-details\">\n                <div className=\"ServiceResult-stations\">\n                  <div className=\"ServiceResult-station\">\n                    <div className=\"ServiceResult-station-time\">\n                      {data.time.departure.format('HH:mm')}\n                    </div>\n                    <div className=\"ServiceResult-station-name\">\n                      {data.legs[0].origin}\n                    </div>\n                  </div>\n                  <Arrow className=\"ServiceResult-station-arrow\" />\n                  <div className=\"ServiceResult-station\">\n                    <div className=\"ServiceResult-station-time\">\n                      {data.time.arrival.format('HH:mm')}\n                    </div>\n                    <div className=\"ServiceResult-station-name\">\n                      {data.legs[data.legs.length - 1].destination}\n                    </div>\n                  </div>\n                </div>\n                {data.note && <div className=\"ServiceResult-note\">\n                  {data.note}\n                </div>}\n              </div>\n              <div className=\"ServiceResult-prices\">\n                {data.price.standard && <div className=\"ServiceResult-prices-standard\">\n                  {formatPrice(data.price.standard)}\n                </div>}\n                {data.price.first && <div className=\"ServiceResult-prices-first\">\n                  1st {formatPrice(data.price.first)}\n                </div>}\n              </div>\n            </div>\n          </div>\n          <LargeChevron className=\"ServiceResult-chevron\" />\n        </div>\n        <div className=\"ServiceResult-bottom\">\n          <div className=\"ServiceResult-bottom-left\">\n            {(data.toc === 'GR') && <img src={logo} className=\"ServiceResult-logo\" />}\n            <div className=\"ServiceResult-length\">\n              {getDurationString(data.time.departure, data.time.arrival)}, {getChangesString(data.changes)}\n            </div>\n          </div>\n          <div className=\"ServiceResult-info\" onClick={e => {onServiceInfoClick(); e.stopPropagation()}}>\n            Journey info\n          </div>\n        </div>\n      </Block>\n    )\n  }\n}\n","import React from 'react';\nimport ServiceResult from './ServiceResult';\n\nimport './ServiceResultList.css';\n\nexport default class ServiceResultList extends React.Component {\n  render() {\n    const { data, onClick, onServiceInfoClick } = this.props;\n\n    return (\n      <div className=\"ServiceResultList\">\n        {data.map(item => {\n          return (\n            <ServiceResult key={item.id} data={item} onClick={() => onClick(item.id)} onServiceInfoClick={() => onServiceInfoClick(item.id)} />\n          );\n        })}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Block from './Block';\nimport { formatPrice } from '../utility/format';\nimport Badge from './Badge';\n\nimport LargeChevron from '../data/icon/large-chevron';\nimport PersonIcon from '../data/icon/person';\n\nimport './TicketResult.css';\n\nexport default class TicketResult extends React.Component {\n  getBadges() {\n    const { data } = this.props;\n\n    const elements = [];\n\n    if (data.isCheapest) {\n      elements.push(<Badge key=\"cheapest\" cheapest text=\"Cheapest\" />);\n    }\n\n    if (data.isRecommended) {\n      elements.push(<Badge key=\"recommended\" recommended text=\"Recommended\" />);\n    }\n\n    if (elements.length > 0) {\n      return (\n        <div className=\"TicketResult-badges\">\n          {elements}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  getPrice() {\n    const { data } = this.props;\n\n    if (data.isDiscounted) {\n      return (\n        <div className=\"TicketResult-discount\">\n          <div className=\"TicketResult-discount-info\">\n            <div className=\"TicketResult-discount-label\">\n              Discounted\n            </div>\n            <div className=\"TicketResult-price\">\n              {formatPrice(data.price)}\n            </div>\n            <div className=\"TicketResult-price-strike\">\n              {formatPrice(data.price * 1.2)}\n            </div>\n          </div>\n          <LargeChevron className=\"TicketResult-chevron\" />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"TicketResult-nodiscount\">\n        <div className=\"TicketResult-price\">\n          {formatPrice(data.price)}\n        </div>\n        <LargeChevron className=\"TicketResult-chevron\" />\n      </div>\n    );\n\n  }\n\n  render() {\n    const { className, data, onClick, onConditionsClick, onPriceBreakdownClick } = this.props;\n    \n    return (\n      <Block className=\"TicketResult\" onClick={this.handleClick}>\n        <div className=\"TicketResult-top\">\n          <div className=\"TicketResult-top-left\">\n            {this.getBadges()}\n            <div className=\"TicketResult-title\">\n              {data.title}\n            </div>\n            <div className=\"TicketResult-description\">\n              {data.descriptionLines.map((line, index) => (\n                <div key={index} className=\"TicketResult-description-line\">\n                  {line}\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"TicketResult-top-right\">\n            {this.getPrice()}\n          </div>\n        </div>\n        <div className=\"TicketResult-bottom\">\n          <div className=\"TicketResult-action\" onClick={e => { onConditionsClick(e); e.stopPropagation() }}>\n            Ticket restrictions\n          </div>\n          <div className=\"TicketResult-action\" onClick={e => { onPriceBreakdownClick(e); e.stopPropagation() }}>\n            Price details\n          </div>\n        </div>\n      </Block>\n    );\n\n    return (\n      <Block className={className} onClick={onClick}>\n        <div className=\"TicketResult\">\n          <div className=\"TicketResult-top\">\n            <div className=\"TicketResult-topLine\">\n              {this.getBadges()}\n              {data.price.standard && <div className=\"ServiceResult-priceLabel\">\n                <PersonIcon className=\"ServiceResult-personIcon\" />\n                <b>{data.passengers}&nbsp;</b>\n                Return from\n              </div>}\n            </div>\n            <div className=\"TicketResult-top-content\">\n              <div className=\"TicketResult-priceLabel\">\n                {data.passengers}\n                <PersonIcon className=\"TicketResult-personIcon\" />\n              </div>\n              <div className=\"TicketResult-header\">\n                <div className=\"TicketResult-title\">\n                  {data.title}\n                </div>\n                <div className=\"TicketResult-price\">\n                  {formatPrice(data.price)}\n                </div>\n              </div>\n              <div className=\"TicketResult-sub\">\n                <div className=\"TicketResult-note\">\n                  {data.descriptionLines.map((line, index) => <div key={index} className=\"TicketResult-note-line\">{line}</div>)}\n                </div>\n              </div>\n            </div>\n            <LargeChevron className=\"TicketResult-chevron\" />\n          </div>\n          <div className=\"TicketResult-actions\">\n            <div className=\"TicketResult-action\" onClick={e => { onConditionsClick(e); e.stopPropagation() }}>\n              Ticket conditions\n            </div>\n            <div className=\"TicketResult-action\" onClick={e => { onPriceBreakdownClick(e); e.stopPropagation() }}>\n              Price breakdown\n            </div>\n          </div>\n        </div>\n      </Block>\n    )\n  }\n}\n","import React from 'react';\nimport TicketResult from './TicketResult';\n\nimport './TicketResultList.css';\n\nexport default class TicketResultList extends React.Component {\n  render() {\n    const { data, onClick, onConditionsClick, onPriceBreakdownClick } = this.props;\n\n    return (\n      <div className=\"TicketResultList\">\n        {data.map(ticket => (\n          <TicketResult className=\"TicketResultList-ticket\" key={ticket.id} data={ticket} onClick={() => onClick(ticket.id)} onConditionsClick={() => onConditionsClick(ticket.id)} onPriceBreakdownClick={() => onPriceBreakdownClick(ticket.id)} />\n        ))}\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport './ResultsHeader.css';\n\nexport default class ResultsHeader extends React.Component {\n  render() {\n    const { data } = this.props;\n\n    if (data.ticketType === 1 || data.ticketType === 2) {\n      return (\n        <React.Fragment>\n          <div className=\"ResultsHeader\">\n            <div className={`ResultsHeader-group ${data.stage === 0 ? 'selected' : ''}`}>\n              <div className=\"ResultsHeader-title\">\n                1 - Going out\n              </div>\n              <div className=\"ResultsHeader-subtitle\">\n                {data.time.outbound}\n              </div>\n            </div>\n            <div className={`ResultsHeader-group ${data.stage === 1 ? 'selected' : ''}`}>\n              <div className=\"ResultsHeader-title\">\n                2 - Coming back\n              </div>\n              <div className=\"ResultsHeader-subtitle\">\n                {data.time.inbound}\n              </div>\n            </div>\n          </div>\n          <div className=\"ResultsHeader-padder\" />\n        </React.Fragment>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        <div className=\"ResultsHeader ResultsHeader-small\">\n          <div className=\"ResultsHeader-group selected\">\n            <div className=\"ResultsHeader-subtitle\">\n              {data.time.outbound}\n            </div>\n          </div>\n        </div>\n        <div className=\"ResultsHeader-padder-small\" />\n      </React.Fragment>\n    );\n    \n  }\n}\n","import React from 'react';\n\nimport './Footer.css';\n\nexport default class Footer extends React.Component {\n  render() {\n    const { children } = this.props;\n\n    // Note the footer padder is a fixed size and doesnt change with the content\n\n    return (\n      <React.Fragment>\n        <div className=\"Footer\">\n          {children}\n        </div>\n        <div className=\"Footer-padder\" />\n      </React.Fragment>\n    )\n  }\n}\n","import { CHANGE_SEARCH_DATA, CHANGE_SCREEN, CHANGE_RESULTS, CHANGE_SELECTED_OUTBOUND_SERVICE, CHANGE_SELECTED_OUTBOUND_TICKET, CHANGE_SELECTED_INBOUND_SERVICE, CHANGE_SELECTED_INBOUND_TICKET, CHANGE_USER_CASE, BEGIN_LOADING, END_LOADING } from './actionTypes';\nimport axios from 'axios';\nimport stations from '../data/stations';\n\nexport const changeSearchData = change => ({\n  type: CHANGE_SEARCH_DATA,\n  data: change,\n});\n\nconst findTrains = getState => {\n  const searchParams = getState().search;\n\n  const corsBypassUrl = 'https://cors-anywhere.herokuapp.com/';\n  const apiUrl = 'https://www.lner.co.uk/api/CbeService/GetFares';\n\n  const queryParams = {\n    ocrs: stations.find(station => station.id === searchParams.from).crs,\n    dcrs: stations.find(station => station.id === searchParams.to).crs,\n    outy: searchParams.outbound.time.format('YYYY'),\n    outm: searchParams.outbound.time.format('MM'),\n    outd: searchParams.outbound.time.format('DD'),\n    outh: searchParams.outbound.time.format('kk'),\n    outmi: searchParams.outbound.time.format('mm'),\n    outda: searchParams.outbound.after ? 'y' : 'n',\n    ret: (searchParams.ticketType === 1 || searchParams.ticketType === 2) ? 'y' : 'n',\n    rety: searchParams.ticketType === 1 ? searchParams.inbound.time.format('YYYY') : null,\n    retm: searchParams.ticketType === 1 ? searchParams.inbound.time.format('MM') : null,\n    retd: searchParams.ticketType === 1 ? searchParams.inbound.time.format('DD') : null,\n    reth: searchParams.ticketType === 1 ? searchParams.inbound.time.format('kk') : null,\n    retmi: searchParams.ticketType === 1 ? searchParams.inbound.time.format('mm') : null,\n    retda: searchParams.ticketType === 1 ? (searchParams.inbound.after ? 'y' : 'n') : null,\n    nad: searchParams.adults,\n    nch: searchParams.children,\n  };\n\n  return axios.get(`${corsBypassUrl}${apiUrl}`, { params: queryParams });\n};\n\nexport const changeUserCase = id => ({\n  type: CHANGE_USER_CASE,\n  id: id,\n});\n\nexport const changeResults = results => ({\n  type: CHANGE_RESULTS,\n  data: results,\n});\n\nexport const executeSearch = (redirectScreen = 1) => {\n  return (dispatch, getState) => {\n    dispatch(changeSearchData({ searching: true }));\n    return findTrains(getState)\n      .then(results => {\n        dispatch(changeResults(results.data));\n        dispatch(changeSearchData({ searching: false }));\n        dispatch(changeScreen(redirectScreen));\n      });\n  };\n};\n\nexport const earlierOutboundServices = () => {\n  return (dispatch, getState) => {\n    const { results } = getState();\n    dispatch(changeSearchData({\n      outbound: {\n        time: results.outbound[0].time.arrival,\n        after: false,\n      },\n    }));\n    dispatch(executeSearch(1));\n  };\n};\n\nexport const earlierInboundServices = () => {\n  return (dispatch, getState) => {\n    const { results } = getState();\n    dispatch(changeSearchData({\n      inbound: {\n        time: results.inbound[0].time.arrival,\n        after: false,\n      },\n    }));\n    dispatch(executeSearch(2));\n  };\n};\n\nexport const laterOutboundServices = () => {\n  return (dispatch, getState) => {\n    const { results } = getState();\n    dispatch(changeSearchData({\n      outbound: {\n        time: results.outbound[results.outbound.length - 1].time.departure,\n        after: true,\n      },\n    }));\n    dispatch(executeSearch(1));\n  };\n};\n\nexport const laterInboundServices = () => {\n  return (dispatch, getState) => {\n    const { results } = getState();\n    dispatch(changeSearchData({\n      inbound: {\n        time: results.inbound[results.inbound.length - 1].time.departure,\n        after: true,\n      },\n    }));\n    dispatch(executeSearch(2));\n  };\n};\n\nexport const changeSelectedOutboundService = id => ({\n  type: CHANGE_SELECTED_OUTBOUND_SERVICE,\n  id: id,\n});\n\nexport const changeSelectedOutboundTicket = id => ({\n  type: CHANGE_SELECTED_OUTBOUND_TICKET,\n  id: id,\n});\n\nexport const changeSelectedInboundService = id => ({\n  type: CHANGE_SELECTED_INBOUND_SERVICE,\n  id: id,\n});\n\nexport const changeSelectedInboundTicket = id => ({\n  type: CHANGE_SELECTED_INBOUND_TICKET,\n  id: id,\n});\n\nexport const beginLoading = () => ({\n  type: BEGIN_LOADING,\n});\n\nexport const endLoading = () => ({\n  type: END_LOADING,\n});\n\nconst delay = (t, v) => {\n  return new Promise(resolve => { \n    setTimeout(resolve.bind(null, v), t);\n  });\n}\n\nexport const executeLoad = milliseconds => {\n  return (dispatch, getState) => {\n    dispatch(beginLoading());\n    return delay(milliseconds).then(() => dispatch(endLoading()));\n  };\n};\n\nexport const changeScreen = id => {\n  return (dispatch, getState) => {\n    dispatch(executeLoad(300 + (Math.random() * 400))).then(() => {\n      dispatch({\n        type: CHANGE_SCREEN,\n        id: id,\n      });\n    });\n  };\n};\n","export const CHANGE_SEARCH_DATA = 'CHANGE_SEARCH_DATA';\n\nexport const CHANGE_SCREEN = 'CHANGE_SCREEN';\n\nexport const CHANGE_RESULTS = 'CHANGE_RESULTS';\n\nexport const CHANGE_SELECTED_OUTBOUND_SERVICE = 'CHANGE_SELECTED_OUTBOUND_SERVICE';\nexport const CHANGE_SELECTED_OUTBOUND_TICKET = 'CHANGE_SELECTED_OUTBOUND_TICKET';\nexport const CHANGE_SELECTED_INBOUND_SERVICE = 'CHANGE_SELECTED_INBOUND_SERVICE';\nexport const CHANGE_SELECTED_INBOUND_TICKET = 'CHANGE_SELECTED_INBOUND_TICKET';\n\nexport const LATER_OUTBOUND_SERVICES = 'LATER_OUTBOUND_SERVICES';\nexport const EARLIER_OUTBOUND_SERVICES = 'EARLIER_OUTBOUND_SERVICES';\nexport const LATER_INBOUND_SERVICES = 'LATER_INBOUND_SERVICES';\nexport const EARLIER_INBOUND_SERVICES = 'EARLIER_INBOUND_SERVICES';\n\nexport const CHANGE_USER_CASE = 'CHANGE_USER_CASE';\n\nexport const BEGIN_LOADING = 'BEGIN_LOADING';\nexport const END_LOADING = 'END_LOADING';\n","import React from 'react';\nimport ServiceResultList from '../ui/ServiceResultList';\nimport TicketResultList from '../ui/TicketResultList';\nimport ResultsHeader from '../ui/ResultsHeader';\nimport Header from '../ui/Header';\nimport Footer from '../ui/Footer';\nimport { connect } from 'react-redux';\nimport { changeSelectedOutboundService, changeSelectedOutboundTicket, changeSelectedInboundService, changeSelectedInboundTicket, changeScreen } from '../redux/actions';\nimport { earlierInboundServices, earlierOutboundServices, laterOutboundServices, laterInboundServices } from '../redux/actions';\nimport { getSelectedOutboundService, getSelectedOutboundTicket, getSelectedInboundService, getSelectedInboundTicket } from '../utility/get';\n\nimport serviceInfoScreen from '../data/serviceInfo.png';\nimport termsAndConditionsScreen from '../data/termsAndConditions.png';\n\nimport LargeChevron from '../data/icon/large-chevron';\nimport './Results.css';\nimport { formatPrice } from '../utility/format';\n\nconst getCheapestTicketPrice = tickets => {\n  const cheapest = Math.min(...tickets.map(ticket => ticket.price));\n  return cheapest === Infinity ? null : cheapest;\n};\n\nconst addDataToServices = services => {\n  services.forEach(service => {\n    if (service.tickets.length > 0) {\n      service.price = {\n        standard: getCheapestTicketPrice(service.tickets.filter(ticket => !ticket.isFirst)),\n        first: getCheapestTicketPrice(service.tickets.filter(ticket => ticket.isFirst)),\n      };\n    } else {\n      service.price = {\n        standard: null,\n        first: null,\n      };\n      service.note = 'No tickets available';\n    }\n    service.time.duration = service.time.arrival.diff(service.time.departure, 'minutes');\n  });\n}\n\nconst addQualifiers = services => {\n  let cheapestServicePrice = Math.min(...services.map(service => Math.min(service.price.standard, service.price.first)));\n  let fastestServiceTime = Math.min(...services.map(service => service.time.duration));\n\n  services.forEach(service => {\n    service.isCheapest = service.price.standard === cheapestServicePrice || service.price.first === cheapestServicePrice;\n    service.isFastest = service.time.duration === fastestServiceTime;\n  });\n}\n\nconst mapStateToProps = state => {\n  const { search, results } = state;\n  const { outbound, inbound } = results;\n\n  const passengers = parseInt(search.adults) + parseInt(search.children);\n\n  if (outbound) {\n    addDataToServices(outbound);\n\n    outbound.forEach(service => {\n      service.passengers = passengers;\n      service.tickets.forEach(ticket => ticket.passengers = passengers);\n    });\n  }\n\n  if (inbound) {\n    addDataToServices(inbound);\n\n    inbound.forEach(service => {\n      service.passengers = passengers;\n      service.tickets.forEach(ticket => ticket.passengers = passengers);\n    });\n  }\n\n  if (outbound) {\n    addQualifiers(outbound);\n  }\n\n  if (inbound) {\n    addQualifiers(inbound);\n  }\n\n  return {\n    results: state.results,\n    outbound,\n    inbound,\n    passengers: search.adults + search.children,\n    selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n    selectedOutboundTicket: getSelectedOutboundTicket(state.results, state.selection),\n    selectedInboundService: getSelectedInboundService(state.results, state.selection),\n    selectedInboundTicket: getSelectedInboundTicket(state.results, state.selection),\n    search: state.search,\n    screen: state.screen,\n    selection: state.selection,\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundService: id => dispatch(changeSelectedOutboundService(id)),\n  selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n  selectInboundService: id => dispatch(changeSelectedInboundService(id)),\n  selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n  earlierOutboundServices: () => dispatch(earlierOutboundServices()),\n  laterOutboundServices: () => dispatch(laterOutboundServices()),\n  earlierInboundServices: () => dispatch(earlierInboundServices()),\n  laterInboundServices: () => dispatch(laterInboundServices()),\n})\n\nclass Results extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      serviceInfo: false,\n      termsAndConditions: false,\n      priceBreakdown: false,\n    };\n  }\n\n  getTicketPresentationData(tickets) {\n    let cheapestService = tickets.reduce((result, ticket) => (ticket.price < result.price ? ticket : result));\n    let cheapestFirst = tickets.filter(ticket => ticket.isFirst).reduce((result, ticket) => (ticket.price < result.price ? ticket : result));\n    let cheapestFlexible = tickets.filter(ticket => ticket.isFlexible).reduce((result, ticket) => (ticket.price < result.price ? ticket : result));\n\n    // Uniqueness\n    if (cheapestService) {\n      if (cheapestFirst) {\n        if (cheapestFirst.id === cheapestService.id) {\n          cheapestFirst = null;\n        }  \n      }\n      if (cheapestFlexible) {\n        if (cheapestFlexible.id === cheapestService.id || cheapestFlexible.id === cheapestFirst.id) {\n          cheapestFlexible = null;\n        }  \n      }\n    }\n  \n    let highlights = [];\n\n    if (cheapestService) {\n      highlights.push({\n        title: 'Cheapest ticket',\n        ticket: cheapestService,\n      });\n    }\n    if (cheapestFirst) {\n      highlights.push({\n        title: 'Cheapest 1st class ticket',\n        ticket: cheapestFirst,\n      });\n    }\n    if (cheapestFlexible) {\n      highlights.push({\n        title: 'Cheapest flexible ticket',\n        ticket: cheapestFlexible,\n      });\n    }\n    \n    const otherFixed = tickets\n      .filter(ticket => !ticket.isFlexible)\n      .filter(ticket => !highlights.some(highlight => highlight.ticket.id === ticket.id));\n\n    const otherFlexible = tickets\n      .filter(ticket => ticket.isFlexible)\n      .filter(ticket => !highlights.some(highlight => highlight.ticket.id === ticket.id));\n\n    const categories = [];\n\n    if (otherFixed.length > 0) {\n      categories.push({\n        title: `More fixed tickets from ${formatPrice(Math.min(...otherFixed.map(ticket => ticket.price)))}`,\n        tickets: otherFixed,\n      });\n    }\n\n    if (otherFlexible.length > 0) {\n      categories.push({\n        title: `More flexible tickets from ${formatPrice(Math.min(...otherFlexible.map(ticket => ticket.price)))}`,\n        tickets: otherFlexible,\n      });\n    }\n\n    return {\n      highlights,\n      categories,\n    };\n  }\n\n  getResultsHeader() { \n    const { search, screen } = this.props;\n\n    let data = {\n      ticketType: search.ticketType,\n      time: {\n        outbound: search.outbound.time.format('ddd DD MMM'),\n      },\n    };\n\n    if (search.ticketType === 1) {\n      if (screen === 1 || screen === 2) {\n        data.stage = 0;\n      } else if (screen === 3 || screen === 4) {\n        data.stage = 1;\n      }\n      data.time.inbound = search.inbound.time.format('ddd DD MMM');\n    } else if (search.ticketType === 2) {\n      if (screen === 1 || screen === 2) {\n        data.stage = 0;\n      } else if (screen === 3 || screen === 4) {\n        data.stage = 1;\n      }\n      data.time.inbound = 'Open return';\n    }\n\n    return <ResultsHeader data={data} />;\n  }\n\n  getEarlierButton(onClick) {\n    return (\n      <div className=\"Results-earlier\" onClick={onClick}>\n        <div className=\"Results-earlier-text\">\n          Earlier trains\n        </div>\n        <LargeChevron className=\"Results-earlier-chevron\" />\n      </div>\n    );\n  }\n\n  getLaterButton(onClick) {\n    return (\n      <div className=\"Results-later\" onClick={onClick}>\n        <div className=\"Results-later-text\">\n          Later trains\n        </div>\n        <LargeChevron className=\"Results-later-chevron\" />\n      </div>\n    );\n  }\n\n  getOutboundServiceContent() {\n    const { outbound, selectOutboundService, earlierOutboundServices, laterOutboundServices } = this.props;\n\n    return (\n      <div className=\"Results-content-fullwidth\">\n        {this.getEarlierButton(earlierOutboundServices)}\n        <ServiceResultList data={outbound} onClick={id => { selectOutboundService(id); this.goToNextScreen() }} onServiceInfoClick={() => this.setState({ serviceInfo: true })} />\n        {this.getLaterButton(laterOutboundServices)}\n      </div>\n    )\n  }\n\n  getOutboundTicketContent() {\n    const { selectOutboundTicket, selectedOutboundService, inbound } = this.props;\n  \n    const data = this.getTicketPresentationData(selectedOutboundService.tickets);\n\n    const onClick = id => {\n      const { changeScreen, inbound } = this.props;\n\n      selectOutboundTicket(id);\n      // doesnt use selectedOutboundTicket because it wont update before here\n      if (inbound && !selectedOutboundService.tickets.find(ticket => ticket.id === id).isReturn) {\n        changeScreen(3);\n      } else {\n        changeScreen(5);\n      }\n    };\n\n    return (\n      <div className=\"Results-content\">\n        <TicketResultList data={data} onClick={onClick} onPriceBreakdownClick={id => this.setState({ priceBreakdown: id })} onConditionsClick={() => this.setState({ termsAndConditions: true })} />\n      </div>\n    )\n  }\n\n  getReturnServiceContent() {\n    const { inbound, selectInboundService, laterInboundServices, earlierInboundServices } = this.props;\n\n    return (\n      <div className=\"Results-content-fullwidth\">\n        {this.getEarlierButton(earlierInboundServices)}\n        <ServiceResultList data={inbound} onClick={id => { selectInboundService(id); this.goToNextScreen() }} onServiceInfoClick={() => this.setState({ serviceInfo: true })}/>\n        {this.getLaterButton(laterInboundServices)}\n      </div>\n    );\n  }\n\n  getReturnTicketContent() {\n    const { selectInboundTicket, selectedInboundService } = this.props;\n\n    const data = this.getTicketPresentationData(selectedInboundService.tickets);\n\n    return (\n      <div className=\"Results-content\">\n        <TicketResultList data={data} onClick={id => { selectInboundTicket(id); this.goToNextScreen() }} onPriceBreakdownClick={id => this.setState({ priceBreakdown: id })} onConditionsClick={() => this.setState({ termsAndConditions: true })} />\n      </div>\n    )\n  }\n\n  getHeader() { \n    const { search } = this.props;\n\n    const data = {\n      station: {\n        origin: search.from,\n        destination: search.to,\n      },\n      ticketType: search.ticketType,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToPreviousScreen()} />\n    );\n  }\n\n  getPreviousScreenId() {\n    const { screen, selectOutboundService, selectOutboundTicket, selectInboundService } = this.props;\n\n    switch (screen) {\n      case 2:\n        selectOutboundService(null);\n      case 3:\n        selectOutboundTicket(null);\n      case 4:\n        selectInboundService(null);\n    }\n\n    return screen - 1;\n  }\n\n  goToPreviousScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getPreviousScreenId());\n  }\n\n  getNextScreenId() {\n    const { screen } = this.props;\n\n    switch (screen) {\n      // Case 2 is covered in its own fucntion\n      case 1:\n        return 2;\n      case 3:\n        return 4;\n      case 4:\n        return 5;\n    }\n  }\n\n  goToNextScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getNextScreenId());\n  }\n\n  getContent() {\n    const { screen } = this.props;\n\n    switch (screen) {\n      case 1:\n        return this.getOutboundServiceContent();\n      case 2:\n        return this.getOutboundTicketContent();\n      case 3:\n        return this.getReturnServiceContent();\n      case 4:\n        return this.getReturnTicketContent();\n      default:\n        return 'Oh no';\n    }\n  }\n\n  getFooter() {\n    const { screen, selectedOutboundTicket } = this.props;\n\n    if (screen === 3 || screen === 4) {\n      return (\n        <Footer>\n          <div className=\"Results-footer\">\n            <div className=\"Results-footer-left\">\n              <b>Outbound</b> {selectedOutboundTicket.name} x{selectedOutboundTicket.passengers}\n            </div>\n            <div className=\"Results-footer-right\">\n              {formatPrice(selectedOutboundTicket.price)}\n            </div>\n          </div>\n        </Footer>\n      );\n    }\n\n    return null;\n  }\n\n  getPriceBreakdownService(service, ticket) {\n    if (!service) {\n      return null;\n    }\n\n    return (\n      <div className=\"PriceBreakdown-service\">\n        <div className=\"PriceBreakdown-service-header\">\n          <div className=\"PriceBreakdown-service-header-left\">\n            <div className=\"PriceBreakdown-service-title\">\n              {service.station.origin} - {service.station.destination}\n            </div>\n            <div className=\"PriceBreakdown-service-subtitle\">\n              {service.time.departure.format('ddd DD MMM')}, {service.time.departure.format('HH:mm')}-{service.time.arrival.format('HH:mm')}\n            </div>\n          </div>\n          <div className=\"PriceBreakdown-service-header-right\">\n            <LargeChevron className=\"PriceBreakdown-chevron\" />\n          </div>\n        </div>\n        <div className=\"PriceBreakdown-service-ticketName\">\n          {ticket.name}\n        </div>\n        <div className=\"PriceBreakdown-service-row\">\n          <div className=\"PriceBreakdown-service-row-quantity\">\n            {service.passengers}x\n          </div>\n          <div className=\"PriceBreakdown-service-row-main\">\n            Passengers\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {ticket.isDiscounted ? formatPrice(ticket.price * 1.2) : formatPrice(ticket.price)}\n          </div>\n        </div>\n        {ticket.isDiscounted && <div className=\"PriceBreakdown-service-row discount\">\n          <div className=\"PriceBreakdown-service-row-main\">\n            Split ticket discount\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {formatPrice(ticket.price * -0.2)}\n          </div>\n        </div>}\n        <div className=\"PriceBreakdown-service-row total\">\n          <div className=\"PriceBreakdown-service-row-main\">\n            Total\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {formatPrice(ticket.price)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  getPriceBreakdown() {\n    const { selectedOutboundService, selectedInboundService, selectedOutboundTicket, selectedInboundTicket, screen } = this.props;\n    const { priceBreakdown } = this.state;\n\n    return (\n      <div className=\"PriceBreakdown\">\n        <div className=\"PriceBreakdown-header\">\n          Price breakdown\n        </div>\n        {this.getPriceBreakdownService(selectedOutboundService, screen < 3 ? selectedOutboundService.tickets[priceBreakdown] : selectedOutboundTicket)}\n        {screen >= 3 ? this.getPriceBreakdownService(selectedInboundService, screen < 5 ? selectedInboundService.tickets[priceBreakdown] : selectedInboundTicket) : null}\n      </div>\n    );\n  }\n\n  render() {\n    const { serviceInfo, termsAndConditions, priceBreakdown } = this.state;\n\n    return (\n      <React.Fragment>\n        <div className=\"Results\">\n          <div className={`${serviceInfo ? '' : 'hidden'}`}>\n            <Header data={{ title: 'Service information' }} onBackClick={() => this.setState({ serviceInfo: false })} />\n            <img src={serviceInfoScreen} className=\"Results-fakeContent\" />\n          </div>\n          <div className={`${termsAndConditions ? '' : 'hidden'}`}>\n            <Header data={{ title: 'Terms and conditions' }} onBackClick={() => this.setState({ termsAndConditions: false })} />\n            <img src={termsAndConditionsScreen} className=\"Results-fakeContent\" />\n          </div>\n          <div className={`${termsAndConditions || serviceInfo ? 'hidden' : ''}`}>\n            {this.getHeader()}\n            {this.getResultsHeader()}\n            {this.getContent()}\n            {this.getFooter()}\n          </div>\n        </div>\n        {priceBreakdown !== false && <div className=\"Results-modal\" onClick={() => this.setState({ priceBreakdown: false })}>\n          {this.getPriceBreakdown()}\n        </div>}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Results);\n","const screen = {\n  userCaseMenu: 100,\n  search: 0,\n  serviceOutbound: 1,\n  serviceInbound: 2,\n  ticketHighlights: 3,\n  ticketOutbound: 10,\n  ticketInbound: 11,\n  review: 5,\n  payment: 6,\n  confirmation: 7,\n};\n\nexport default screen;","import React from 'react';\n\nimport LargeChevron from '../../../data/icon/large-chevron';\n\nclass ResultsThreeServiceEarlier extends React.Component {\n  render() {\n    const { onClick } = this.props;\n\n    return (\n      <div className=\"Results-earlier\" onClick={onClick}>\n        <LargeChevron className=\"Results-earlier-chevron\" />\n        <div className=\"Results-earlier-text\">\n          Show earlier trains\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ResultsThreeServiceEarlier;\n","import React from 'react';\n\nimport LargeChevron from '../../../data/icon/large-chevron';\n\nclass ResultsThreeServiceLater extends React.Component {\n  render() {\n    const { onClick } = this.props;\n\n    return (\n      <div className=\"Results-later\" onClick={onClick}>\n        <LargeChevron className=\"Results-later-chevron\" />\n        <div className=\"Results-later-text\">\n          Show later trains\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ResultsThreeServiceLater;","import React from 'react';\nimport ServiceResultList from '../../../ui/ServiceResultList';\nimport screen from '../../../data/screen';\nimport { connect } from 'react-redux';\nimport { changeSelectedOutboundService, changeScreen } from '../../../redux/actions';\nimport { earlierOutboundServices, laterOutboundServices } from '../../../redux/actions';\n\nimport ResultsThreeServiceEarlier from '../ResultsThreeServiceEarlier';\nimport ResultsThreeServiceLater from '../ResultsThreeServiceLater';\n\nconst mapStateToProps = null;\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundService: id => dispatch(changeSelectedOutboundService(id)),\n  earlierOutboundServices: () => dispatch(earlierOutboundServices()),\n  laterOutboundServices: () => dispatch(laterOutboundServices()),\n})\n\nclass ResultsThreeServiceOutbound extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onServiceSelect = this.onServiceSelect.bind(this);\n  }\n\n  onServiceSelect(id) {\n    const { servicesInbound } = this.props;\n    const { changeScreen, selectOutboundService } = this.props;\n\n    selectOutboundService(id);\n    if (servicesInbound) {\n      changeScreen(screen.serviceInbound);\n    } else {\n      changeScreen(screen.ticketHighlights);\n    }\n  }\n\n  render() {\n    const { servicesOutbound, servicesInbound, onServiceInfoClick } = this.props;\n    const { earlierOutboundServices, laterOutboundServices } = this.props;\n\n    const presentationServices = [];\n\n    // In return case, adjust prices to be full journey\n    // i.e. if there are inbound journeys\n    if (servicesInbound) {\n      // Calculate minima from potential inbound tickets\n      const inboundTickets = [].concat(...servicesInbound.map(service => service.tickets));\n      const inboundSingles = inboundTickets.filter(ticket => !ticket.isReturn);\n      const cheapestInboundLegStandard = Math.min(...inboundSingles.filter(ticket => !ticket.isFirst).map(ticket => ticket.price));\n      const cheapestInboundLegFirst = Math.min(...inboundSingles.filter(ticket => ticket.isFirst).map(ticket => ticket.price));\n     \n      // For each service...\n      servicesOutbound.forEach(service => {\n        const outboundReturns = service.tickets.filter(ticket => ticket.isReturn);\n        const cheapestOutboundReturnStandard = Math.min(...outboundReturns.filter(ticket => !ticket.isFirst).map(ticket => ticket.price));\n        const cheapestOutboundReturnFirst = Math.min(...outboundReturns.filter(ticket => ticket.isFirst).map(ticket => ticket.price));\n        // Consider whether a return is cheaper than two singles\n        presentationServices.push({\n          ...service,\n          price: {\n            standard: Math.min(service.price.standard + cheapestInboundLegStandard, cheapestOutboundReturnStandard),\n            first: Math.min(service.price.first + cheapestInboundLegFirst, cheapestOutboundReturnFirst),\n          },\n        });\n      });\n    } else {\n      servicesOutbound.forEach(service => {\n        presentationServices.push({\n          ...service,\n        });\n      });\n    };\n\n    return (\n      <div className=\"ResultsThreeServiceOutbound\">\n        <ResultsThreeServiceEarlier onClick={earlierOutboundServices} />\n        <ServiceResultList data={presentationServices} onClick={this.onServiceSelect} onServiceInfoClick={onServiceInfoClick} />\n        <ResultsThreeServiceLater onClick={laterOutboundServices} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreeServiceOutbound);\n","import React from 'react';\nimport ServiceResultList from '../../../ui/ServiceResultList';\nimport screen from '../../../data/screen';\nimport { connect } from 'react-redux';\nimport { changeSelectedInboundService, changeScreen } from '../../../redux/actions';\nimport { earlierInboundServices, laterInboundServices } from '../../../redux/actions';\nimport ResultsThreeServiceEarlier from '../ResultsThreeServiceEarlier';\nimport ResultsThreeServiceLater from '../ResultsThreeServiceLater';\nimport { getSelectedOutboundService } from '../../../utility/get';\n\nconst mapStateToProps = state => ({\n  selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectInboundService: id => dispatch(changeSelectedInboundService(id)),\n  earlierInboundServices: () => dispatch(earlierInboundServices()),\n  laterInboundServices: () => dispatch(laterInboundServices()),\n});\n\nclass ResultsThreeServiceInbound extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onServiceSelect = this.onServiceSelect.bind(this);\n  }\n\n  onServiceSelect(id) {\n    const { changeScreen, selectInboundService } = this.props;\n\n    selectInboundService(id);\n    changeScreen(screen.ticketHighlights);\n  }\n\n  render() {\n    const { servicesInbound, onServiceInfoClick } = this.props;\n    const { selectedOutboundService, laterInboundServices, earlierInboundServices } = this.props;\n\n    const presentationServices = [];\n    \n     // Adjust prices based on selected outbound service\n    servicesInbound.forEach(service => {\n      const outboundReturns = selectedOutboundService.tickets.filter(ticket => ticket.isReturn);\n      const cheapestOutboundReturnStandard = Math.min(...outboundReturns.filter(ticket => !ticket.isFirst).map(ticket => ticket.price));\n      const cheapestOutboundReturnFirst = Math.min(...outboundReturns.filter(ticket => ticket.isFirst).map(ticket => ticket.price));\n      // Consider whether a return is cheaper than two singles\n      presentationServices.push({\n        ...service,\n        price: {\n          standard: Math.min(selectedOutboundService.price.standard + service.price.standard, cheapestOutboundReturnStandard),\n          first: Math.min(selectedOutboundService.price.first + service.price.first, cheapestOutboundReturnFirst),\n        },\n      });\n    });\n\n    return (\n      <div className=\"ResultsThreeService\">\n        <ResultsThreeServiceEarlier onClick={earlierInboundServices} />\n        <ServiceResultList data={presentationServices} onClick={this.onServiceSelect} onServiceInfoClick={onServiceInfoClick}/>\n        <ResultsThreeServiceLater onClick={laterInboundServices} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreeServiceInbound);\n","import React from 'react';\nimport TicketResult from './TicketResult';\nimport LargeChevron from '../data/icon/large-chevron';\n\nimport './TicketResultList.css';\n\nexport default class TicketResultList extends React.Component {\n  presentHighlights(highlights) {  \n    const { onHighlightClick, onConditionsClick, onPriceBreakdownClick } = this.props;\n\n    return (\n      <div className=\"TicketResultList-highlights\">\n        {highlights.map((ticket, index) => (\n          <TicketResult className=\"TicketResultList-ticket\" key={index} data={ticket} onClick={() => onHighlightClick(ticket.idOut, ticket.idIn)} onConditionsClick={() => onConditionsClick(ticket.id)} onPriceBreakdownClick={() => onPriceBreakdownClick(ticket.idOut, ticket.idIn)} />\n        ))}\n      </div>\n    )\n  }\n\n  render() {\n    const { data, onMixClick, ticketType } = this.props;\n\n    const { highlights } = data;\n\n    return (\n      <div className=\"TicketResultList\">\n        {this.presentHighlights(highlights)}\n        <div className=\"TicketResultList-mix\" onClick={onMixClick}>\n          <div className=\"TicketResultList-mix-top\">\n            <div className=\"TicketResultList-mix-title\">\n              {ticketType === 1 ? 'Mix and match tickets' : 'More tickets'}\n            </div>\n            <LargeChevron className=\"TicketResultList-mix-chevron\" />\n          </div>\n          <div className=\"TicketResultList-mix-description\">\n            Choose from all available tickets for each leg of your journey, for the combination that best suits your needs.\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport HighlightScreen from '../../../ui/HighlightScreen';\nimport { connect } from 'react-redux';\nimport { changeSelectedOutboundTicket, changeSelectedInboundTicket, changeScreen } from '../../../redux/actions';\nimport { getSelectedInboundService, getSelectedOutboundService } from '../../../utility/get';\n\nconst mapStateToProps = state => ({\n  ticketType: state.search.ticketType,\n  selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n  selectedInboundService: getSelectedInboundService(state.results, state.selection),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n  selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n});\n\nclass ResultsThreeTicketHighlights extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onHighlightClick = this.onHighlightClick.bind(this);\n    this.onMixClick = this.onMixClick.bind(this);\n  }\n\n  getCheapestForSingle(tickets) {\n    const cheapestPrice = Math.min(...tickets.map(ticket => ticket.price));\n    const cheapest = tickets.find(ticket => ticket.price === cheapestPrice);\n\n    if (!cheapest) return null;\n\n    return {\n      idOut: cheapest.id,\n      idIn: null,\n      descriptionLines: [\n        cheapest.name,\n      ],\n      price: cheapestPrice,\n      isDiscounted: cheapest.isDiscounted,\n      passengers: cheapest.passengers,\n    };\n  }\n\n  getCheapestForReturn(outTickets, inTickets) {\n    const twoLegTickets = outTickets.filter(ticket => ticket.isReturn);\n    const outLegTickets = outTickets.filter(ticket => !ticket.isReturn);\n    const inLegTickets = inTickets;\n\n    const cheapestOutPrice = Math.min(...outLegTickets.map(ticket => ticket.price));\n    const cheapestInPrice = Math.min(...inLegTickets.map(ticket => ticket.price));\n    const cheapestTwoLegPrice = Math.min(...twoLegTickets.map(ticket => ticket.price));\n\n    if (cheapestOutPrice + cheapestInPrice < cheapestTwoLegPrice) {\n      // Two tickets are cheaper than one\n      const cheapestOut = outLegTickets.find(ticket => ticket.price === cheapestOutPrice);\n      const cheapestIn = inLegTickets.find(ticket => ticket.price === cheapestInPrice);\n\n      if (!cheapestOut || !cheapestIn) return null;\n\n      return {\n        idOut: cheapestOut.id,\n        idIn: cheapestIn.id,\n        descriptionLines: [\n          `Outbound: ${cheapestOut.name}`,\n          `Inbound: ${cheapestIn.name}`,\n        ],\n        price: cheapestOutPrice + cheapestInPrice,\n        isDiscounted: cheapestOut.isDiscounted || cheapestIn.isDiscounted,\n        passengers: cheapestOut.passengers,\n      };\n    } else {\n      // One ticket is cheaper than two\n      const cheapestTwoLeg = twoLegTickets.find(ticket => ticket.price === cheapestTwoLegPrice);\n\n      if (!cheapestTwoLeg) return null;\n\n      return {\n        idOut: cheapestTwoLeg.id,\n        idIn: null,\n        descriptionLines: [\n          cheapestTwoLeg.name,\n        ],\n        price: cheapestTwoLeg.price,\n        isDiscounted: cheapestTwoLeg.isDiscounted,\n        passengers: cheapestTwoLeg.passengers,\n      };\n    }\n  }\n\n  getTicketHighlightsData() {\n    const { ticketType, selectedOutboundService, selectedInboundService } = this.props;\n\n    let cheapest;\n    let cheapestFirst;\n    let cheapestFlexible;\n    let bestValue;\n\n    if (selectedInboundService) {\n      cheapest = this.getCheapestForReturn(\n        selectedOutboundService.tickets,\n        selectedInboundService.tickets,\n      );\n      cheapestFirst = this.getCheapestForReturn(\n        selectedOutboundService.tickets.filter(ticket => ticket.isFirst),\n        selectedInboundService.tickets.filter(ticket => ticket.isFirst),\n      );\n      cheapestFlexible = this.getCheapestForReturn(\n        selectedOutboundService.tickets.filter(ticket => ticket.isFlexible),\n        selectedInboundService.tickets.filter(ticket => ticket.isFlexible),\n      );\n\n      // Crappy logic to find best value - it vaguely works\n   \n      if (cheapest) {\n        const cheapestFirstStd = this.getCheapestForReturn(\n          selectedOutboundService.tickets.filter(ticket => ticket.isFirst),\n          selectedInboundService.tickets.filter(ticket => !ticket.isFirst),\n        );\n        const cheapestStdFirst = this.getCheapestForReturn(\n          selectedOutboundService.tickets.filter(ticket => !ticket.isFirst),\n          selectedInboundService.tickets.filter(ticket => ticket.isFirst),\n        );\n        let cheapestMixed;\n        if (cheapestFirstStd) {\n          if (cheapestStdFirst) {\n            cheapestMixed = cheapestFirstStd.price < cheapestStdFirst.price ? cheapestFirstStd : cheapestStdFirst;\n          } else {\n            cheapestMixed = cheapestFirstStd;\n          }\n        } else {\n          if (cheapestStdFirst) {\n            cheapestMixed = cheapestStdFirst;\n          }\n        }\n        if (cheapestFirst && cheapestFirst.price < cheapest.price * 1.15) {\n          bestValue = cheapestFirst;\n        } else if (cheapestMixed && cheapestMixed.price < cheapest.price * 1.15) {\n          bestValue = cheapestMixed;\n        }\n      }\n    } else {\n      cheapest = this.getCheapestForSingle(selectedOutboundService.tickets);\n      cheapestFirst = this.getCheapestForSingle(selectedOutboundService.tickets.filter(ticket => ticket.isFirst));\n      cheapestFlexible = this.getCheapestForSingle(selectedOutboundService.tickets.filter(ticket => ticket.isFlexible));\n    }\n\n    let highlights = [];\n\n    const idsAreSame = (dataA, dataB) => dataA && dataB && dataA.idOut === dataB.idOut && dataA.idIn === dataB.idIn;\n\n    if (cheapest) {\n      if (ticketType === 0) {\n        cheapest.title = 'Cheapest ticket';\n      } else {\n        cheapest.title = 'Cheapest return';\n      }\n      cheapest.isCheapest = true;\n      highlights.push(cheapest);\n    }\n\n    if (bestValue && !idsAreSame(bestValue, cheapest)) {\n      if (ticketType === 0) {\n        bestValue.title = 'Best value ticket';\n      } else {\n        bestValue.title = 'Best value return';\n      }\n      bestValue.isRecommended = true;\n      highlights.push(bestValue);\n    }\n\n    if (cheapestFirst && !idsAreSame(cheapestFirst, cheapest) && !idsAreSame(cheapestFirst, bestValue)) {\n      cheapestFirst.title = 'Cheapest First Class';\n      highlights.push(cheapestFirst);\n    }\n\n    if (cheapestFlexible && !idsAreSame(cheapestFlexible, cheapest) && !idsAreSame(cheapestFlexible, cheapestFirst) && !idsAreSame(cheapestFlexible, bestValue)) {\n      if (ticketType === 0) {\n        cheapestFlexible.title = 'Cheapest flexible ticket';\n      } else {\n        cheapestFlexible.title = 'Cheapest flexible return';\n      }\n      highlights.push(cheapestFlexible);\n    }\n\n    return {\n      highlights,\n      categories: [],\n    };\n  }\n\n  onHighlightClick(idOut, idIn) {\n    const { selectOutboundTicket, selectInboundTicket, changeScreen } = this.props;\n\n    selectOutboundTicket(idOut);\n    selectInboundTicket(idIn);\n    changeScreen(5);\n  }\n\n  onMixClick() {\n    const { changeScreen } = this.props;\n\n    changeScreen(10)\n  }\n\n  render() {\n    const { onConditionsClick, onPriceBreakdownClick } = this.props;\n    const { ticketType } = this.props;\n\n    const data = this.getTicketHighlightsData();\n\n    return (\n      <div className=\"Results-content\">\n        <HighlightScreen ticketType={ticketType} data={data} onHighlightClick={this.onHighlightClick} onMixClick={this.onMixClick} onPriceBreakdownClick={onPriceBreakdownClick} onConditionsClick={onConditionsClick} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreeTicketHighlights);\n","import React from 'react';\nimport TicketResultList from '../../../ui/TicketResultList';\nimport screen from '../../../data/screen';\nimport { connect } from 'react-redux';\nimport { changeSelectedOutboundTicket, changeScreen } from '../../../redux/actions';\nimport { getSelectedOutboundService } from '../../../utility/get';\n\nconst mapStateToProps = state => ({\n  ticketType: state.search.ticketType,\n  selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n});\n\nclass ResultsThreeTicketOutbound extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onTicketSelect = this.onTicketSelect.bind(this);\n  }\n\n  onTicketSelect(id) {\n    const { ticketType, selectedOutboundService } = this.props;\n    const { selectOutboundTicket, changeScreen } = this.props;\n\n    selectOutboundTicket(id);\n    if (ticketType !== 1 || selectedOutboundService.tickets.find(ticket => ticket.id === id).isReturn) {\n      changeScreen(screen.review);\n    } else {\n      changeScreen(screen.ticketInbound);\n    }\n  }\n\n  render() {\n    const { onPriceBreakdownClick, onConditionsClick } = this.props;\n    const { selectedOutboundService } = this.props;\n\n    const data = selectedOutboundService.tickets.map(ticket => (\n      {\n        id: ticket.id,\n        title: ticket.name,\n        price: ticket.price,\n        descriptionLines: [],\n        passengers: ticket.passengers,\n        isDiscounted: ticket.isDiscounted,\n      }\n    ));\n\n    return (\n      <div className=\"Results-content\">\n        <TicketResultList data={data} onClick={this.onTicketSelect} onPriceBreakdownClick={onPriceBreakdownClick} onConditionsClick={onConditionsClick} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreeTicketOutbound);\n","import React from 'react';\nimport TicketResultList from '../../../ui/TicketResultList';\nimport screen from '../../../data/screen';\nimport { connect } from 'react-redux';\nimport { changeSelectedOutboundTicket, changeSelectedInboundTicket, changeScreen } from '../../../redux/actions';\nimport { getSelectedInboundService } from '../../../utility/get';\n\nconst mapStateToProps = state => ({\n  selectedInboundService: getSelectedInboundService(state.results, state.selection),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n  selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n})\n\nclass ResultsThreeTicketInbound extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onTicketSelect = this.onTicketSelect.bind(this);\n  }\n\n  onTicketSelect(id) {\n    const { selectInboundTicket, changeScreen } = this.props;\n\n    selectInboundTicket(id);\n    changeScreen(screen.review);\n  }\n\n  render() {\n    const { onPriceBreakdownClick, onConditionsClick } = this.props;\n    const { selectedInboundService } = this.props;\n\n    const data = selectedInboundService.tickets.map(ticket => (\n      {\n        id: ticket.id,\n        title: ticket.name,\n        price: ticket.price,\n        descriptionLines: [],\n        passengers: ticket.passengers,\n        isDiscounted: ticket.isDiscounted,\n      }\n    ));\n\n    return (\n      <div className=\"Results-content\">\n        <TicketResultList data={data} onClick={this.onTicketSelect} onPriceBreakdownClick={onPriceBreakdownClick} onConditionsClick={onConditionsClick} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreeTicketInbound);\n","import React from 'react';\nimport { formatPrice } from '../../../utility/format';\nimport { connect } from 'react-redux';\nimport { getSelectedOutboundService, getSelectedInboundService } from '../../../utility/get';\n\nimport LargeChevron from '../../../data/icon/large-chevron';\n\nconst mapStateToProps = state => ({\n  ticketType: state.search.ticketType,\n  selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n  selectedInboundService: getSelectedInboundService(state.results, state.selection),\n});\n\nconst mapDispatchToProps = null;\n\nclass ResultsThreePriceBreakdown extends React.Component {\n  renderService(service, ticket) {\n    if (!service) {\n      return null;\n    }\n\n    return (\n      <div className=\"PriceBreakdown-service\">\n        <div className=\"PriceBreakdown-service-header\">\n          <div className=\"PriceBreakdown-service-header-left\">\n            <div className=\"PriceBreakdown-service-title\">\n              {service.station.origin} - {service.station.destination}\n            </div>\n            <div className=\"PriceBreakdown-service-subtitle\">\n              {service.time.departure.format('ddd DD MMM')}, {service.time.departure.format('HH:mm')}-{service.time.arrival.format('HH:mm')}\n            </div>\n          </div>\n          <div className=\"PriceBreakdown-service-header-right\">\n            <LargeChevron className=\"PriceBreakdown-chevron\" />\n          </div>\n        </div>\n        <div className=\"PriceBreakdown-service-ticketName\">\n          {ticket.name}\n        </div>\n        <div className=\"PriceBreakdown-service-row\">\n          <div className=\"PriceBreakdown-service-row-quantity\">\n            {service.passengers}x\n          </div>\n          <div className=\"PriceBreakdown-service-row-main\">\n            Passengers\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {ticket.isDiscounted ? formatPrice(ticket.price * 1.2) : formatPrice(ticket.price)}\n          </div>\n        </div>\n        {ticket.isDiscounted && <div className=\"PriceBreakdown-service-row discount\">\n          <div className=\"PriceBreakdown-service-row-main\">\n            Split ticket discount\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {formatPrice(ticket.price * -0.2)}\n          </div>\n        </div>}\n        <div className=\"PriceBreakdown-service-row total\">\n          <div className=\"PriceBreakdown-service-row-main\">\n            Total\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {formatPrice(ticket.price)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { priceBreakdownOutId, priceBreakdownInId } = this.props;\n    const { selectedOutboundService, selectedInboundService } = this.props;\n\n    return (\n      <div className=\"PriceBreakdown\">\n        <div className=\"PriceBreakdown-header\">\n          Price breakdown\n        </div>\n        {priceBreakdownOutId !== null ? this.renderService(selectedOutboundService, selectedOutboundService.tickets[priceBreakdownOutId]) : null}\n        {priceBreakdownInId !== null ? this.renderService(selectedInboundService, selectedInboundService.tickets[priceBreakdownInId]) : null}\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreePriceBreakdown);\n","import React from 'react';\nimport Header from '../../ui/Header';\nimport { connect } from 'react-redux';\nimport { changeScreen, changeSelectedInboundService, changeSelectedOutboundService, changeSelectedOutboundTicket, changeSelectedInboundTicket } from '../../redux/actions';\nimport { getSelectedOutboundService, getSelectedOutboundTicket, getSelectedInboundService, getSelectedInboundTicket } from '../../utility/get';\nimport screens from '../../data/screen';\n\nimport serviceInfoScreen from '../../data/serviceInfo.png';\nimport termsAndConditionsScreen from '../../data/termsAndConditions.png';\n\nimport './ResultsThree.css';\n\nimport ResultsThreeServiceOutbound from './ResultsThreeServiceOutbound';\nimport ResultsThreeServiceInbound from './ResultsThreeServiceInbound';\nimport ResultsThreeTicketHighlights from './ResultsThreeTicketHighlights';\nimport ResultsThreeTicketOutbound from './ResultsThreeTicketOutbound';\nimport ResultsThreeTicketInbound from './ResultsThreeTicketInbound';\nimport ResultsThreePriceBreakdown from './ResultsThreePriceBreakdown';\n\nconst getCheapestTicketPrice = tickets => {\n  const cheapest = Math.min(...tickets.map(ticket => ticket.price));\n  return cheapest === Infinity ? null : cheapest;\n};\n\nconst addDataToServices = services => {\n  services.forEach(service => {\n    if (service.tickets.length > 0) {\n      service.price = {\n        standard: getCheapestTicketPrice(service.tickets.filter(ticket => !ticket.isFirst)),\n        first: getCheapestTicketPrice(service.tickets.filter(ticket => ticket.isFirst)),\n      };\n    } else {\n      service.price = {\n        standard: null,\n        first: null,\n      };\n      service.note = 'No tickets available';\n    }\n    service.time.duration = service.time.arrival.diff(service.time.departure, 'minutes');\n  });\n}\n\nconst addQualifiers = services => {\n  const cheapestServicePrice = Math.min(...services.map(service => Math.min(service.price.standard, service.price.first)));\n  const fastestServiceTime = Math.min(...services.map(service => service.time.duration));\n  \n  services.forEach(service => {\n    service.isCheapest = service.price.standard === cheapestServicePrice || service.price.first === cheapestServicePrice;\n    service.isFastest = service.time.duration === fastestServiceTime;\n  });\n}\n\nconst mapStateToProps = state => {\n  const { search, results } = state;\n  const { outbound, inbound } = results;\n\n  const passengers = parseInt(search.adults) + parseInt(search.children);\n\n  if (outbound) {\n    addDataToServices(outbound);\n    addQualifiers(outbound);\n\n    outbound.forEach(service => {\n      service.passengers = passengers;\n      service.tickets.forEach(ticket => ticket.passengers = passengers);\n    });\n  }\n\n  if (inbound) {\n    addDataToServices(inbound);\n    addQualifiers(inbound);\n\n    inbound.forEach(service => {\n      service.passengers = passengers;\n      service.tickets.forEach(ticket => ticket.passengers = passengers);\n    });\n  }\n\n  return {\n    results: state.results,\n    servicesOutbound: outbound,\n    servicesInbound: inbound,\n    passengers: search.adults + search.children,\n    selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n    selectedOutboundTicket: getSelectedOutboundTicket(state.results, state.selection),\n    selectedInboundService: getSelectedInboundService(state.results, state.selection),\n    selectedInboundTicket: getSelectedInboundTicket(state.results, state.selection),\n    search: state.search,\n    screen: state.screen,\n    selection: state.selection,\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundService: id => dispatch(changeSelectedOutboundService(id)),\n  selectInboundService: id => dispatch(changeSelectedInboundService(id)),\n  selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n  selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n})\n\nclass ResultsThree extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      serviceInfo: false,\n      termsAndConditions: false,\n      priceBreakdownOpen: false,\n      priceBreakdownOutId: null,\n      priceBreakdownInId: null,\n    };\n\n    this.onServiceInfoClick = this.onServiceInfoClick.bind(this);\n    this.onConditionsClick = this.onConditionsClick.bind(this);\n    this.onPriceBreakdownClickHighlights = this.onPriceBreakdownClickHighlights.bind(this);\n    this.onPriceBreakdownClickOutbound = this.onPriceBreakdownClickOutbound.bind(this);\n    this.onPriceBreakdownClickInbound = this.onPriceBreakdownClickInbound.bind(this);\n  }\n\n  getHeader() { \n    const { search, screen } = this.props;\n\n    let title;\n    let subtitle;\n    let hasSubheader = false;\n\n    if (screen === screens.serviceOutbound) {\n      title = 'Outbound';\n      subtitle = search.outbound.time.format('ddd DD MMM');\n      hasSubheader = true;\n    } else if (screen === screens.serviceInbound) {\n      title = 'Return';\n      subtitle = search.inbound.time.format('ddd DD MMM');\n      hasSubheader = true;\n    } else if (screen === screens.ticketHighlights) {\n      title = 'Choose tickets';\n    } else if (screen === screens.ticketOutbound) {\n      title = 'Choose outbound ticket';\n      subtitle = search.outbound.time.format('ddd DD MMM');\n    } else if (screen === screens.ticketInbound) {\n      title = 'Choose return ticket';\n      subtitle = search.inbound.time.format('ddd DD MMM');\n    }\n\n    const data = {\n      title,\n      subtitle,\n      hasSubheader,\n      adults: search.adults,\n      children: search.children,\n      railcards: 0,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToPreviousScreen()} />\n    );\n  }\n\n  getPreviousScreenId() {\n    const { screen, search } = this.props;\n\n    switch (screen) {\n      case screens.serviceOutbound:\n        return screens.search;\n      case screens.serviceInbound:\n        return screens.serviceOutbound;\n      case screens.ticketHighlights:\n        if (search.ticketType === 1) {\n          return screens.serviceInbound;\n        } else {\n          return screens.serviceOutbound;\n        }\n      case screens.ticketOutbound:\n        return screens.ticketHighlights;\n      case screens.ticketInbound:\n        return screens.ticketOutbound;\n      default:\n        return screen - 1;\n    }\n  }\n\n  goToPreviousScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getPreviousScreenId());\n  }\n\n  onScreenChange(id) {\n    const { selectOutboundService, selectInboundService, selectOutboundTicket, selectInboundTicket } = this.props;\n\n    switch (id) {\n      case screens.serviceOutbound:\n        selectOutboundService(null);\n        return;\n      case screens.serviceInbound:\n        selectInboundService(null);\n        return;\n      case screens.ticketHighlights:\n        selectInboundTicket(null);\n        selectOutboundTicket(null);\n        return;\n      case screens.ticketOutbound:\n        selectOutboundTicket(null);\n        selectInboundTicket(null);\n        return;\n      case screens.ticketInbound:\n        selectInboundTicket(null);\n        return;\n      default:\n        return;\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { screen } = this.props;\n\n    // Check did change screen\n    if (prevProps.screen === screen) return;\n\n    this.onScreenChange(screen);\n  }\n\n  onPriceBreakdownClickHighlights(idOut, idIn) {\n    this.setState({\n      priceBreakdownOpen: true,\n      priceBreakdownOutId: idOut,\n      priceBreakdownInId: idIn,\n    });\n  }\n\n  onPriceBreakdownClickOutbound(id) {\n    this.setState({\n      priceBreakdownOpen: true,\n      priceBreakdownOutId: id,\n      priceBreakdownInId: null,\n    });\n  }\n\n  onPriceBreakdownClickInbound(id) {\n    const { selectedOutboundTicket } = this.props;\n\n    this.setState({\n      priceBreakdownOpen: true,\n      priceBreakdownOutId: selectedOutboundTicket.id,\n      priceBreakdownInId: id,\n    });\n  }\n\n  onConditionsClick() {\n    this.setState({\n      termsAndConditions: true,\n    });\n  }\n\n  onServiceInfoClick() {\n    this.setState({\n      serviceInfo: true\n    });\n  }\n\n  getContent() {\n    const { screen, servicesOutbound, servicesInbound } = this.props;\n\n    switch (screen) {\n      case screens.serviceOutbound:\n        return <ResultsThreeServiceOutbound servicesOutbound={servicesOutbound} servicesInbound={servicesInbound} onServiceInfoClick={this.onServiceInfoClick} />;\n      case screens.serviceInbound:\n        return <ResultsThreeServiceInbound servicesOutbound={servicesOutbound} servicesInbound={servicesInbound} onServiceInfoClick={this.onServiceInfoClick} />;\n      case screens.ticketHighlights:\n        return <ResultsThreeTicketHighlights onPriceBreakdownClick={this.onPriceBreakdownClickHighlights} onConditionsClick={this.onConditionsClick} />;\n      case screens.ticketOutbound:\n        return <ResultsThreeTicketOutbound onPriceBreakdownClick={this.onPriceBreakdownClickOutbound} onConditionsClick={this.onConditionsClick} />;\n      case screens.ticketInbound:\n        return <ResultsThreeTicketInbound onPriceBreakdownClick={this.onPriceBreakdownClickInbound} onConditionsClick={this.onConditionsClick} />\n      default:\n        return 'Oh no';\n    }\n  }\n\n  render() {\n    const { serviceInfo, termsAndConditions, priceBreakdownOpen, priceBreakdownOutId, priceBreakdownInId } = this.state;\n\n    return (\n      <React.Fragment>\n        <div className=\"Results\">\n          <div className={`${serviceInfo ? '' : 'hidden'}`}>\n            <Header data={{ title: 'Service information' }} onBackClick={() => this.setState({ serviceInfo: false })} />\n            <img src={serviceInfoScreen} className=\"Results-fakeContent\" />\n          </div>\n          <div className={`${termsAndConditions ? '' : 'hidden'}`}>\n            <Header data={{ title: 'Terms and conditions' }} onBackClick={() => this.setState({ termsAndConditions: false })} />\n            <img src={termsAndConditionsScreen} className=\"Results-fakeContent\" />\n          </div>\n          <div className={`${termsAndConditions || serviceInfo ? 'hidden' : ''}`}>\n            {this.getHeader()}\n            {this.getContent()}\n          </div>\n        </div>\n        {priceBreakdownOpen && <div className=\"Results-modal\" onClick={() => this.setState({ priceBreakdownOpen: false, priceBreakdownInId: null, priceBreakdownOutId: null })}>\n          <ResultsThreePriceBreakdown priceBreakdownOutId={priceBreakdownOutId} priceBreakdownInId={priceBreakdownInId} />\n        </div>}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThree);\n","import React from 'react';\nimport ticketTypes from '../data/ticketTypes';\nimport { getTicketTypeIcon } from '../utility/get';\n\nimport './TicketTypePicker.css';\n\nexport default class TicketTypePicker extends React.Component {\n  render() {\n    const { selected, onSelect } = this.props;\n\n    return (\n      <div className=\"TicketTypePicker\">\n        {ticketTypes.map(ticketType => (\n          <div className={`TicketTypePicker-section ${ticketType.id === selected ? 'selected' : ''}`} key={ticketType.id} onClick={() => onSelect(ticketType.id)}>\n            {getTicketTypeIcon(ticketType.id, 'TicketTypePicker-section-icon')}\n            <div className=\"TicketTypePicker-section-label\">\n              {ticketType.name}\n            </div>\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { Form } from 'semantic-ui-react';\nimport stations from '../data/stations';\n\nimport './StationPicker.css';\n\nconst options = stations\n  .filter(station => station.name && station.crs)\n  .filter(station => station.name.toLowerCase().includes('london') || station.name.toLowerCase().includes('cambridge') || station.name.toLowerCase().includes('edinburgh') || station.name.toLowerCase().includes('peterborough') || station.name === 'Leeds' || station.name === 'Harrogate' || station.name === 'York')\n  .map(station => {\n    if (station.id === 2317) {\n      // Edinburgh Waverley\n      // Sadly can't use aliases (e.g. London King's Cross King's Cross)\n      return {\n        ...station,\n        name: 'Edinburgh Waverley',\n      };\n    }\n    return station;\n  })\n  .map(station => ({\n    key: station.id,\n    value: station.id,\n    text: `${station.name} (${station.crs})`,\n    name: station.name,\n    crs: station.crs,\n  }))\n  .sort((a, b) => a.name < b.name ? -1 : (a.name > b.name ? 1 : 0));\n\nconst stationSearchFunction = (options, term) => {\n  return options.filter(option => {\n    const termLower = term.toLowerCase();\n    return option.name.toLowerCase().includes(termLower) || option.crs.toLowerCase().startsWith(termLower);\n  });\n};\n\nexport default class StationPicker extends React.Component {\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  render() {    \n    const { selected, onChange } = this.props;\n\n    return (\n      <Form.Dropdown className=\"StationPicker\" placeholder='Select a station' defaultValue={selected} search={stationSearchFunction} selection options={options} onChange={onChange} />\n    );\n  }\n}\n","import React from 'react';\nimport moment from 'moment';\n\nimport './JourneyTimePicker.css';\n\nconst beforeOrAfterOptions = [\n  {\n    key: 0,\n    value: 'after',\n    text: 'Depart after',\n  },\n  {\n    key: 1,\n    value: 'before',\n    text: 'Arrive before',\n  },\n];\n\nconst calculateFormValues = input => {\n  const after = input.after;\n\n  const timeMoment = moment(input.time);\n\n  return {\n    after: after ? 'after' : 'before',\n    date: timeMoment.format('YYYY-MM-DD'),\n    time: timeMoment.format('HH:mm'),\n  };\n}\n\nconst calculateState = formValues => {\n  const newstate = {\n    after: formValues.after === 'after',\n    time: moment(`${formValues.date} ${formValues.time}`),\n  };\n  return newstate;\n}\n\nexport default class JourneyTimePicker extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.formValues = calculateFormValues(props.selected);\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleAfterChange = this.handleAfterChange.bind(this);\n    this.handleDateChange = this.handleDateChange.bind(this);\n    this.handleTimeChange = this.handleTimeChange.bind(this);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { selected } = nextProps;\n    this.formValues = calculateFormValues(selected);\n  }\n\n  handleChange(newFormValues) {\n    const { onChange } = this.props;\n\n    onChange(calculateState(newFormValues));\n  }\n\n  handleAfterChange(e) {\n    this.handleChange({ ...this.formValues, after: e.target.value });\n  }\n\n  handleDateChange(e) {\n    this.handleChange({ ...this.formValues, date: e.target.value });\n  }\n\n  handleTimeChange(e) {\n    this.handleChange({\n      ...this.formValues,\n      time: e.target.value,\n    });\n  }\n\n  render() {    \n    return (\n      <div className=\"JourneyTimePicker\">\n        <select value={this.formValues.after} className=\"JourneyTimePicker-after\" onChange={this.handleAfterChange}>\n          {beforeOrAfterOptions.map(option => (\n            <option value={option.value} key={option.key}>{option.text}</option>\n          ))}\n        </select> \n        <input className=\"JourneyTimePicker-day\" type=\"date\" value={this.formValues.date} onChange={this.handleDateChange} />\n        <input className=\"JourneyTimePicker-time\" type=\"time\" value={this.formValues.time} onChange={this.handleTimeChange} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport './PassengerPicker.css';\n\nexport default class PassengerPicker extends React.Component {\n  render() {    \n    const { selected, maxOption, onChange } = this.props;\n\n    const passengerDropdownOptions = [...Array(maxOption+1).keys()]\n      .map(n => ({\n        key: n,\n        value: n,\n        text: n.toString(),\n      }));\n    \n    return (\n      <select className=\"PassengerPicker\" value={selected} onChange={e => onChange(e.target.value)}>\n        {passengerDropdownOptions.map(option => (\n          <option key={option.key} value={option.value}>\n            {option.text}\n          </option>\n        ))}\n      </select>\n    );\n  }\n}\n","import React from 'react';\n\nimport './Button.css';\n\nexport default class Button extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick(e) {\n    const { onClick, loading, disabled } = this.props;\n\n    if (!loading && !disabled ) {\n      onClick(e)\n    }\n  }\n\n  render() {\n    const { text, loading, disabled } = this.props;\n\n    return (\n      <button className={`Button ${disabled ? 'disabled' : ''}`} onClick={this.handleClick}>\n        {loading ? 'Loading...' : text}\n      </button>\n    )\n  }\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport Header from '../ui/Header';\nimport TicketTypePicker from '../pickers/TicketTypePicker';\nimport StationPicker from '../pickers/StationPicker';\nimport JourneyTimePicker from '../pickers/JourneyTimePicker';\nimport { changeSearchData, executeSearch } from '../redux/actions';\nimport PassengerPicker from '../pickers/PassengerPicker';\nimport Button from '../ui/Button';\n\nimport './Search.css';\n\nconst mapStateToProps = state => {\n  return {\n    from: state.search.from,\n    to: state.search.to,\n    ticketType: state.search.ticketType,\n    outbound: state.search.outbound,\n    inbound: state.search.inbound,\n    searching: state.search.searching,\n    adults: state.search.adults,\n    children: state.search.children,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeSearchData: change => dispatch(changeSearchData(change)),\n    executeSearch: () => dispatch(executeSearch()),\n  };\n}\n\nclass Search extends React.Component {\n  canSearch() {\n    const { to, from, ticketType, outbound, inbound } = this.props;\n\n    return to && from && outbound.time && (ticketType !== 1 || inbound.time);\n  }\n\n  render() {\n    const { changeSearchData, executeSearch } = this.props;\n    const { from, to, ticketType, outbound, inbound, searching, adults, children } = this.props;\n\n    return (\n      <div className=\"Search\">\n        <Header noBack data={{ title: 'Plan & buy tickets' }} />\n        <div className=\"Search-content\">\n          <div className=\"Search-stations\">\n            <StationPicker selected={from} onChange={(e, { value }) => changeSearchData({ from: value })} />\n            <StationPicker selected={to} onChange={(e, { value }) => changeSearchData({ to: value })} />\n          </div>\n          <div className=\"Search-ticketType\">\n            <TicketTypePicker selected={ticketType} onSelect={id => changeSearchData({ ticketType: id })} />\n          </div>\n          <div className=\"Search-datetime\">\n            <h3>Outbound</h3>\n            <JourneyTimePicker selected={outbound} onChange={value => changeSearchData({ outbound: value })} />\n          </div>\n          {ticketType === 1 && <div className=\"Search-datetime\">\n            <h3>Return</h3>\n            <JourneyTimePicker selected={inbound} onChange={value => changeSearchData({ inbound: value })} />\n          </div>}\n          <div className=\"Search-passengers\">\n            <h3>Passengers</h3>\n            <label>Adults</label>\n            <PassengerPicker selected={adults} maxOption={8 - children} onChange={value => changeSearchData({ adults: value })} />\n            <label>Children</label>\n            <PassengerPicker selected={children} maxOption={8 - adults} onChange={value => changeSearchData({ children: value })} />\n          </div>\n          <Button primary disabled={!this.canSearch()} loading={searching} onClick={executeSearch} text=\"Search for trains\" />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Search);","import React from 'react';\nimport Header from '../ui/Header';\nimport { changeScreen, changeSelectedInboundTicket } from '../redux/actions';\nimport reviewFooter from '../data/review-footer.png';\nimport reviewScreen from '../data/review.png';\n\nimport './Review.css';\nimport { getChangesString, getDurationString, getSelectedOutboundTicket, getSelectedOutboundService, getSelectedInboundService, getSelectedInboundTicket } from '../utility/get';\nimport Block from '../ui/Block';\nimport { connect } from 'react-redux';\n\nconst mapStateToProps = state => {\n  const { results, selection, search } = state;\n\n  const outboundService = getSelectedOutboundService(results, selection);\n  const outboundTicket = getSelectedOutboundTicket(results, selection);\n  const inboundService = getSelectedInboundService(results, selection);\n  const inboundTicket = getSelectedInboundTicket(results, selection);\n\n  return {\n    results,\n    search,\n    selection,\n    outboundService,\n    outboundTicket,\n    inboundService,\n    inboundTicket,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeScreen: id => dispatch(changeScreen(id)),\n    selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n  };\n};\n\nclass Review extends React.Component {\n  getPreviousScreenId() {\n    const { results, selection } = this.props;\n\n    const hasSelectedReturn = getSelectedOutboundTicket(results, selection).isReturn;\n\n    return (!hasSelectedReturn && results.inbound) ? 4 : 2;\n  }\n\n  goToPreviousScreen() {\n    const { changeScreen, selectInboundTicket } = this.props;\n\n    selectInboundTicket(null);\n    changeScreen(this.getPreviousScreenId());\n  }\n\n  getNextScreenId() {\n    return 6;\n  }\n\n  goToNextScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getNextScreenId());\n  }\n\n  presentService(service, ticket) {\n    if (!service || !ticket) {\n      return null;\n    }\n\n    return (\n      <Block className=\"Review-service\">\n        <div className=\"Review-service-name\">\n          {service.station.origin} > {service.station.destination}\n        </div>\n        <div className=\"Review-service-date\">\n          {service.time.departure.format('ddd D MMM')}\n        </div>\n        <div className=\"Review-service-time\">\n          {service.time.departure.format('HH:mm')} > {service.time.arrival.format('HH:mm')}\n        </div>\n        <div className=\"Review-service-meta\">\n          {getDurationString(service.time.departure, service.time.arrival)}, {getChangesString(service.changes)}\n        </div>\n        <div className=\"Review-service-tickets\">\n          <div className=\"Review-service-tickets-label\">\n            Tickets\n          </div>\n          <div className=\"Review-service-tickets-name\">\n            {ticket.name}\n          </div>\n        </div>\n        <div className=\"Review-actions\">\n          <div className=\"Review-action\">\n            Journey info\n          </div>\n          <div className=\"Review-action\">\n            Ticket conditions\n          </div>\n        </div>\n      </Block>\n    );\n  }\n\n  presentSeatGroup(service) {\n    if (!service) {\n      return null;\n    }\n\n    return (\n      <div className=\"Review-seats-group\">\n        <div className=\"Review-seats-group-name\">\n          {service.station.origin} > {service.station.destination}\n        </div>\n        <div className=\"Review-seats-group-item\">\n          Coach B, Seat 52\n        </div>\n        <div className=\"Review-seats-group-item\">\n          Coach B, Seat 53\n        </div>\n      </div>\n    );\n  }\n\n  getHeader() { \n    const { search } = this.props;\n\n    const data = {\n      station: {\n        origin: search.from,\n        destination: search.to,\n      },\n      ticketType: search.ticketType,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToPreviousScreen()} />\n    );\n  }\n\n  render() {\n    const { outboundService, outboundTicket, inboundService, inboundTicket } = this.props;\n\n    return (\n      <div className=\"Review\">\n        {this.getHeader()}\n        <div className=\"Review-title\">\n          Review your selection\n        </div>\n        <div className=\"Review-services\">\n          {this.presentService(outboundService, outboundTicket)}\n          {this.presentService(inboundService, inboundTicket)}\n        </div>\n        <img src={reviewScreen} className=\"Review-fakeContent\" />\n        <img src={reviewFooter} className=\"Review-fakeContent\" onClick={() => this.goToNextScreen()} />\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Review);","import React from 'react';\nimport Header from '../ui/Header';\nimport { changeScreen, changeSelectedOutboundTicket, changeSelectedInboundTicket } from '../redux/actions';\nimport reviewFooter from '../data/review-footer.png';\nimport reviewScreen from '../data/review.png';\n\nimport './ReviewThree.css';\nimport { getChangesString, getDurationString, getSelectedOutboundTicket, getSelectedOutboundService, getSelectedInboundService, getSelectedInboundTicket } from '../utility/get';\nimport Block from '../ui/Block';\nimport { connect } from 'react-redux';\n\nconst mapStateToProps = state => {\n  const { results, selection, search } = state;\n\n  const outboundService = getSelectedOutboundService(results, selection);\n  const outboundTicket = getSelectedOutboundTicket(results, selection);\n  const inboundService = getSelectedInboundService(results, selection);\n  const inboundTicket = getSelectedInboundTicket(results, selection);\n\n  return {\n    results,\n    search,\n    selection,\n    outboundService,\n    outboundTicket,\n    inboundService,\n    inboundTicket,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeScreen: id => dispatch(changeScreen(id)),\n    selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n    selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n  };\n};\n\nclass ReviewThree extends React.Component {\n  goToPreviousScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(3);\n  }\n\n  goToNextScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(6);\n  }\n\n  presentService(service, ticket) {\n    if (!service || !ticket) {\n      return null;\n    }\n\n    return (\n      <Block className=\"ReviewThree-service\">\n        <div className=\"ReviewThree-service-name\">\n          {service.station.origin} - {service.station.destination}\n        </div>\n        <div className=\"ReviewThree-service-date\">\n          {service.time.departure.format('ddd D MMM')}\n        </div>\n        <div className=\"ReviewThree-service-time\">\n          {service.time.departure.format('HH:mm')} > {service.time.arrival.format('HH:mm')}\n        </div>\n        <div className=\"ReviewThree-service-meta\">\n          {getDurationString(service.time.departure, service.time.arrival)}, {getChangesString(service.changes)}\n        </div>\n        <div className=\"ReviewThree-service-tickets\">\n          <div className=\"ReviewThree-service-tickets-label\">\n            Tickets\n          </div>\n          <div className=\"ReviewThree-service-tickets-name\">\n            {ticket.name}\n          </div>\n        </div>\n        <div className=\"ReviewThree-actions\">\n          <div className=\"ReviewThree-action\">\n            Journey info\n          </div>\n          <div className=\"ReviewThree-action\">\n            Ticket conditions\n          </div>\n        </div>\n      </Block>\n    );\n  }\n\n  presentSeatGroupRowItem(title, value, index) {\n    return (\n      <div key={index} className=\"ReviewThree-seats-group-row-item\">\n        <div className=\"ReviewThree-seats-group-row-item-title\">\n          {title}\n        </div>\n        <div className=\"ReviewThree-seats-group-row-item-value\">\n          {value}\n        </div>\n      </div>\n    );\n  }\n\n  presentSeatGroup(service) {\n    if (!service) {\n      return null;\n    }\n\n    const coaches = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];\n    const seats = [...new Array(64).keys()].map(seat => seat + 1);\n\n    return (\n      <React.Fragment>\n        {service.legs.map((leg, legIndex) => {\n          const selectedCoach = coaches[Math.floor(Math.random() * coaches.length)];\n          const selectedSeats = [...new Array(service.passengers).keys()].map(() => seats[Math.floor(Math.random() * seats.length)]).sort();\n          const isLner = leg.toc === 'GR';\n\n          return (\n            <Block key={legIndex} className=\"ReviewThree-seats-group\">\n              <div className=\"ReviewThree-seats-group-name\">\n                {leg.origin} - {leg.destination}\n              </div>\n              <div className=\"ReviewThree-seats-group-row\">\n                {this.presentSeatGroupRowItem('Coach', selectedCoach)}\n                {selectedSeats.map((seat, seatIndex) => this.presentSeatGroupRowItem('Seat', seat, seatIndex))}\n                {isLner && <div className=\"ReviewThree-seats-group-row-action\">\n                  Change seats\n                </div>}\n              </div>\n              {!isLner && <div className=\"ReviewThree-seats-group-note\">\n                Non-LNER service: to change seats call 01811 0855\n              </div>}\n            </Block>\n          );\n        })}\n      </React.Fragment>\n    );\n  }\n\n  getHeader() { \n    const { search } = this.props;\n\n    const data = {\n      station: {\n        origin: search.from,\n        destination: search.to,\n      },\n      ticketType: search.ticketType,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToPreviousScreen()} />\n    );\n  }\n\n  render() {\n    const { outboundService, outboundTicket, inboundService, inboundTicket } = this.props;\n\n    return (\n      <div className=\"Review\">\n        {this.getHeader()}\n        <div className=\"ReviewThree-title\">\n          Review your selection\n        </div>\n        <div className=\"ReviewThree-services\">\n          {this.presentService(outboundService, outboundTicket)}\n          {this.presentService(inboundService, inboundTicket)}\n        </div>\n        <div className=\"ReviewThree-title\">\n          Seat reservations\n        </div>\n        <div className=\"ReviewThree-seats\">\n          {this.presentSeatGroup(outboundService)}\n          {this.presentSeatGroup(inboundService)}\n        </div>\n        <img src={reviewScreen} className=\"ReviewThree-fakeContent\" />\n        <img src={reviewFooter} className=\"ReviewThree-fakeContent\" onClick={() => this.goToNextScreen()} />\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ReviewThree);","import React from 'react';\nimport { connect } from 'react-redux';\nimport Header from '../ui/Header';\nimport Button from '../ui/Button';\nimport { changeScreen } from '../redux/actions';\nimport paymentScreen from '../data/payment.png';\n\nimport './Payment.css';\n\nconst mapStateToProps = state => {\n  const { search } = state;\n\n  return {\n    search,\n  };\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeScreen: id => dispatch(changeScreen(id)),\n  };\n};\n\nclass Payment extends React.Component {\n  getPreviousScreenId() {\n    return 5;\n  }\n\n  goToPreviousScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getPreviousScreenId());\n  }\n\n  getNextScreenId() {\n    return 7;\n  }\n\n  goToNextScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getNextScreenId());\n  }\n\n  getHeader() { \n    const { search } = this.props;\n\n    const data = {\n      station: {\n        origin: search.from,\n        destination: search.to,\n      },\n      ticketType: search.ticketType,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToPreviousScreen()} />\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"Payment\">\n        {this.getHeader()}\n        <img src={paymentScreen} className=\"Payment-fakeContent\" />\n        <Button text=\"Pay\" onClick={() => this.goToNextScreen()} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Payment);","import oneABReview from '../data/userCaseScreens/1ab-review.png';\nimport oneABConfirmation from '../data/userCaseScreens/1ab-confirmation.png';\nimport oneCReview from '../data/userCaseScreens/1c-review.png';\nimport oneCConfirmation from '../data/userCaseScreens/1c-confirmation.png';\nimport oneEReview from '../data/userCaseScreens/1e-review.png';\nimport oneEConfirmation from '../data/userCaseScreens/1e-confirmation.png';\nimport twoAReview from '../data/userCaseScreens/2a-review.png';\nimport twoAConfirmation from '../data/userCaseScreens/2a-confirmation.png';\nimport twoBReview from '../data/userCaseScreens/2b-review.png';\nimport twoBConfirmation from '../data/userCaseScreens/2b-confirmation.png';\nimport twoBTwoReview from '../data/userCaseScreens/2b2-review.png';\nimport twoBTwoConfirmation from '../data/userCaseScreens/2b2-confirmation.png';\nimport threeABReview from '../data/userCaseScreens/3ab-review.png';\nimport threeABConfirmation from '../data/userCaseScreens/3ab-confirmation.png';\n\nconst userCases = [\n  {\n    id: '1A/B',\n    name: 'Business user going to a conference / PA/Admin - group booking',\n    review: oneABReview,\n    confirmation: oneABConfirmation,\n  },\n  {\n    id: '1C',\n    name: 'User has family emergency',\n    review: oneCReview,\n    confirmation: oneCConfirmation,\n  },\n  {\n    id: '1E',\n    name: 'Student visits family during break',\n    review: oneEReview,\n    confirmation: oneEConfirmation,\n  },\n  {\n    id: '2A',\n    name: 'Business user - meeting',\n    review: twoAReview,\n    confirmation: twoAConfirmation,\n  },\n  {\n    id: '2B',\n    name: 'Student goes to a \\'festival`\\'',\n    review: twoBReview,\n    confirmation: twoBConfirmation,\n  },\n  {\n    id: '2B.2',\n    name: 'User goes for a city break',\n    review: twoBTwoReview,\n    confirmation: twoBTwoConfirmation,\n  },\n  {\n    id: '3A/B',\n    name: 'PA/Admin users - mix booking / Business user - meeting',\n    review: threeABReview,\n    confirmation: threeABConfirmation,\n  },\n]\n\nexport default userCases;","import React from 'react';\nimport { connect } from 'react-redux';\nimport Header from '../ui/Header';\nimport { changeScreen } from '../redux/actions';\nimport userCases from '../data/userCases';\nimport confirmationScreen from '../data/confirmation.png';\n\nimport './Confirmation.css';\n\nconst mapStateToProps = state => {\n  return {\n    usercase: userCases.find(uc => uc.id === state.usercase),\n    results: state.results,\n    selection: state.selection,\n    search: state.search,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeScreen: id => dispatch(changeScreen(id)),\n  };\n};\n\nclass Confirmation extends React.Component {\n  goToFirstScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(0);\n  }\n\n  getHeader() { \n    const { search } = this.props;\n\n    const data = {\n      station: {\n        origin: search.from,\n        destination: search.to,\n      },\n      ticketType: search.ticketType,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToFirstScreen()} />\n    );\n  }\n\n  render() {\n    const { usercase } = this.props;\n    \n    return (\n      <div className=\"Confirmation\">\n        {this.getHeader()}\n        <img src={confirmationScreen} className=\"Confirmation-fakeContent\" />\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Confirmation);","import React from 'react';\nimport Header from '../ui/Header';\nimport userCases from '../data/userCases';\nimport { changeUserCase, changeScreen } from '../redux/actions';\nimport { connect } from 'react-redux';\n\nimport './Menu.css';\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeUserCase: id => dispatch(changeUserCase(id)),\n    changeScreen: id => dispatch(changeScreen(id)),\n  };\n};\n\nclass Menu extends React.Component {\n  selectUserCase(id) {\n    const { changeUserCase, changeScreen } = this.props;\n    \n    changeUserCase(id);\n    changeScreen(0);\n  }\n\n  render() {\n    return (\n      <div className=\"Menu\">\n        <Header noBack data={{ title: 'Journey menu' }} />\n        <div className = \"Menu-list\">\n          {userCases.map((userCase, userCaseIndex) => {\n            return (\n              <div key={userCaseIndex} className=\"Menu-list-item\" onClick={() => this.selectUserCase(userCase.id)}>\n                <div className=\"Menu-list-item-id\">\n                  {userCase.id}\n                </div>\n                <div className=\"Menu-list-item-name\">\n                  {userCase.name}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  null,\n  mapDispatchToProps,\n)(Menu);","\nimport React from 'react';\n\nconst icon = ({ className }) => (\n  <svg className={className}viewBox=\"0 0 50 50\">\n    <path d=\"M45.861,13.296c-0.947-1.685-3.08-2.284-4.767-1.335c-1.685,0.947-2.282,3.081-1.335,4.766  c1.411,2.51,2.157,5.371,2.157,8.273c0,9.328-7.589,16.917-16.917,16.917S8.083,34.328,8.083,25S15.672,8.083,25,8.083  c2.053,0,4.058,0.363,5.96,1.079c1.812,0.681,3.828-0.235,4.508-2.043c0.681-1.809-0.233-3.828-2.043-4.508  C30.732,1.597,27.897,1.083,25,1.083C11.812,1.083,1.083,11.812,1.083,25c0,13.188,10.729,23.917,23.917,23.917  c13.188,0,23.917-10.729,23.917-23.917C48.917,20.898,47.86,16.851,45.861,13.296z\" />\n  </svg>\n);\n\nexport default icon;\n","import React from 'react';\nimport Results from './screens/Results';\nimport ResultsThree from './screens/ResultsThree';\nimport Search from './screens/Search';\nimport Review from './screens/Review';\nimport ReviewThree from './screens/ReviewThree';\nimport Payment from './screens/Payment';\nimport Confirmation from './screens/Confirmation';\nimport Menu from './screens/Menu';\n\nimport Spinner from './data/icon/spinner';\n\nimport './App.css';\nimport { connect } from 'react-redux';\n\nconst mapStateToProps = state => {\n  return {\n    search: state.search,\n    screen: state.screen,\n    loading: state.loading,\n  };\n}\n\nclass App extends React.Component {\n  getScreen() {\n    const { screen } = this.props;\n\n    const useThreeScreen = true;\n\n    switch (screen) {\n      case 0:\n        return <Search />;\n      case 1:\n      case 2:\n      case 3:\n      case 4:\n      case 10:\n      case 11:\n        if (useThreeScreen) {\n          return <ResultsThree />;\n        } else {\n          return <Results />;\n        }\n      case 5:\n        if (useThreeScreen) {\n          return <ReviewThree />;\n        } else {\n          return <Review />;\n        }\n      case 6:\n        return <Payment />;\n      case 7:\n        return <Confirmation />;\n      case 100:\n        return <Menu />;\n      default:\n        return <div>oh no</div>;\n    };\n  }\n\n  render() {\n    const { search, loading } = this.props;\n\n    const displaySpinner = search.searching || loading;\n\n    return (\n      <div className=\"App\">\n        <div id=\"App-mobileFrame\">\n          {displaySpinner && <div className=\"App-loading\">\n            <Spinner className=\"App-loading-spinner\" />\n          </div>}\n          {this.getScreen()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  null\n)(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { CHANGE_SCREEN } from '../actionTypes';\n\nconst initialState = 0;\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CHANGE_SCREEN: {\n      return action.id;\n    }\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","import { CHANGE_SEARCH_DATA } from '../actionTypes';\nimport moment from 'moment';\n\n// qq Move this to update when we go to the search form\n\nconst nextTime = moment().add(20, 'minutes');\n    \n// Round up to nearest 5 minutes\nconst remainder = 5 - (nextTime.minutes() % 5);\nnextTime.add(remainder, 'minutes').startOf('minute');\n\nconst initialState = {\n  searching: false,\n  from: 3457,\n  to: 6069,\n  ticketType: 0,\n  outbound: {\n    time: nextTime,\n    after: true,\n  },\n  inbound: {\n    time: nextTime.clone().add(1, 'day'),\n    after: true,\n  },\n  adults: 1,\n  children: 0,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CHANGE_SEARCH_DATA: {\n      return {\n        ...state,\n        ...action.data,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","import { CHANGE_SELECTED_OUTBOUND_SERVICE, CHANGE_SELECTED_OUTBOUND_TICKET, CHANGE_SELECTED_INBOUND_SERVICE, CHANGE_SELECTED_INBOUND_TICKET } from '../actionTypes';\n\nconst initialState = {\n  outboundJourney: null,\n  outboundTicket: null,\n  inboundJourney: null,\n  inboundTicket: null,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CHANGE_SELECTED_OUTBOUND_SERVICE: {\n      return {\n        ...state,\n        outboundJourney: action.id,\n      };\n    }\n    case CHANGE_SELECTED_OUTBOUND_TICKET: {\n      return {\n        ...state,\n        outboundTicket: action.id,\n      };\n    }\n    case CHANGE_SELECTED_INBOUND_SERVICE: {\n      return {\n        ...state,\n        inboundJourney: action.id,\n      };\n    }\n    case CHANGE_SELECTED_INBOUND_TICKET: {\n      return {\n        ...state,\n        inboundTicket: action.id,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","import { CHANGE_RESULTS } from '../actionTypes';\nimport moment from 'moment';\n\nconst initialState = {};\n\nconst translateJourneyResponse = journey => {\n  if (!journey) {\n    return null;\n  }\n\n  if (!journey.Services) {\n    return null;\n  }\n\n  return journey.Services.map((service, serviceIndex) => {\n    const DisplayFares = service.DisplayFaresFixed.concat(service.DisplayFaresFlexible);\n\n    const tickets = DisplayFares\n      .filter(fare => fare.Available)\n      .map((fare, fareIndex) => {\n        return {\n          id: fareIndex,\n          isDiscounted: fare.IsDiscounted,\n          isReturn: fare.IsReturn,\n          isFirst: fare.TicketClass === 'First',\n          isFlexible: fare.IsFlexible,\n          name: fare.DisplayName,\n          price: fare.TotalPrice,\n          description: `${fare.RouteRestrictionDisplayName} ${fare.ShortTermsLabel}.`,\n        };\n      });\n\n    const legs = service.Legs.map(leg => (\n      {\n        destination: leg.Destination.Name,\n        origin: leg.Origin.Name,\n        toc: leg.TocIdString,\n      }\n    ));\n\n    // Add a discount the FIRST result\n    if (serviceIndex === 0 && tickets.length > 0) {\n      tickets[0].isDiscounted = true;\n    }\n\n    return {\n      id: serviceIndex,\n      station: {\n        origin: service.Origin.Name,\n        destination: service.Destination.Name,\n      },\n      time: {\n        departure: moment(service.DepartureDateTime),\n        arrival: moment(service.ArrivalDateTime),\n      },\n      changes: service.Changes,\n      toc: service.PrimaryTocId,\n      tickets,\n      legs,\n    };\n  });\n};\n\nconst translateApiResponse = response => {\n  return {\n    outbound: translateJourneyResponse(response.OutwardJourney),\n    inbound: translateJourneyResponse(response.ReturnJourney),\n  };\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CHANGE_RESULTS: {\n      return translateApiResponse(action.data);\n    }\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","import { CHANGE_USER_CASE } from '../actionTypes';\n\nconst initialState = null;\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CHANGE_USER_CASE: {\n      return action.id;\n    }\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","import { BEGIN_LOADING, END_LOADING } from '../actionTypes';\n\nconst initialState = false;\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case BEGIN_LOADING:\n      return true;\n    case END_LOADING:\n      return false;\n    default:\n      return false;\n  }\n}\n\nexport default reducer;","import { combineReducers } from 'redux';\nimport screen from './screen';\nimport search from './search';\nimport selection from './selection';\nimport results from './results';\nimport usercase from './usercase';\nimport loading from './loading';\n\nexport default combineReducers({\n  search: search, \n  screen: screen,\n  selection: selection,\n  results: results,\n  usercase: usercase,\n  loading: loading,\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer, applyMiddleware(thunk));\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\n\nconst documentRoot = document.getElementById('root');\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  documentRoot\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/serviceInfo.98d08560.png\";","module.exports = __webpack_public_path__ + \"static/media/termsAndConditions.af017db9.png\";","module.exports = __webpack_public_path__ + \"static/media/review-footer.c2c93743.png\";","module.exports = __webpack_public_path__ + \"static/media/review.2cd76d8f.png\";"],"sourceRoot":""}