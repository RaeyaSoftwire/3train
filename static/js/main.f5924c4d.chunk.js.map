{"version":3,"sources":["data/logo.svg","data/payment.png","data/userCaseScreens/1ab-review.png","data/userCaseScreens/1ab-confirmation.png","data/userCaseScreens/1c-review.png","data/userCaseScreens/1c-confirmation.png","data/userCaseScreens/1e-review.png","data/userCaseScreens/1e-confirmation.png","data/userCaseScreens/2a-review.png","data/userCaseScreens/2a-confirmation.png","data/userCaseScreens/2b-review.png","data/userCaseScreens/2b-confirmation.png","data/userCaseScreens/2b2-review.png","data/userCaseScreens/2b2-confirmation.png","data/userCaseScreens/3ab-review.png","data/userCaseScreens/3ab-confirmation.png","data/confirmation.png","ui/Block.js","ui/Badge.js","utility/format.js","data/icon/single.js","data/icon/return.js","data/icon/open-return.js","data/icon/season.js","data/icon/back.js","ui/Header.js","utility/get.js","data/icon/person.js","data/icon/large-chevron.js","ui/ServiceResult.js","ui/ServiceResultList.js","ui/TicketResult.js","ui/TicketResultList.js","ui/ResultsHeader.js","ui/Footer.js","redux/actions.js","redux/actionTypes.js","screens/Results.js","ui/ResultsHeaderThree.js","ui/ResultsHeaderThreeMix.js","data/screen.js","screens/ResultsThree/ResultsThreeServiceEarlier/index.js","screens/ResultsThree/ResultsThreeServiceLater/index.js","screens/ResultsThree/ResultsThreeServiceOutbound/index.js","screens/ResultsThree/ResultsThreeServiceInbound/index.js","ui/HighlightScreen.js","screens/ResultsThree/ResultsThreeTicketHighlights/index.js","screens/ResultsThree/ResultsThreeTicketOutbound/index.js","screens/ResultsThree/ResultsThreeTicketInbound/index.js","screens/ResultsThree/ResultsThreePriceBreakdown/index.js","screens/ResultsThree/index.js","pickers/TicketTypePicker.js","pickers/StationPicker.js","pickers/JourneyTimePicker.js","pickers/PassengerPicker.js","ui/Button.js","screens/Search.js","screens/Review.js","screens/ReviewThree.js","screens/Payment.js","data/userCases.js","screens/Confirmation.js","screens/Menu.js","data/icon/spinner.js","App.js","serviceWorker.js","redux/reducers/screen.js","redux/reducers/search.js","redux/reducers/selection.js","redux/reducers/results.js","redux/reducers/usercase.js","redux/reducers/loading.js","redux/reducers/index.js","redux/store.js","index.js","data/serviceInfo.png","data/termsAndConditions.png","data/review-footer.png","data/review.png"],"names":["module","exports","Block","this","props","className","children","onClick","React","Component","cheapest","fastest","discounted","text","getClassName","formatPrice","price","absPrice","Math","abs","absString","toFixed","padStart","icon","viewBox","fillRule","d","Header","noBack","onBackClick","hasClose","onCloseClick","data","station","getStationName","origin","getTicketTypeIcon","ticketType","destination","title","Fragment","getBackButton","getTitle","getCloseButton","id","stations","find","name","getSelectedOutboundService","results","selection","outbound","service","outboundJourney","getSelectedOutboundTicket","selectedOutboundService","tickets","ticket","outboundTicket","getSelectedInboundService","inbound","inboundJourney","getSelectedInboundTicket","selectedInboundService","inboundTicket","getDurationString","departure","arrival","duration","diff","hours","floor","minutes","getChangesString","changes","transform","ServiceResult","handleClick","bind","elements","isCheapest","push","key","isFastest","length","onServiceInfoClick","toc","src","logo","getBadges","standard","passengers","time","format","note","first","e","stopPropagation","ServiceResultList","map","item","TicketResult","onConditionsClick","onPriceBreakdownClick","descriptionLines","line","index","isDiscounted","TicketResultList","ResultsHeader","stage","Footer","changeSearchData","change","type","findTrains","getState","searchParams","search","queryParams","ocrs","from","crs","dcrs","to","outy","outm","outd","outh","outmi","outda","after","ret","rety","retm","retd","reth","retmi","retda","nad","adults","nch","axios","get","params","changeResults","executeSearch","redirectScreen","dispatch","searching","then","changeScreen","earlierOutboundServices","earlierInboundServices","laterOutboundServices","laterInboundServices","changeSelectedOutboundService","changeSelectedOutboundTicket","changeSelectedInboundService","changeSelectedInboundTicket","executeLoad","milliseconds","t","Promise","resolve","setTimeout","v","random","getCheapestTicketPrice","min","Infinity","addDataToServices","services","forEach","filter","isFirst","addQualifiers","cheapestServicePrice","fastestServiceTime","Results","state","serviceInfo","termsAndConditions","priceBreakdown","cheapestService","reduce","result","cheapestFirst","cheapestFlexible","isFlexible","highlights","otherFixed","some","highlight","otherFlexible","categories","screen","selectOutboundService","getEarlierButton","goToNextScreen","setState","getLaterButton","selectOutboundTicket","getTicketPresentationData","isReturn","selectInboundService","selectInboundTicket","goToPreviousScreen","getPreviousScreenId","getNextScreenId","getOutboundServiceContent","getOutboundTicketContent","getReturnServiceContent","getReturnTicketContent","selectedOutboundTicket","selectedInboundTicket","getPriceBreakdownService","serviceInfoScreen","termsAndConditionsScreen","getHeader","getResultsHeader","getContent","getFooter","getPriceBreakdown","ResultsHeaderThree","connect","parseInt","subtitle","legNumber","outboundTime","inboundTime","userCaseMenu","serviceOutbound","serviceInbound","ticketHighlights","ticketOutbound","ticketInbound","review","payment","confirmation","ResultsThreeServiceEarlier","ResultsThreeServiceLater","ResultsThreeServiceOutbound","onServiceSelect","servicesInbound","servicesOutbound","presentationServices","inboundSingles","concat","cheapestInboundLegStandard","cheapestInboundLegFirst","outboundReturns","cheapestOutboundReturnStandard","cheapestOutboundReturnFirst","ResultsThreeServiceInbound","onHighlightClick","idOut","idIn","onMixClick","highlightHasDiscount","categoriesHaveDiscount","category","isSomeDiscount","presentHighlights","ResultsThreeTicketHighlights","cheapestPrice","outTickets","inTickets","twoLegTickets","outLegTickets","inLegTickets","cheapestOutPrice","cheapestInPrice","cheapestTwoLegPrice","cheapestOut","cheapestIn","cheapestTwoLeg","bestValue","getCheapestForReturn","cheapestMixed","cheapestFirstStd","cheapestStdFirst","getCheapestForSingle","idsAreSame","dataA","dataB","unshift","getTicketHighlightsData","ResultsThreeTicketOutbound","onTicketSelect","ResultsThreeTicketInbound","ResultsThreePriceBreakdown","priceBreakdownOutId","priceBreakdownInId","renderService","ResultsThree","priceBreakdownOpen","onPriceBreakdownClickHighlights","onPriceBreakdownClickOutbound","onPriceBreakdownClickInbound","screens","prevProps","onScreenChange","TicketTypePicker","selected","onSelect","ticketTypes","options","toLowerCase","includes","value","sort","a","b","stationSearchFunction","term","option","termLower","startsWith","StationPicker","onChange","Form","Dropdown","placeholder","defaultValue","beforeOrAfterOptions","calculateFormValues","input","timeMoment","moment","date","JourneyTimePicker","formValues","handleChange","handleAfterChange","handleDateChange","handleTimeChange","nextProps","newFormValues","target","PassengerPicker","maxOption","passengerDropdownOptions","Array","keys","n","toString","Button","loading","disabled","Search","primary","canSearch","Review","outboundService","inboundService","presentService","reviewScreen","reviewFooter","ReviewThree","coaches","seats","seat","legs","leg","legIndex","selectedCoach","selectedSeats","isLner","presentSeatGroupRowItem","seatIndex","presentSeatGroup","Payment","paymentScreen","userCases","oneABReview","oneABConfirmation","oneCReview","oneCConfirmation","oneEReview","oneEConfirmation","twoAReview","twoAConfirmation","twoBReview","twoBConfirmation","twoBTwoReview","twoBTwoConfirmation","threeABReview","threeABConfirmation","Confirmation","goToFirstScreen","usercase","confirmationScreen","uc","Menu","changeUserCase","userCase","userCaseIndex","selectUserCase","App","displaySpinner","getScreen","Boolean","window","location","hostname","match","reducer","action","nextTime","add","remainder","startOf","initialState","clone","translateJourneyResponse","journey","Services","serviceIndex","DisplayFaresFixed","DisplayFaresFlexible","fare","Available","fareIndex","IsDiscounted","IsReturn","TicketClass","IsFlexible","DisplayName","TotalPrice","description","RouteRestrictionDisplayName","ShortTermsLabel","Legs","Destination","Name","Origin","TocIdString","DepartureDateTime","ArrivalDateTime","Changes","PrimaryTocId","translateApiResponse","response","OutwardJourney","ReturnJourney","combineReducers","store","createStore","rootReducer","applyMiddleware","thunk","documentRoot","document","getElementById","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f5924c4d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.13d35289.svg\";","module.exports = __webpack_public_path__ + \"static/media/payment.f30d4edb.png\";","module.exports = __webpack_public_path__ + \"static/media/1ab-review.418212f3.png\";","module.exports = __webpack_public_path__ + \"static/media/1ab-confirmation.2f35a209.png\";","module.exports = __webpack_public_path__ + \"static/media/1c-review.de5e6a65.png\";","module.exports = __webpack_public_path__ + \"static/media/1c-confirmation.c09f7846.png\";","module.exports = __webpack_public_path__ + \"static/media/1e-review.14d80ccd.png\";","module.exports = __webpack_public_path__ + \"static/media/1e-confirmation.6123a1a2.png\";","module.exports = __webpack_public_path__ + \"static/media/2a-review.105b218c.png\";","module.exports = __webpack_public_path__ + \"static/media/2a-confirmation.32c5c341.png\";","module.exports = __webpack_public_path__ + \"static/media/2b-review.d800acaa.png\";","module.exports = __webpack_public_path__ + \"static/media/2b-confirmation.cb628398.png\";","module.exports = __webpack_public_path__ + \"static/media/2b2-review.e5b345a7.png\";","module.exports = __webpack_public_path__ + \"static/media/2b2-confirmation.6655ed73.png\";","module.exports = __webpack_public_path__ + \"static/media/3ab-review.b328a18c.png\";","module.exports = __webpack_public_path__ + \"static/media/3ab-confirmation.5c8f5e96.png\";","module.exports = __webpack_public_path__ + \"static/media/confirmation.5bfea8de.png\";","import React from 'react';\n\nimport './Block.css';\n\nexport default class Block extends React.Component {\n  render() {\n    const { className, children, onClick } = this.props;\n\n    return (\n      <div className={`Block ${className}`} onClick={onClick}>\n        {children}\n      </div>\n    )\n  }\n}\n","import React from 'react';\n\nimport './Badge.css';\n\nexport default class Block extends React.Component {\n  getClassName() {\n    const { cheapest, fastest, discounted } = this.props;\n\n    return `Badge ${cheapest ? 'Badge-cheapest' : ''} ${fastest ? 'Badge-fastest' : ''} ${discounted ? 'Badge-discounted' : ''}`\n  }\n\n  render() {\n    const { text } = this.props;\n\n    return (\n      <div className={this.getClassName()}>\n        {text}\n      </div>\n    )\n  }\n}\n","export const formatPrice = price => {\n  if (price) {\n    const absPrice = Math.abs(price);\n    const absString = `£${(absPrice / 100).toFixed(0)}.${(absPrice % 100).toFixed(0).padStart(2, '0')}`;\n    return price < 0 ? `-${absString}` : absString;\n  }\n  return null;\n};\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 20\">\n        <path fillRule=\"nonzero\" d=\"M23.616 10.934l-8.667 8.682a1.303 1.303 0 0 1-.929.384c-.352 0-.681-.136-.929-.384l-.787-.788a1.333 1.333 0 0 1 0-1.872l5.057-5.076H1.297A1.283 1.283 0 0 1 0 10.586V9.472C0 8.746.572 8.12 1.297 8.12h16.121l-5.113-5.105a1.288 1.288 0 0 1-.384-.921c0-.352.136-.679.384-.926l.787-.786c.247-.248.577-.383.929-.383.351 0 .68.137.928.385l8.668 8.682c.248.248.384.58.383.933 0 .354-.135.686-.384.934z\"/>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 18\">\n        <g fillRule=\"nonzero\">\n            <path d=\"M.192 12.936l4.333 4.408a.646.646 0 0 0 .465.194c.176 0 .34-.069.464-.194l.394-.4a.682.682 0 0 0 0-.95L3.32 13.415h8.032a.646.646 0 0 0 .648-.657v-.566c0-.368-.286-.686-.648-.686H3.29l2.557-2.591a.659.659 0 0 0 .191-.468.664.664 0 0 0-.191-.47l-.394-.399a.646.646 0 0 0-.464-.194c-.176 0-.341.07-.465.195L.192 11.988A.67.67 0 0 0 0 12.46c0 .18.068.349.192.475zM23.808 5.551L19.475 9.96a.646.646 0 0 1-.465.195.647.647 0 0 1-.464-.195l-.394-.4a.682.682 0 0 1 0-.95L20.68 6.03h-8.032A.646.646 0 0 1 12 5.375v-.566c0-.369.286-.686.648-.686h8.061L18.152 1.53a.659.659 0 0 1-.191-.468c0-.178.068-.344.191-.47l.394-.399A.646.646 0 0 1 19.01 0c.176 0 .341.07.465.195l4.333 4.408a.67.67 0 0 1 .192.474.67.67 0 0 1-.192.474z\"/>\n        </g>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 18\">\n        <g fillRule=\"nonzero\">\n            <path d=\"M5.032 17.058a.87.87 0 0 0 .623-.262l.377-.383a.89.89 0 0 0 .256-.628l-.008-.118a.898.898 0 0 0-.248-.516l-2.005-2.043 7.102-.001a.87.87 0 0 0 .871-.88v-.542l-.007-.112c-.053-.441-.417-.795-.864-.795H4L6.032 8.72a.882.882 0 0 0 .256-.624.886.886 0 0 0-.256-.626l-.377-.382a.87.87 0 0 0-1.246.001L.255 11.313a.891.891 0 0 0-.255.63c0 .236.09.461.256.63l4.153 4.223a.87.87 0 0 0 .623.262zm0-.5a.37.37 0 0 1-.267-.112L.612 12.22a.391.391 0 0 1-.112-.278c0-.108.04-.206.112-.28L4.765 7.44a.37.37 0 0 1 .267-.112c.102 0 .195.039.267.111l.377.383c.073.074.112.17.112.275a.382.382 0 0 1-.112.273l-2.87 2.909h8.323c.2 0 .371.184.371.407v.543a.37.37 0 0 1-.371.379H2.836l2.84 2.895a.404.404 0 0 1 0 .56l-.377.384a.37.37 0 0 1-.267.112zM23.808 5.551L19.475 9.96a.646.646 0 0 1-.465.195.647.647 0 0 1-.464-.195l-.394-.4a.682.682 0 0 1 0-.95L20.68 6.03h-8.032A.646.646 0 0 1 12 5.375v-.566c0-.369.286-.686.648-.686h8.061L18.152 1.53a.659.659 0 0 1-.191-.468c0-.178.068-.344.191-.47l.394-.399A.646.646 0 0 1 19.01 0c.176 0 .341.07.465.195l4.333 4.408a.67.67 0 0 1 .192.474.67.67 0 0 1-.192.474z\"/>\n        </g>\n    </svg>\n);\n\nexport default icon;\n\n\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 16\">\n        <g fillRule=\"nonzero\">\n            <path d=\"M22.993 8.397l-6.603 6.668a.989.989 0 0 1-.708.295.989.989 0 0 1-.708-.295l-.6-.605a1.028 1.028 0 0 1 0-1.437l3.853-3.9H5.987A.981.981 0 0 1 5 8.13v-.856c0-.557.436-1.037.988-1.037H18.27l-3.896-3.92a.993.993 0 0 1-.292-.708 1 1 0 0 1 .292-.711l.6-.604A.988.988 0 0 1 15.682 0a.99.99 0 0 1 .708.295l6.604 6.668c.189.191.292.446.292.717 0 .272-.103.527-.293.717z\"/>\n            <path d=\"M.292 8.397l6.604 6.668c.188.19.44.295.708.295.268 0 .519-.105.707-.295l.6-.605c.188-.19.292-.444.292-.715 0-.27-.104-.533-.292-.723L5.058 9.124h12.24a.981.981 0 0 0 .988-.994v-.856c0-.557-.436-1.037-.988-1.037H5.015l3.896-3.92a.993.993 0 0 0 .292-.708A1 1 0 0 0 8.91.898l-.6-.604A.988.988 0 0 0 7.603 0a.99.99 0 0 0-.707.295L.292 6.963C.103 7.154 0 7.41 0 7.68c0 .272.103.527.292.717z\"/>\n        </g>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 24 24\">\n        <path d=\"M9.59765625,20.390625 L0.48046875,11.4726562 C0.1640625,11.15625 0,10.8046875 0,10.3945312 C0,9.984375 0.1640625,9.609375 0.4921875,9.3046875 L9.609375,0.3984375 C9.8671875,0.140625 10.1953125,0 10.5703125,0 C11.3554688,0 11.9648438,0.609375 11.9648438,1.3828125 C11.9648438,1.7578125 11.8125,2.12109375 11.5429688,2.390625 L3.33984375,10.3828125 L11.5429688,18.3984375 C11.8125,18.6679688 11.9648438,19.0195312 11.9648438,19.40625 C11.9648438,20.1796875 11.3554688,20.7890625 10.5703125,20.7890625 C10.1953125,20.7890625 9.8671875,20.6484375 9.59765625,20.390625 Z\" />\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\nimport BackIcon from '../data/icon/back';\nimport { getTicketTypeIcon, getStationName } from '../utility/get';\n\nimport './Header.css';\n\nexport default class Header extends React.Component {\n  getBackButton() {\n    const { noBack, onBackClick } = this.props;\n    \n    if (noBack) {\n      return <div className=\"Header-left Header-button\" />\n    }\n    else {\n      return (\n        <button className=\"Header-left Header-button\" onClick={onBackClick}>\n          <BackIcon className=\"Header-button-icon\" />\n        </button>\n      );\n    }\n  }\n\n  getCloseButton() {\n    const { hasClose, onCloseClick } = this.props;\n    \n    if (hasClose) {\n      return (\n        <button className=\"Header-right Header-button\" onClick={onCloseClick}>\n          Close\n        </button>\n      );\n    }\n    else {\n      return <div className=\"Header-right Header-button\" />\n    }\n  }\n\n  getTitle() {\n    const { data } = this.props;\n    \n    if (data.station) {\n      return (\n        <div className=\"Header-middle\">\n          <div className=\"Header-firstStation\">\n            {getStationName(data.station.origin)}\n          </div>\n          <div className=\"Header-secondStation\">\n            {getTicketTypeIcon(data.ticketType, \"Header-icon\")}\n            {getStationName(data.station.destination)}\n          </div>\n        </div>\n      );\n    }\n\n    if (data.title) { \n      return (\n        <div className=\"Header-middle\">\n          <div className=\"Header-title\">\n            {data.title}\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"Header-middle\" />\n    )\n\n  }\n  render() {\n    const { title, noBack, onBackClick } = this.props;\n\n    return (\n      <React.Fragment>\n        <header className=\"Header\">\n          {this.getBackButton()}\n          {this.getTitle()}\n          {this.getCloseButton()}\n        </header>\n        <div className=\"Header-padder\" />\n      </React.Fragment>\n    )\n  }\n}\n","import React from 'react';\nimport stations from '../data/stations.json';\nimport SingleIcon from '../data/icon/single';\nimport ReturnIcon from '../data/icon/return';\nimport OpenReturnIcon from '../data/icon/open-return';\nimport SeasonIcon from '../data/icon/season';\nimport Header from '../ui/Header';\n\nexport const getStationName = id => {\n  return stations.find(station => station.id === id).name;\n};\n\nexport const getSelectedOutboundService = (results, selection) => {\n  if (results.outbound) {\n    return results.outbound.find(service => service.id === selection.outboundJourney);\n  }\n\n  return null;\n};\n\nexport const getSelectedOutboundTicket = (results, selection) => {\n  const selectedOutboundService = getSelectedOutboundService(results, selection);\n\n  if (selectedOutboundService) {\n    return selectedOutboundService.tickets.find(ticket => ticket.id === selection.outboundTicket);\n  }\n\n  return null;\n};\n\nexport const getSelectedInboundService = (results, selection) => {\n  if (results.inbound) {\n    return results.inbound.find(service => service.id === selection.inboundJourney);\n  }\n\n  return null;\n};\n\nexport const getSelectedInboundTicket = (results, selection) => {\n  const selectedInboundService = getSelectedInboundService(results, selection);\n\n  if (selectedInboundService) {\n    return selectedInboundService.tickets.find(ticket => ticket.id === selection.inboundTicket);\n  }\n\n  return null;\n};\n\nexport const getDurationString = (departure, arrival) => {\n  if (!departure || !arrival) {\n    return null;\n  }\n\n  const duration = arrival.diff(departure, 'minutes');\n\n  const hours = Math.floor(duration / 60).toFixed(0);\n  const minutes = (duration % 60).toFixed(0).padStart(2, '0');\n\n  if (hours === '0') {\n    return `${minutes}m`;\n  } else {\n    return `${hours}h ${minutes}m`;\n  }\n};\n\nexport const getChangesString = changes => {\n  return `${changes} changes`;\n}\n\nexport const getTicketTypeIcon = (id, className) => {\n  switch (id) {\n    case 0:\n      return <SingleIcon className={className} />\n    case 1:\n      return <ReturnIcon className={className} />\n    case 2:\n      return <OpenReturnIcon className={className} />\n    case 3:\n      return <SeasonIcon className={className} />\n    default:\n      return null;\n  }\n};\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 10 14\">\n        <path transform=\"translate(-13.000000, -2.000000)\" d=\"M18,8 C20.7614237,8 23,10.2385763 23,13 C23,15.7614237 13,15.7614237 13,13 C13,10.2385763 15.2385763,8 18,8 Z M18,2 C19.6568542,2 21,3.34314575 21,5 C21,6.65685425 19.6568542,8 18,8 C16.3431458,8 15,6.65685425 15,5 C15,3.34314575 16.3431458,2 18,2 Z\" id=\"Combined-Shape\"></path>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\n\nconst icon = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 12 24\">\n        <path transform=\"translate(-340.000000, -14.000000)\" d=\"M340.499776,38 C340.37574,38 340.250719,37.9541089 340.154059,37.8613423 C339.954832,37.6704184 339.947988,37.3540087 340.138449,37.1543191 L350.807805,25.9998722 L340.138449,14.8454722 C339.947988,14.6457826 339.954832,14.329373 340.154059,14.1384491 C340.353286,13.9470564 340.669704,13.9558221 340.861102,14.1540586 L351.861549,25.6541654 C352.04615,25.8475269 352.04615,26.1522176 351.861549,26.345579 L340.861149,37.8457327 C340.762473,37.9482494 340.63164,38 340.499776,38 Z\" id=\"Path\"></path>\n    </svg>\n);\n\nexport default icon;\n","import React from 'react';\nimport Block from './Block';\nimport Badge from './Badge';\nimport { formatPrice } from '../utility/format';\nimport { getChangesString, getDurationString } from '../utility/get';\n\nimport PersonIcon from '../data/icon/person';\nimport LargeChevron from '../data/icon/large-chevron';\nimport logo from '../data/logo.svg';\n\nimport './ServiceResult.css';\n\nexport default class ServiceResult extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.handleClick = this.handleClick.bind(this);\n  }\n  \n  getBadges() {\n    const { data } = this.props;\n\n    const elements = [];\n\n    if (data.isCheapest) {\n      elements.push(<Badge key=\"cheapest\" cheapest text=\"Cheapest\" />);\n    }\n    if (data.isFastest) {\n      elements.push(<Badge key=\"fastest\" fastest text=\"Fastest\" />);\n    }\n    \n    if (elements.length > 0) {\n      return (\n        <div className=\"ServiceResult-horizontal ServiceResult-badges\">\n          {elements}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  handleClick() {\n    const { data, onClick } = this.props;\n\n    if (data.tickets.length > 0) {\n      onClick();\n    }\n  }\n\n  render() {\n    const { data, onServiceInfoClick } = this.props;\n\n    return (\n      <Block className=\"ServiceResult\" onClick={this.handleClick}>\n        <div className=\"ServiceResult-horizontal ServiceResult-top\">\n          <div className=\"ServiceResult-top-content\">\n            <div className=\"ServiceResult-horizontal\">\n              {(data.toc === 'GR') && <img src={logo} className=\"ServiceResult-logo\" />}\n              {this.getBadges()}\n            </div>\n            {data.price.standard && <div className=\"ServiceResult-priceLabel\">\n              {data.passengers}\n              <PersonIcon className=\"ServiceResult-personIcon\" />\n              Return from\n            </div>}\n            <div className=\"ServiceResult-horizontal\">\n              <div className=\"ServiceResult-details\">\n                <div className=\"ServiceResult-time\">\n                  {data.time.departure.format('HH:mm')} > {data.time.arrival.format('HH:mm')}\n                </div>\n                {data.note && <div className=\"ServiceResult-note\">\n                  {data.note}\n                </div>}\n              </div>\n              <div className=\"ServiceResult-prices\">\n                {data.price.standard && <div className=\"ServiceResult-prices-standard\">\n                  {formatPrice(data.price.standard)}\n                </div>}\n                {data.price.first && <div className=\"ServiceResult-prices-first\">\n                  1st {formatPrice(data.price.first)}\n                </div>}\n              </div>\n            </div>\n          </div>\n          <LargeChevron className=\"ServiceResult-chevron\" />\n        </div>\n        <div className=\"ServiceResult-horizontal ServiceResult-bottom\">\n          <div className=\"ServiceResult-length\">\n            {getDurationString(data.time.departure, data.time.arrival)}, {getChangesString(data.changes)}\n          </div>\n          <div className=\"ServiceResult-info\" onClick={e => {onServiceInfoClick(); e.stopPropagation()}}>\n            Service info\n          </div>\n        </div>\n      </Block>\n    )\n  }\n}\n","import React from 'react';\nimport ServiceResult from './ServiceResult';\n\nimport './ServiceResultList.css';\n\nexport default class ServiceResultList extends React.Component {\n  render() {\n    const { data, onClick, onServiceInfoClick } = this.props;\n\n    return (\n      <div className=\"ServiceResultList\">\n        {data.map(item => {\n          return (\n            <ServiceResult key={item.id} data={item} onClick={() => onClick(item.id)} onServiceInfoClick={() => onServiceInfoClick(item.id)} />\n          );\n        })}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Block from './Block';\nimport { formatPrice } from '../utility/format';\nimport Badge from './Badge';\n\nimport LargeChevron from '../data/icon/large-chevron';\nimport PersonIcon from '../data/icon/person';\n\nimport './TicketResult.css';\n\nexport default class TicketResult extends React.Component {\n  render() {\n    const { className, data, onClick, onConditionsClick, onPriceBreakdownClick } = this.props;\n\n    return (\n      <Block className={className} onClick={onClick}>\n        <div className=\"TicketResult\">\n          <div className=\"TicketResult-top\">\n            <div className=\"TicketResult-top-content\">\n              <div className=\"TicketResult-priceLabel\">\n                {data.passengers}\n                <PersonIcon className=\"TicketResult-personIcon\" />\n              </div>\n              <div className=\"TicketResult-header\">\n                <div className=\"TicketResult-title\">\n                  {data.title}\n                </div>\n                <div className=\"TicketResult-price\">\n                  {formatPrice(data.price)}\n                </div>\n              </div>\n              <div className=\"TicketResult-sub\">\n                <div className=\"TicketResult-note\">\n                  {data.descriptionLines.map((line, index) => <div key={index} className=\"TicketResult-note-line\">{line}</div>)}\n                </div>\n                {data.isDiscounted && <Badge discounted text=\"Discounted\" />}\n              </div>\n            </div>\n            <LargeChevron className=\"TicketResult-chevron\" />\n          </div>\n          <div className=\"TicketResult-actions\">\n            <div className=\"TicketResult-action\" onClick={e => { onConditionsClick(e); e.stopPropagation() }}>\n              Ticket conditions\n            </div>\n            <div className=\"TicketResult-action\" onClick={e => { onPriceBreakdownClick(e); e.stopPropagation() }}>\n              Price breakdown\n            </div>\n          </div>\n        </div>\n      </Block>\n    )\n  }\n}\n","import React from 'react';\nimport TicketResult from './TicketResult';\n\nimport './TicketResultList.css';\n\nexport default class TicketResultList extends React.Component {\n  render() {\n    const { data, onClick, onConditionsClick, onPriceBreakdownClick } = this.props;\n\n    return (\n      <div className=\"TicketResultList\">\n        {data.map(ticket => (\n          <TicketResult className=\"TicketResultList-ticket\" key={ticket.id} data={ticket} onClick={() => onClick(ticket.id)} onConditionsClick={() => onConditionsClick(ticket.id)} onPriceBreakdownClick={() => onPriceBreakdownClick(ticket.id)} />\n        ))}\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport './ResultsHeader.css';\n\nexport default class ResultsHeader extends React.Component {\n  render() {\n    const { data } = this.props;\n\n    if (data.ticketType === 1 || data.ticketType === 2) {\n      return (\n        <React.Fragment>\n          <div className=\"ResultsHeader\">\n            <div className={`ResultsHeader-group ${data.stage === 0 ? 'selected' : ''}`}>\n              <div className=\"ResultsHeader-title\">\n                1 - Going out\n              </div>\n              <div className=\"ResultsHeader-subtitle\">\n                {data.time.outbound}\n              </div>\n            </div>\n            <div className={`ResultsHeader-group ${data.stage === 1 ? 'selected' : ''}`}>\n              <div className=\"ResultsHeader-title\">\n                2 - Coming back\n              </div>\n              <div className=\"ResultsHeader-subtitle\">\n                {data.time.inbound}\n              </div>\n            </div>\n          </div>\n          <div className=\"ResultsHeader-padder\" />\n        </React.Fragment>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        <div className=\"ResultsHeader ResultsHeader-small\">\n          <div className=\"ResultsHeader-group selected\">\n            <div className=\"ResultsHeader-subtitle\">\n              {data.time.outbound}\n            </div>\n          </div>\n        </div>\n        <div className=\"ResultsHeader-padder-small\" />\n      </React.Fragment>\n    );\n    \n  }\n}\n","import React from 'react';\n\nimport './Footer.css';\n\nexport default class Footer extends React.Component {\n  render() {\n    const { children } = this.props;\n\n    // Note the footer padder is a fixed size and doesnt change with the content\n\n    return (\n      <React.Fragment>\n        <div className=\"Footer\">\n          {children}\n        </div>\n        <div className=\"Footer-padder\" />\n      </React.Fragment>\n    )\n  }\n}\n","import { CHANGE_SEARCH_DATA, CHANGE_SCREEN, CHANGE_RESULTS, CHANGE_SELECTED_OUTBOUND_SERVICE, CHANGE_SELECTED_OUTBOUND_TICKET, CHANGE_SELECTED_INBOUND_SERVICE, CHANGE_SELECTED_INBOUND_TICKET, CHANGE_USER_CASE, BEGIN_LOADING, END_LOADING } from './actionTypes';\nimport axios from 'axios';\nimport stations from '../data/stations';\n\nexport const changeSearchData = change => ({\n  type: CHANGE_SEARCH_DATA,\n  data: change,\n});\n\nconst findTrains = getState => {\n  const searchParams = getState().search;\n\n  const corsBypassUrl = 'https://cors-anywhere.herokuapp.com/';\n  const apiUrl = 'https://www.lner.co.uk/api/CbeService/GetFares';\n\n  const queryParams = {\n    ocrs: stations.find(station => station.id === searchParams.from).crs,\n    dcrs: stations.find(station => station.id === searchParams.to).crs,\n    outy: searchParams.outbound.time.format('YYYY'),\n    outm: searchParams.outbound.time.format('MM'),\n    outd: searchParams.outbound.time.format('DD'),\n    outh: searchParams.outbound.time.format('kk'),\n    outmi: searchParams.outbound.time.format('mm'),\n    outda: searchParams.outbound.after ? 'y' : 'n',\n    ret: (searchParams.ticketType === 1 || searchParams.ticketType === 2) ? 'y' : 'n',\n    rety: searchParams.ticketType === 1 ? searchParams.inbound.time.format('YYYY') : null,\n    retm: searchParams.ticketType === 1 ? searchParams.inbound.time.format('MM') : null,\n    retd: searchParams.ticketType === 1 ? searchParams.inbound.time.format('DD') : null,\n    reth: searchParams.ticketType === 1 ? searchParams.inbound.time.format('kk') : null,\n    retmi: searchParams.ticketType === 1 ? searchParams.inbound.time.format('mm') : null,\n    retda: searchParams.ticketType === 1 ? (searchParams.inbound.after ? 'y' : 'n') : null,\n    nad: searchParams.adults,\n    nch: searchParams.children,\n  };\n\n  return axios.get(`${corsBypassUrl}${apiUrl}`, { params: queryParams });\n};\n\nexport const changeUserCase = id => ({\n  type: CHANGE_USER_CASE,\n  id: id,\n});\n\nexport const changeResults = results => ({\n  type: CHANGE_RESULTS,\n  data: results,\n});\n\nexport const executeSearch = (redirectScreen = 1) => {\n  return (dispatch, getState) => {\n    dispatch(changeSearchData({ searching: true }));\n    return findTrains(getState)\n      .then(results => {\n        dispatch(changeResults(results.data));\n        dispatch(changeSearchData({ searching: false }));\n        dispatch(changeScreen(redirectScreen));\n      });\n  };\n};\n\nexport const earlierOutboundServices = () => {\n  return (dispatch, getState) => {\n    const { results } = getState();\n    dispatch(changeSearchData({\n      outbound: {\n        time: results.outbound[0].time.arrival,\n        after: false,\n      },\n    }));\n    dispatch(executeSearch(1));\n  };\n};\n\nexport const earlierInboundServices = () => {\n  return (dispatch, getState) => {\n    const { results } = getState();\n    dispatch(changeSearchData({\n      inbound: {\n        time: results.inbound[0].time.arrival,\n        after: false,\n      },\n    }));\n    dispatch(executeSearch(2));\n  };\n};\n\nexport const laterOutboundServices = () => {\n  return (dispatch, getState) => {\n    const { results } = getState();\n    dispatch(changeSearchData({\n      outbound: {\n        time: results.outbound[results.outbound.length - 1].time.departure,\n        after: true,\n      },\n    }));\n    dispatch(executeSearch(1));\n  };\n};\n\nexport const laterInboundServices = () => {\n  return (dispatch, getState) => {\n    const { results } = getState();\n    dispatch(changeSearchData({\n      inbound: {\n        time: results.inbound[results.inbound.length - 1].time.departure,\n        after: true,\n      },\n    }));\n    dispatch(executeSearch(2));\n  };\n};\n\nexport const changeSelectedOutboundService = id => ({\n  type: CHANGE_SELECTED_OUTBOUND_SERVICE,\n  id: id,\n});\n\nexport const changeSelectedOutboundTicket = id => ({\n  type: CHANGE_SELECTED_OUTBOUND_TICKET,\n  id: id,\n});\n\nexport const changeSelectedInboundService = id => ({\n  type: CHANGE_SELECTED_INBOUND_SERVICE,\n  id: id,\n});\n\nexport const changeSelectedInboundTicket = id => ({\n  type: CHANGE_SELECTED_INBOUND_TICKET,\n  id: id,\n});\n\nexport const beginLoading = () => ({\n  type: BEGIN_LOADING,\n});\n\nexport const endLoading = () => ({\n  type: END_LOADING,\n});\n\nconst delay = (t, v) => {\n  return new Promise(resolve => { \n    setTimeout(resolve.bind(null, v), t);\n  });\n}\n\nexport const executeLoad = milliseconds => {\n  return (dispatch, getState) => {\n    dispatch(beginLoading());\n    return delay(milliseconds).then(() => dispatch(endLoading()));\n  };\n};\n\nexport const changeScreen = id => {\n  return (dispatch, getState) => {\n    dispatch(executeLoad(300 + (Math.random() * 400))).then(() => {\n      dispatch({\n        type: CHANGE_SCREEN,\n        id: id,\n      });\n    });\n  };\n};\n","export const CHANGE_SEARCH_DATA = 'CHANGE_SEARCH_DATA';\n\nexport const CHANGE_SCREEN = 'CHANGE_SCREEN';\n\nexport const CHANGE_RESULTS = 'CHANGE_RESULTS';\n\nexport const CHANGE_SELECTED_OUTBOUND_SERVICE = 'CHANGE_SELECTED_OUTBOUND_SERVICE';\nexport const CHANGE_SELECTED_OUTBOUND_TICKET = 'CHANGE_SELECTED_OUTBOUND_TICKET';\nexport const CHANGE_SELECTED_INBOUND_SERVICE = 'CHANGE_SELECTED_INBOUND_SERVICE';\nexport const CHANGE_SELECTED_INBOUND_TICKET = 'CHANGE_SELECTED_INBOUND_TICKET';\n\nexport const LATER_OUTBOUND_SERVICES = 'LATER_OUTBOUND_SERVICES';\nexport const EARLIER_OUTBOUND_SERVICES = 'EARLIER_OUTBOUND_SERVICES';\nexport const LATER_INBOUND_SERVICES = 'LATER_INBOUND_SERVICES';\nexport const EARLIER_INBOUND_SERVICES = 'EARLIER_INBOUND_SERVICES';\n\nexport const CHANGE_USER_CASE = 'CHANGE_USER_CASE';\n\nexport const BEGIN_LOADING = 'BEGIN_LOADING';\nexport const END_LOADING = 'END_LOADING';\n","import React from 'react';\nimport ServiceResultList from '../ui/ServiceResultList';\nimport TicketResultList from '../ui/TicketResultList';\nimport ResultsHeader from '../ui/ResultsHeader';\nimport Header from '../ui/Header';\nimport Footer from '../ui/Footer';\nimport { connect } from 'react-redux';\nimport { changeSelectedOutboundService, changeSelectedOutboundTicket, changeSelectedInboundService, changeSelectedInboundTicket, changeScreen } from '../redux/actions';\nimport { earlierInboundServices, earlierOutboundServices, laterOutboundServices, laterInboundServices } from '../redux/actions';\nimport { getSelectedOutboundService, getSelectedOutboundTicket, getSelectedInboundService, getSelectedInboundTicket } from '../utility/get';\n\nimport serviceInfoScreen from '../data/serviceInfo.png';\nimport termsAndConditionsScreen from '../data/termsAndConditions.png';\n\nimport LargeChevron from '../data/icon/large-chevron';\nimport './Results.css';\nimport { formatPrice } from '../utility/format';\n\nconst getCheapestTicketPrice = tickets => {\n  const cheapest = Math.min(...tickets.map(ticket => ticket.price));\n  return cheapest === Infinity ? null : cheapest;\n};\n\nconst addDataToServices = services => {\n  services.forEach(service => {\n    if (service.tickets.length > 0) {\n      service.price = {\n        standard: getCheapestTicketPrice(service.tickets.filter(ticket => !ticket.isFirst)),\n        first: getCheapestTicketPrice(service.tickets.filter(ticket => ticket.isFirst)),\n      };\n    } else {\n      service.price = {\n        standard: null,\n        first: null,\n      };\n      service.note = 'No tickets available';\n    }\n    service.time.duration = service.time.arrival.diff(service.time.departure, 'minutes');\n  });\n}\n\nconst addQualifiers = services => {\n  let cheapestServicePrice = Math.min(...services.map(service => Math.min(service.price.standard, service.price.first)));\n  let fastestServiceTime = Math.min(...services.map(service => service.time.duration));\n\n  services.forEach(service => {\n    service.isCheapest = service.price.standard === cheapestServicePrice || service.price.first === cheapestServicePrice;\n    service.isFastest = service.time.duration === fastestServiceTime;\n  });\n}\n\nconst mapStateToProps = state => {\n  const { search, results } = state;\n  const { outbound, inbound } = results;\n\n  const passengers = parseInt(search.adults) + parseInt(search.children);\n\n  if (outbound) {\n    addDataToServices(outbound);\n\n    outbound.forEach(service => {\n      service.passengers = passengers;\n      service.tickets.forEach(ticket => ticket.passengers = passengers);\n    });\n  }\n\n  if (inbound) {\n    addDataToServices(inbound);\n\n    inbound.forEach(service => {\n      service.passengers = passengers;\n      service.tickets.forEach(ticket => ticket.passengers = passengers);\n    });\n  }\n\n  if (outbound) {\n    addQualifiers(outbound);\n  }\n\n  if (inbound) {\n    addQualifiers(inbound);\n  }\n\n  return {\n    results: state.results,\n    outbound,\n    inbound,\n    passengers: search.adults + search.children,\n    selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n    selectedOutboundTicket: getSelectedOutboundTicket(state.results, state.selection),\n    selectedInboundService: getSelectedInboundService(state.results, state.selection),\n    selectedInboundTicket: getSelectedInboundTicket(state.results, state.selection),\n    search: state.search,\n    screen: state.screen,\n    selection: state.selection,\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundService: id => dispatch(changeSelectedOutboundService(id)),\n  selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n  selectInboundService: id => dispatch(changeSelectedInboundService(id)),\n  selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n  earlierOutboundServices: () => dispatch(earlierOutboundServices()),\n  laterOutboundServices: () => dispatch(laterOutboundServices()),\n  earlierInboundServices: () => dispatch(earlierInboundServices()),\n  laterInboundServices: () => dispatch(laterInboundServices()),\n})\n\nclass Results extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      serviceInfo: false,\n      termsAndConditions: false,\n      priceBreakdown: false,\n    };\n  }\n\n  getTicketPresentationData(tickets) {\n    let cheapestService = tickets.reduce((result, ticket) => (ticket.price < result.price ? ticket : result));\n    let cheapestFirst = tickets.filter(ticket => ticket.isFirst).reduce((result, ticket) => (ticket.price < result.price ? ticket : result));\n    let cheapestFlexible = tickets.filter(ticket => ticket.isFlexible).reduce((result, ticket) => (ticket.price < result.price ? ticket : result));\n\n    // Uniqueness\n    if (cheapestService) {\n      if (cheapestFirst) {\n        if (cheapestFirst.id === cheapestService.id) {\n          cheapestFirst = null;\n        }  \n      }\n      if (cheapestFlexible) {\n        if (cheapestFlexible.id === cheapestService.id || cheapestFlexible.id === cheapestFirst.id) {\n          cheapestFlexible = null;\n        }  \n      }\n    }\n  \n    let highlights = [];\n\n    if (cheapestService) {\n      highlights.push({\n        title: 'Cheapest ticket',\n        ticket: cheapestService,\n      });\n    }\n    if (cheapestFirst) {\n      highlights.push({\n        title: 'Cheapest 1st class ticket',\n        ticket: cheapestFirst,\n      });\n    }\n    if (cheapestFlexible) {\n      highlights.push({\n        title: 'Cheapest flexible ticket',\n        ticket: cheapestFlexible,\n      });\n    }\n    \n    const otherFixed = tickets\n      .filter(ticket => !ticket.isFlexible)\n      .filter(ticket => !highlights.some(highlight => highlight.ticket.id === ticket.id));\n\n    const otherFlexible = tickets\n      .filter(ticket => ticket.isFlexible)\n      .filter(ticket => !highlights.some(highlight => highlight.ticket.id === ticket.id));\n\n    const categories = [];\n\n    if (otherFixed.length > 0) {\n      categories.push({\n        title: `More fixed tickets from ${formatPrice(Math.min(...otherFixed.map(ticket => ticket.price)))}`,\n        tickets: otherFixed,\n      });\n    }\n\n    if (otherFlexible.length > 0) {\n      categories.push({\n        title: `More flexible tickets from ${formatPrice(Math.min(...otherFlexible.map(ticket => ticket.price)))}`,\n        tickets: otherFlexible,\n      });\n    }\n\n    return {\n      highlights,\n      categories,\n    };\n  }\n\n  getResultsHeader() { \n    const { search, screen } = this.props;\n\n    let data = {\n      ticketType: search.ticketType,\n      time: {\n        outbound: search.outbound.time.format('ddd DD MMM'),\n      },\n    };\n\n    if (search.ticketType === 1) {\n      if (screen === 1 || screen === 2) {\n        data.stage = 0;\n      } else if (screen === 3 || screen === 4) {\n        data.stage = 1;\n      }\n      data.time.inbound = search.inbound.time.format('ddd DD MMM');\n    } else if (search.ticketType === 2) {\n      if (screen === 1 || screen === 2) {\n        data.stage = 0;\n      } else if (screen === 3 || screen === 4) {\n        data.stage = 1;\n      }\n      data.time.inbound = 'Open return';\n    }\n\n    return <ResultsHeader data={data} />;\n  }\n\n  getEarlierButton(onClick) {\n    return (\n      <div className=\"Results-earlier\" onClick={onClick}>\n        <div className=\"Results-earlier-text\">\n          Earlier trains\n        </div>\n        <LargeChevron className=\"Results-earlier-chevron\" />\n      </div>\n    );\n  }\n\n  getLaterButton(onClick) {\n    return (\n      <div className=\"Results-later\" onClick={onClick}>\n        <div className=\"Results-later-text\">\n          Later trains\n        </div>\n        <LargeChevron className=\"Results-later-chevron\" />\n      </div>\n    );\n  }\n\n  getOutboundServiceContent() {\n    const { outbound, selectOutboundService, earlierOutboundServices, laterOutboundServices } = this.props;\n\n    return (\n      <div className=\"Results-content-fullwidth\">\n        {this.getEarlierButton(earlierOutboundServices)}\n        <ServiceResultList data={outbound} onClick={id => { selectOutboundService(id); this.goToNextScreen() }} onServiceInfoClick={() => this.setState({ serviceInfo: true })} />\n        {this.getLaterButton(laterOutboundServices)}\n      </div>\n    )\n  }\n\n  getOutboundTicketContent() {\n    const { selectOutboundTicket, selectedOutboundService, inbound } = this.props;\n  \n    const data = this.getTicketPresentationData(selectedOutboundService.tickets);\n\n    const onClick = id => {\n      const { changeScreen, inbound } = this.props;\n\n      selectOutboundTicket(id);\n      // doesnt use selectedOutboundTicket because it wont update before here\n      if (inbound && !selectedOutboundService.tickets.find(ticket => ticket.id === id).isReturn) {\n        changeScreen(3);\n      } else {\n        changeScreen(5);\n      }\n    };\n\n    return (\n      <div className=\"Results-content\">\n        <TicketResultList data={data} onClick={onClick} onPriceBreakdownClick={id => this.setState({ priceBreakdown: id })} onConditionsClick={() => this.setState({ termsAndConditions: true })} />\n      </div>\n    )\n  }\n\n  getReturnServiceContent() {\n    const { inbound, selectInboundService, laterInboundServices, earlierInboundServices } = this.props;\n\n    return (\n      <div className=\"Results-content-fullwidth\">\n        {this.getEarlierButton(earlierInboundServices)}\n        <ServiceResultList data={inbound} onClick={id => { selectInboundService(id); this.goToNextScreen() }} onServiceInfoClick={() => this.setState({ serviceInfo: true })}/>\n        {this.getLaterButton(laterInboundServices)}\n      </div>\n    );\n  }\n\n  getReturnTicketContent() {\n    const { selectInboundTicket, selectedInboundService } = this.props;\n\n    const data = this.getTicketPresentationData(selectedInboundService.tickets);\n\n    return (\n      <div className=\"Results-content\">\n        <TicketResultList data={data} onClick={id => { selectInboundTicket(id); this.goToNextScreen() }} onPriceBreakdownClick={id => this.setState({ priceBreakdown: id })} onConditionsClick={() => this.setState({ termsAndConditions: true })} />\n      </div>\n    )\n  }\n\n  getHeader() { \n    const { search } = this.props;\n\n    const data = {\n      station: {\n        origin: search.from,\n        destination: search.to,\n      },\n      ticketType: search.ticketType,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToPreviousScreen()} />\n    );\n  }\n\n  getPreviousScreenId() {\n    const { screen, selectOutboundService, selectOutboundTicket, selectInboundService } = this.props;\n\n    switch (screen) {\n      case 2:\n        selectOutboundService(null);\n      case 3:\n        selectOutboundTicket(null);\n      case 4:\n        selectInboundService(null);\n    }\n\n    return screen - 1;\n  }\n\n  goToPreviousScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getPreviousScreenId());\n  }\n\n  getNextScreenId() {\n    const { screen } = this.props;\n\n    switch (screen) {\n      // Case 2 is covered in its own fucntion\n      case 1:\n        return 2;\n      case 3:\n        return 4;\n      case 4:\n        return 5;\n    }\n  }\n\n  goToNextScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getNextScreenId());\n  }\n\n  getContent() {\n    const { screen } = this.props;\n\n    switch (screen) {\n      case 1:\n        return this.getOutboundServiceContent();\n      case 2:\n        return this.getOutboundTicketContent();\n      case 3:\n        return this.getReturnServiceContent();\n      case 4:\n        return this.getReturnTicketContent();\n      default:\n        return 'Oh no';\n    }\n  }\n\n  getFooter() {\n    const { screen, selectedOutboundTicket } = this.props;\n\n    if (screen === 3 || screen === 4) {\n      return (\n        <Footer>\n          <div className=\"Results-footer\">\n            <div className=\"Results-footer-left\">\n              <b>Outbound</b> {selectedOutboundTicket.name} x{selectedOutboundTicket.passengers}\n            </div>\n            <div className=\"Results-footer-right\">\n              {formatPrice(selectedOutboundTicket.price)}\n            </div>\n          </div>\n        </Footer>\n      );\n    }\n\n    return null;\n  }\n\n  getPriceBreakdownService(service, ticket) {\n    if (!service) {\n      return null;\n    }\n\n    return (\n      <div className=\"PriceBreakdown-service\">\n        <div className=\"PriceBreakdown-service-header\">\n          <div className=\"PriceBreakdown-service-header-left\">\n            <div className=\"PriceBreakdown-service-title\">\n              {service.station.origin} - {service.station.destination}\n            </div>\n            <div className=\"PriceBreakdown-service-subtitle\">\n              {service.time.departure.format('ddd DD MMM')}, {service.time.departure.format('HH:mm')}-{service.time.arrival.format('HH:mm')}\n            </div>\n          </div>\n          <div className=\"PriceBreakdown-service-header-right\">\n            <LargeChevron className=\"PriceBreakdown-chevron\" />\n          </div>\n        </div>\n        <div className=\"PriceBreakdown-service-ticketName\">\n          {ticket.name}\n        </div>\n        <div className=\"PriceBreakdown-service-row\">\n          <div className=\"PriceBreakdown-service-row-quantity\">\n            {service.passengers}x\n          </div>\n          <div className=\"PriceBreakdown-service-row-main\">\n            Passengers\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {ticket.isDiscounted ? formatPrice(ticket.price * 1.2) : formatPrice(ticket.price)}\n          </div>\n        </div>\n        {ticket.isDiscounted && <div className=\"PriceBreakdown-service-row discount\">\n          <div className=\"PriceBreakdown-service-row-main\">\n            Split ticket discount\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {formatPrice(ticket.price * -0.2)}\n          </div>\n        </div>}\n        <div className=\"PriceBreakdown-service-row total\">\n          <div className=\"PriceBreakdown-service-row-main\">\n            Total\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {formatPrice(ticket.price)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  getPriceBreakdown() {\n    const { selectedOutboundService, selectedInboundService, selectedOutboundTicket, selectedInboundTicket, screen } = this.props;\n    const { priceBreakdown } = this.state;\n\n    return (\n      <div className=\"PriceBreakdown\">\n        <div className=\"PriceBreakdown-header\">\n          Price breakdown\n        </div>\n        {this.getPriceBreakdownService(selectedOutboundService, screen < 3 ? selectedOutboundService.tickets[priceBreakdown] : selectedOutboundTicket)}\n        {screen >= 3 ? this.getPriceBreakdownService(selectedInboundService, screen < 5 ? selectedInboundService.tickets[priceBreakdown] : selectedInboundTicket) : null}\n      </div>\n    );\n  }\n\n  render() {\n    const { serviceInfo, termsAndConditions, priceBreakdown } = this.state;\n\n    return (\n      <React.Fragment>\n        <div className=\"Results\">\n          <div className={`${serviceInfo ? '' : 'hidden'}`}>\n            <Header data={{ title: 'Service information' }} onBackClick={() => this.setState({ serviceInfo: false })} />\n            <img src={serviceInfoScreen} className=\"Results-fakeContent\" />\n          </div>\n          <div className={`${termsAndConditions ? '' : 'hidden'}`}>\n            <Header data={{ title: 'Terms and conditions' }} onBackClick={() => this.setState({ termsAndConditions: false })} />\n            <img src={termsAndConditionsScreen} className=\"Results-fakeContent\" />\n          </div>\n          <div className={`${termsAndConditions || serviceInfo ? 'hidden' : ''}`}>\n            {this.getHeader()}\n            {this.getResultsHeader()}\n            {this.getContent()}\n            {this.getFooter()}\n          </div>\n        </div>\n        {priceBreakdown !== false && <div className=\"Results-modal\" onClick={() => this.setState({ priceBreakdown: false })}>\n          {this.getPriceBreakdown()}\n        </div>}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Results);\n","import React from 'react';\n\nimport './ResultsHeaderThree.css';\n\nexport default class ResultsHeaderThree extends React.Component {\n  render() {\n    const { title, subtitle } = this.props;\n\n    return (\n      <React.Fragment>\n        <div className=\"ResultsHeaderThree\">\n          <div className=\"ResultsHeaderThree-title\">\n            {title}\n          </div>\n          <div className=\"ResultsHeaderThree-subtitle\">\n            {subtitle}\n          </div>\n        </div>\n        <div className=\"ResultsHeaderThree-padder\" />\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\n\nimport './ResultsHeaderThreeMix.css';\n\nexport default class ResultsHeaderThree extends React.Component {\n  render() {\n    const { legNumber, outboundTime, inboundTime } = this.props;\n\n    return (\n      <React.Fragment>\n        <div className=\"ResultsHeaderThreeMix\">\n          <div className={`ResultsHeaderThreeMix-group ${legNumber === 0 ? 'selected' : ''}`}>\n            <div className=\"ResultsHeaderThreeMix-title\">\n              1 - Outbound\n            </div>\n            <div className=\"ResultsHeaderThreeMix-subtitle\">\n              {outboundTime}\n            </div>\n          </div>\n          <div className={`ResultsHeaderThreeMix-group ${legNumber === 1 ? 'selected' : ''}`}>\n            <div className=\"ResultsHeaderThreeMix-title\">\n              2 - Return\n            </div>\n            <div className=\"ResultsHeaderThreeMix-subtitle\">\n              {inboundTime}\n            </div>\n          </div>\n        </div>\n        <div className=\"ResultsHeaderThreeMix-padder\" />\n      </React.Fragment>\n    );\n  }\n}\n","const screen = {\n  userCaseMenu: 100,\n  search: 0,\n  serviceOutbound: 1,\n  serviceInbound: 2,\n  ticketHighlights: 3,\n  ticketOutbound: 10,\n  ticketInbound: 11,\n  review: 5,\n  payment: 6,\n  confirmation: 7,\n};\n\nexport default screen;","import React from 'react';\n\nimport LargeChevron from '../../../data/icon/large-chevron';\n\nclass ResultsThreeServiceEarlier extends React.Component {\n  render() {\n    const { onClick } = this.props;\n\n    return (\n      <div className=\"Results-earlier\" onClick={onClick}>\n        <div className=\"Results-earlier-text\">\n          Earlier trains\n        </div>\n        <LargeChevron className=\"Results-earlier-chevron\" />\n      </div>\n    );\n  }\n}\n\nexport default ResultsThreeServiceEarlier;\n","import React from 'react';\n\nimport LargeChevron from '../../../data/icon/large-chevron';\n\nclass ResultsThreeServiceLater extends React.Component {\n  render() {\n    const { onClick } = this.props;\n\n    return (\n      <div className=\"Results-later\" onClick={onClick}>\n        <div className=\"Results-later-text\">\n          Later trains\n        </div>\n        <LargeChevron className=\"Results-later-chevron\" />\n      </div>\n    );\n  }\n}\n\nexport default ResultsThreeServiceLater;","import React from 'react';\nimport ServiceResultList from '../../../ui/ServiceResultList';\nimport screen from '../../../data/screen';\nimport { connect } from 'react-redux';\nimport { changeSelectedOutboundService, changeScreen } from '../../../redux/actions';\nimport { earlierOutboundServices, laterOutboundServices } from '../../../redux/actions';\n\nimport ResultsThreeServiceEarlier from '../ResultsThreeServiceEarlier';\nimport ResultsThreeServiceLater from '../ResultsThreeServiceLater';\n\nconst mapStateToProps = null;\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundService: id => dispatch(changeSelectedOutboundService(id)),\n  earlierOutboundServices: () => dispatch(earlierOutboundServices()),\n  laterOutboundServices: () => dispatch(laterOutboundServices()),\n})\n\nclass ResultsThreeServiceOutbound extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onServiceSelect = this.onServiceSelect.bind(this);\n  }\n\n  onServiceSelect(id) {\n    const { servicesInbound } = this.props;\n    const { changeScreen, selectOutboundService } = this.props;\n\n    selectOutboundService(id);\n    if (servicesInbound) {\n      changeScreen(screen.serviceInbound);\n    } else {\n      changeScreen(screen.ticketHighlights);\n    }\n  }\n\n  render() {\n    const { servicesOutbound, servicesInbound, onServiceInfoClick } = this.props;\n    const { earlierOutboundServices, laterOutboundServices } = this.props;\n\n    const presentationServices = [];\n\n    // In return case, adjust prices to be full journey\n    // i.e. if there are inbound journeys\n    if (servicesInbound) {\n      // Calculate minima from potential inbound tickets\n      const inboundTickets = [].concat(...servicesInbound.map(service => service.tickets));\n      const inboundSingles = inboundTickets.filter(ticket => !ticket.isReturn);\n      const cheapestInboundLegStandard = Math.min(...inboundSingles.filter(ticket => !ticket.isFirst).map(ticket => ticket.price));\n      const cheapestInboundLegFirst = Math.min(...inboundSingles.filter(ticket => ticket.isFirst).map(ticket => ticket.price));\n     \n      // For each service...\n      servicesOutbound.forEach(service => {\n        const outboundReturns = service.tickets.filter(ticket => ticket.isReturn);\n        const cheapestOutboundReturnStandard = Math.min(...outboundReturns.filter(ticket => !ticket.isFirst).map(ticket => ticket.price));\n        const cheapestOutboundReturnFirst = Math.min(...outboundReturns.filter(ticket => ticket.isFirst).map(ticket => ticket.price));\n        // Consider whether a return is cheaper than two singles\n        presentationServices.push({\n          ...service,\n          price: {\n            standard: Math.min(service.price.standard + cheapestInboundLegStandard, cheapestOutboundReturnStandard),\n            first: Math.min(service.price.first + cheapestInboundLegFirst, cheapestOutboundReturnFirst),\n          },\n        });\n      });\n    } else {\n      servicesOutbound.forEach(service => {\n        presentationServices.push({\n          ...service,\n        });\n      });\n    };\n\n    return (\n      <div className=\"ResultsThreeServiceOutbound\">\n        <ResultsThreeServiceEarlier onClick={earlierOutboundServices} />\n        <ServiceResultList data={presentationServices} onClick={this.onServiceSelect} onServiceInfoClick={onServiceInfoClick} />\n        <ResultsThreeServiceLater onClick={laterOutboundServices} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreeServiceOutbound);\n","import React from 'react';\nimport ServiceResultList from '../../../ui/ServiceResultList';\nimport screen from '../../../data/screen';\nimport { connect } from 'react-redux';\nimport { changeSelectedInboundService, changeScreen } from '../../../redux/actions';\nimport { earlierInboundServices, laterInboundServices } from '../../../redux/actions';\nimport ResultsThreeServiceEarlier from '../ResultsThreeServiceEarlier';\nimport ResultsThreeServiceLater from '../ResultsThreeServiceLater';\nimport { getSelectedOutboundService } from '../../../utility/get';\n\nconst mapStateToProps = state => ({\n  selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectInboundService: id => dispatch(changeSelectedInboundService(id)),\n  earlierInboundServices: () => dispatch(earlierInboundServices()),\n  laterInboundServices: () => dispatch(laterInboundServices()),\n});\n\nclass ResultsThreeServiceInbound extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onServiceSelect = this.onServiceSelect.bind(this);\n  }\n\n  onServiceSelect(id) {\n    const { changeScreen, selectInboundService } = this.props;\n\n    selectInboundService(id);\n    changeScreen(screen.ticketHighlights);\n  }\n\n  render() {\n    const { servicesInbound, onServiceInfoClick } = this.props;\n    const { selectedOutboundService, laterInboundServices, earlierInboundServices } = this.props;\n\n    const presentationServices = [];\n    \n     // Adjust prices based on selected outbound service\n    servicesInbound.forEach(service => {\n      const outboundReturns = selectedOutboundService.tickets.filter(ticket => ticket.isReturn);\n      const cheapestOutboundReturnStandard = Math.min(...outboundReturns.filter(ticket => !ticket.isFirst).map(ticket => ticket.price));\n      const cheapestOutboundReturnFirst = Math.min(...outboundReturns.filter(ticket => ticket.isFirst).map(ticket => ticket.price));\n      // Consider whether a return is cheaper than two singles\n      presentationServices.push({\n        ...service,\n        price: {\n          standard: Math.min(selectedOutboundService.price.standard + service.price.standard, cheapestOutboundReturnStandard),\n          first: Math.min(selectedOutboundService.price.first + service.price.first, cheapestOutboundReturnFirst),\n        },\n      });\n    });\n\n    return (\n      <div className=\"ResultsThreeService\">\n        <ResultsThreeServiceEarlier onClick={earlierInboundServices} />\n        <ServiceResultList data={presentationServices} onClick={this.onServiceSelect} onServiceInfoClick={onServiceInfoClick}/>\n        <ResultsThreeServiceLater onClick={laterInboundServices} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreeServiceInbound);\n","import React from 'react';\nimport TicketResult from './TicketResult';\nimport LargeChevron from '../data/icon/large-chevron';\n\nimport './TicketResultList.css';\n\nexport default class TicketResultList extends React.Component {\n  presentHighlights(highlights) {  \n    const { onHighlightClick, onConditionsClick, onPriceBreakdownClick } = this.props;\n\n    return (\n      <div className=\"TicketResultList-highlights\">\n        {highlights.map((ticket, index) => (\n          <TicketResult className=\"TicketResultList-ticket\" key={index} data={ticket} onClick={() => onHighlightClick(ticket.idOut, ticket.idIn)} onConditionsClick={() => onConditionsClick(ticket.id)} onPriceBreakdownClick={() => onPriceBreakdownClick(ticket.idOut, ticket.idIn)} />\n        ))}\n      </div>\n    )\n  }\n\n  render() {\n    const { data, onMixClick, ticketType } = this.props;\n\n    const { highlights, categories } = data;\n    \n    const highlightHasDiscount = highlights.some(ticket => ticket.isDiscounted);\n    const categoriesHaveDiscount = categories.some(category => category.tickets.some(ticket => ticket.isDiscounted));\n    const isSomeDiscount = highlightHasDiscount || categoriesHaveDiscount;\n\n    return (\n      <div className=\"TicketResultList\">\n        {isSomeDiscount && <div className=\"TicketResultList-discountMessage\">\n          Some of these tickets are discounted — check the price breakdown for more information.\n        </div>}\n        <div className=\"TicketResultList-highlight-title\">\n          Recommended tickets\n        </div>\n        {this.presentHighlights(highlights)}\n        <div className=\"TicketResultList-mix\" onClick={onMixClick}>\n          <div className=\"TicketResultList-mix-title\">\n            {ticketType === 1 ? 'Mix and match ticket options' : 'More tickets'}\n          </div>\n          <LargeChevron className=\"TicketResultList-mix-chevron\" />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport HighlightScreen from '../../../ui/HighlightScreen';\nimport { connect } from 'react-redux';\nimport { changeSelectedOutboundTicket, changeSelectedInboundTicket, changeScreen } from '../../../redux/actions';\nimport { getSelectedInboundService, getSelectedOutboundService } from '../../../utility/get';\n\nconst mapStateToProps = state => ({\n  ticketType: state.search.ticketType,\n  selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n  selectedInboundService: getSelectedInboundService(state.results, state.selection),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n  selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n});\n\nclass ResultsThreeTicketHighlights extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onHighlightClick = this.onHighlightClick.bind(this);\n    this.onMixClick = this.onMixClick.bind(this);\n  }\n\n  getCheapestForSingle(tickets) {\n    const cheapestPrice = Math.min(...tickets.map(ticket => ticket.price));\n    const cheapest = tickets.find(ticket => ticket.price === cheapestPrice);\n\n    if (!cheapest) return null;\n\n    return {\n      idOut: cheapest.id,\n      idIn: null,\n      descriptionLines: [\n        cheapest.name,\n      ],\n      price: cheapestPrice,\n      isDiscounted: cheapest.isDiscounted,\n      passengers: cheapest.passengers,\n    };\n  }\n\n  getCheapestForReturn(outTickets, inTickets) {\n    const twoLegTickets = outTickets.filter(ticket => ticket.isReturn);\n    const outLegTickets = outTickets.filter(ticket => !ticket.isReturn);\n    const inLegTickets = inTickets;\n\n    const cheapestOutPrice = Math.min(...outLegTickets.map(ticket => ticket.price));\n    const cheapestInPrice = Math.min(...inLegTickets.map(ticket => ticket.price));\n    const cheapestTwoLegPrice = Math.min(...twoLegTickets.map(ticket => ticket.price));\n\n    if (cheapestOutPrice + cheapestInPrice < cheapestTwoLegPrice) {\n      // Two tickets are cheaper than one\n      const cheapestOut = outLegTickets.find(ticket => ticket.price === cheapestOutPrice);\n      const cheapestIn = inLegTickets.find(ticket => ticket.price === cheapestInPrice);\n\n      if (!cheapestOut || !cheapestIn) return null;\n\n      return {\n        idOut: cheapestOut.id,\n        idIn: cheapestIn.id,\n        descriptionLines: [\n          `Outbound: ${cheapestOut.name}`,\n          `Inbound: ${cheapestIn.name}`,\n        ],\n        price: cheapestOutPrice + cheapestInPrice,\n        isDiscounted: cheapestOut.isDiscounted || cheapestIn.isDiscounted,\n        passengers: cheapestOut.passengers,\n      };\n    } else {\n      // One ticket is cheaper than two\n      const cheapestTwoLeg = twoLegTickets.find(ticket => ticket.price === cheapestTwoLegPrice);\n\n      if (!cheapestTwoLeg) return null;\n\n      return {\n        idOut: cheapestTwoLeg.id,\n        idIn: null,\n        descriptionLines: [\n          cheapestTwoLeg.name,\n        ],\n        price: cheapestTwoLeg.price,\n        isDiscounted: cheapestTwoLeg.isDiscounted,\n        passengers: cheapestTwoLeg.passengers,\n      };\n    }\n  }\n\n  getTicketHighlightsData() {\n    const { ticketType, selectedOutboundService, selectedInboundService } = this.props;\n\n    let cheapest;\n    let cheapestFirst;\n    let cheapestFlexible;\n    let bestValue;\n\n    if (selectedInboundService) {\n      cheapest = this.getCheapestForReturn(\n        selectedOutboundService.tickets,\n        selectedInboundService.tickets,\n      );\n      cheapestFirst = this.getCheapestForReturn(\n        selectedOutboundService.tickets.filter(ticket => ticket.isFirst),\n        selectedInboundService.tickets.filter(ticket => ticket.isFirst),\n      );\n      cheapestFlexible = this.getCheapestForReturn(\n        selectedOutboundService.tickets.filter(ticket => ticket.isFlexible),\n        selectedInboundService.tickets.filter(ticket => ticket.isFlexible),\n      );\n\n      // Crappy logic to find best value - it vaguely works\n   \n      if (cheapest) {\n        const cheapestFirstStd = this.getCheapestForReturn(\n          selectedOutboundService.tickets.filter(ticket => ticket.isFirst),\n          selectedInboundService.tickets.filter(ticket => !ticket.isFirst),\n        );\n        const cheapestStdFirst = this.getCheapestForReturn(\n          selectedOutboundService.tickets.filter(ticket => !ticket.isFirst),\n          selectedInboundService.tickets.filter(ticket => ticket.isFirst),\n        );\n        let cheapestMixed;\n        if (cheapestFirstStd) {\n          if (cheapestStdFirst) {\n            cheapestMixed = cheapestFirstStd.price < cheapestStdFirst.price ? cheapestFirstStd : cheapestStdFirst;\n          } else {\n            cheapestMixed = cheapestFirstStd;\n          }\n        } else {\n          if (cheapestStdFirst) {\n            cheapestMixed = cheapestStdFirst;\n          }\n        }\n        if (cheapestFirst && cheapestFirst.price < cheapest.price * 1.15) {\n          bestValue = cheapestFirst;\n        } else if (cheapestMixed && cheapestMixed.price < cheapest.price * 1.15) {\n          bestValue = cheapestMixed;\n        }\n      }\n    } else {\n      cheapest = this.getCheapestForSingle(selectedOutboundService.tickets);\n      cheapestFirst = this.getCheapestForSingle(selectedOutboundService.tickets.filter(ticket => ticket.isFirst));\n      cheapestFlexible = this.getCheapestForSingle(selectedOutboundService.tickets.filter(ticket => ticket.isFlexible));\n    }\n\n    let highlights = [];\n\n    const idsAreSame = (dataA, dataB) => dataA && dataB && dataA.idOut === dataB.idOut && dataA.idIn === dataB.idIn;\n\n    if (cheapest) {\n      if (ticketType === 0) {\n        cheapest.title = 'Cheapest ticket';\n      } else {\n        cheapest.title = 'Cheapest return';\n      }\n      highlights.push(cheapest);\n    }\n\n    if (bestValue && !idsAreSame(bestValue, cheapest)) {\n      if (ticketType === 0) {\n        bestValue.title = 'Best value ticket';\n      } else {\n        bestValue.title = 'Best value return';\n      }\n      highlights.unshift(bestValue);\n    }\n\n    if (cheapestFirst && !idsAreSame(cheapestFirst, cheapest) && !idsAreSame(cheapestFirst, bestValue)) {\n      if (ticketType === 0) {\n        cheapestFirst.title = 'Cheapest 1st class ticket';\n      } else {\n        cheapestFirst.title = 'Cheapest 1st class return';\n      }\n      highlights.push(cheapestFirst);\n    }\n\n    if (cheapestFlexible && !idsAreSame(cheapestFlexible, cheapest) && !idsAreSame(cheapestFlexible, cheapestFirst) && !idsAreSame(cheapestFlexible, bestValue)) {\n      if (ticketType === 0) {\n        cheapestFlexible.title = 'Cheapest flexible ticket';\n      } else {\n        cheapestFlexible.title = 'Cheapest flexible return';\n      }\n      highlights.push(cheapestFlexible);\n    }\n\n    return {\n      highlights,\n      categories: [],\n    };\n  }\n\n  onHighlightClick(idOut, idIn) {\n    const { selectOutboundTicket, selectInboundTicket, changeScreen } = this.props;\n\n    selectOutboundTicket(idOut);\n    selectInboundTicket(idIn);\n    changeScreen(5);\n  }\n\n  onMixClick() {\n    const { changeScreen } = this.props;\n\n    changeScreen(10)\n  }\n\n  render() {\n    const { onConditionsClick, onPriceBreakdownClick } = this.props;\n    const { ticketType } = this.props;\n\n    const data = this.getTicketHighlightsData();\n\n    return (\n      <div className=\"Results-content\">\n        <HighlightScreen ticketType={ticketType} data={data} onHighlightClick={this.onHighlightClick} onMixClick={this.onMixClick} onPriceBreakdownClick={onPriceBreakdownClick} onConditionsClick={onConditionsClick} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreeTicketHighlights);\n","import React from 'react';\nimport TicketResultList from '../../../ui/TicketResultList';\nimport screen from '../../../data/screen';\nimport { connect } from 'react-redux';\nimport { changeSelectedOutboundTicket, changeScreen } from '../../../redux/actions';\nimport { getSelectedOutboundService } from '../../../utility/get';\n\nconst mapStateToProps = state => ({\n  ticketType: state.search.ticketType,\n  selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n});\n\nclass ResultsThreeTicketOutbound extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onTicketSelect = this.onTicketSelect.bind(this);\n  }\n\n  onTicketSelect(id) {\n    const { ticketType, selectedOutboundService } = this.props;\n    const { selectOutboundTicket, changeScreen } = this.props;\n\n    selectOutboundTicket(id);\n    if (ticketType !== 1 || selectedOutboundService.tickets.find(ticket => ticket.id === id).isReturn) {\n      changeScreen(screen.review);\n    } else {\n      changeScreen(screen.ticketInbound);\n    }\n  }\n\n  render() {\n    const { onPriceBreakdownClick, onConditionsClick } = this.props;\n    const { selectedOutboundService } = this.props;\n\n    const data = selectedOutboundService.tickets.map(ticket => (\n      {\n        id: ticket.id,\n        title: ticket.name,\n        price: ticket.price,\n        descriptionLines: [],\n        passengers: ticket.passengers,\n        isDiscounted: ticket.isDiscounted,\n      }\n    ));\n\n    return (\n      <div className=\"Results-content\">\n        <TicketResultList data={data} onClick={this.onTicketSelect} onPriceBreakdownClick={onPriceBreakdownClick} onConditionsClick={onConditionsClick} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreeTicketOutbound);\n","import React from 'react';\nimport TicketResultList from '../../../ui/TicketResultList';\nimport screen from '../../../data/screen';\nimport { connect } from 'react-redux';\nimport { changeSelectedOutboundTicket, changeSelectedInboundTicket, changeScreen } from '../../../redux/actions';\nimport { getSelectedInboundService } from '../../../utility/get';\n\nconst mapStateToProps = state => ({\n  selectedInboundService: getSelectedInboundService(state.results, state.selection),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n  selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n})\n\nclass ResultsThreeTicketInbound extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onTicketSelect = this.onTicketSelect.bind(this);\n  }\n\n  onTicketSelect(id) {\n    const { selectInboundTicket, changeScreen } = this.props;\n\n    selectInboundTicket(id);\n    changeScreen(screen.review);\n  }\n\n  render() {\n    const { onPriceBreakdownClick, onConditionsClick } = this.props;\n    const { selectedInboundService } = this.props;\n\n    const data = selectedInboundService.tickets.map(ticket => (\n      {\n        id: ticket.id,\n        title: ticket.name,\n        price: ticket.price,\n        descriptionLines: [],\n        passengers: ticket.passengers,\n        isDiscounted: ticket.isDiscounted,\n      }\n    ));\n\n    return (\n      <div className=\"Results-content\">\n        <TicketResultList data={data} onClick={this.onTicketSelect} onPriceBreakdownClick={onPriceBreakdownClick} onConditionsClick={onConditionsClick} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreeTicketInbound);\n","import React from 'react';\nimport { formatPrice } from '../../../utility/format';\nimport { connect } from 'react-redux';\nimport { getSelectedOutboundService, getSelectedInboundService } from '../../../utility/get';\n\nimport LargeChevron from '../../../data/icon/large-chevron';\n\nconst mapStateToProps = state => ({\n  ticketType: state.search.ticketType,\n  selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n  selectedInboundService: getSelectedInboundService(state.results, state.selection),\n});\n\nconst mapDispatchToProps = null;\n\nclass ResultsThreePriceBreakdown extends React.Component {\n  renderService(service, ticket) {\n    if (!service) {\n      return null;\n    }\n\n    return (\n      <div className=\"PriceBreakdown-service\">\n        <div className=\"PriceBreakdown-service-header\">\n          <div className=\"PriceBreakdown-service-header-left\">\n            <div className=\"PriceBreakdown-service-title\">\n              {service.station.origin} - {service.station.destination}\n            </div>\n            <div className=\"PriceBreakdown-service-subtitle\">\n              {service.time.departure.format('ddd DD MMM')}, {service.time.departure.format('HH:mm')}-{service.time.arrival.format('HH:mm')}\n            </div>\n          </div>\n          <div className=\"PriceBreakdown-service-header-right\">\n            <LargeChevron className=\"PriceBreakdown-chevron\" />\n          </div>\n        </div>\n        <div className=\"PriceBreakdown-service-ticketName\">\n          {ticket.name}\n        </div>\n        <div className=\"PriceBreakdown-service-row\">\n          <div className=\"PriceBreakdown-service-row-quantity\">\n            {service.passengers}x\n          </div>\n          <div className=\"PriceBreakdown-service-row-main\">\n            Passengers\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {ticket.isDiscounted ? formatPrice(ticket.price * 1.2) : formatPrice(ticket.price)}\n          </div>\n        </div>\n        {ticket.isDiscounted && <div className=\"PriceBreakdown-service-row discount\">\n          <div className=\"PriceBreakdown-service-row-main\">\n            Split ticket discount\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {formatPrice(ticket.price * -0.2)}\n          </div>\n        </div>}\n        <div className=\"PriceBreakdown-service-row total\">\n          <div className=\"PriceBreakdown-service-row-main\">\n            Total\n          </div>\n          <div className=\"PriceBreakdown-service-row-price\">\n            {formatPrice(ticket.price)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { priceBreakdownOutId, priceBreakdownInId } = this.props;\n    const { selectedOutboundService, selectedInboundService } = this.props;\n\n    return (\n      <div className=\"PriceBreakdown\">\n        <div className=\"PriceBreakdown-header\">\n          Price breakdown\n        </div>\n        {priceBreakdownOutId !== null ? this.renderService(selectedOutboundService, selectedOutboundService.tickets[priceBreakdownOutId]) : null}\n        {priceBreakdownInId !== null ? this.renderService(selectedInboundService, selectedInboundService.tickets[priceBreakdownInId]) : null}\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThreePriceBreakdown);\n","import React from 'react';\nimport ResultsHeaderThree from '../../ui/ResultsHeaderThree';\nimport ResultsHeaderThreeMix from '../../ui/ResultsHeaderThreeMix';\nimport Header from '../../ui/Header';\nimport { connect } from 'react-redux';\nimport { changeScreen, changeSelectedInboundService, changeSelectedOutboundService, changeSelectedOutboundTicket, changeSelectedInboundTicket } from '../../redux/actions';\nimport { getSelectedOutboundService, getSelectedOutboundTicket, getSelectedInboundService, getSelectedInboundTicket } from '../../utility/get';\nimport screens from '../../data/screen';\n\nimport serviceInfoScreen from '../../data/serviceInfo.png';\nimport termsAndConditionsScreen from '../../data/termsAndConditions.png';\n\nimport './ResultsThree.css';\n\nimport ResultsThreeServiceOutbound from './ResultsThreeServiceOutbound';\nimport ResultsThreeServiceInbound from './ResultsThreeServiceInbound';\nimport ResultsThreeTicketHighlights from './ResultsThreeTicketHighlights';\nimport ResultsThreeTicketOutbound from './ResultsThreeTicketOutbound';\nimport ResultsThreeTicketInbound from './ResultsThreeTicketInbound';\nimport ResultsThreePriceBreakdown from './ResultsThreePriceBreakdown';\n\nconst getCheapestTicketPrice = tickets => {\n  const cheapest = Math.min(...tickets.map(ticket => ticket.price));\n  return cheapest === Infinity ? null : cheapest;\n};\n\nconst addDataToServices = services => {\n  services.forEach(service => {\n    if (service.tickets.length > 0) {\n      service.price = {\n        standard: getCheapestTicketPrice(service.tickets.filter(ticket => !ticket.isFirst)),\n        first: getCheapestTicketPrice(service.tickets.filter(ticket => ticket.isFirst)),\n      };\n    } else {\n      service.price = {\n        standard: null,\n        first: null,\n      };\n      service.note = 'No tickets available';\n    }\n    service.time.duration = service.time.arrival.diff(service.time.departure, 'minutes');\n  });\n}\n\nconst addQualifiers = services => {\n  const cheapestServicePrice = Math.min(...services.map(service => Math.min(service.price.standard, service.price.first)));\n  const fastestServiceTime = Math.min(...services.map(service => service.time.duration));\n  \n  services.forEach(service => {\n    service.isCheapest = service.price.standard === cheapestServicePrice || service.price.first === cheapestServicePrice;\n    service.isFastest = service.time.duration === fastestServiceTime;\n  });\n}\n\nconst mapStateToProps = state => {\n  const { search, results } = state;\n  const { outbound, inbound } = results;\n\n  const passengers = parseInt(search.adults) + parseInt(search.children);\n\n  if (outbound) {\n    addDataToServices(outbound);\n    addQualifiers(outbound);\n\n    outbound.forEach(service => {\n      service.passengers = passengers;\n      service.tickets.forEach(ticket => ticket.passengers = passengers);\n    });\n  }\n\n  if (inbound) {\n    addDataToServices(inbound);\n    addQualifiers(inbound);\n\n    inbound.forEach(service => {\n      service.passengers = passengers;\n      service.tickets.forEach(ticket => ticket.passengers = passengers);\n    });\n  }\n\n  return {\n    results: state.results,\n    servicesOutbound: outbound,\n    servicesInbound: inbound,\n    passengers: search.adults + search.children,\n    selectedOutboundService: getSelectedOutboundService(state.results, state.selection),\n    selectedOutboundTicket: getSelectedOutboundTicket(state.results, state.selection),\n    selectedInboundService: getSelectedInboundService(state.results, state.selection),\n    selectedInboundTicket: getSelectedInboundTicket(state.results, state.selection),\n    search: state.search,\n    screen: state.screen,\n    selection: state.selection,\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  changeScreen: id => dispatch(changeScreen(id)),\n  selectOutboundService: id => dispatch(changeSelectedOutboundService(id)),\n  selectInboundService: id => dispatch(changeSelectedInboundService(id)),\n  selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n  selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n})\n\nclass ResultsThree extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      serviceInfo: false,\n      termsAndConditions: false,\n      priceBreakdownOpen: false,\n      priceBreakdownOutId: null,\n      priceBreakdownInId: null,\n    };\n\n    this.onServiceInfoClick = this.onServiceInfoClick.bind(this);\n    this.onConditionsClick = this.onConditionsClick.bind(this);\n    this.onPriceBreakdownClickHighlights = this.onPriceBreakdownClickHighlights.bind(this);\n    this.onPriceBreakdownClickOutbound = this.onPriceBreakdownClickOutbound.bind(this);\n    this.onPriceBreakdownClickInbound = this.onPriceBreakdownClickInbound.bind(this);\n  }\n\n  getResultsHeader() { \n    const { search, screen } = this.props;\n\n    let title;\n    let subtitle;\n\n    if (screen === screens.serviceOutbound) {\n      if (search.ticketType === 0) {\n        title = 'Select service';\n      } else {\n        title = 'Select outbound service';\n      }\n      subtitle = search.outbound.time.format('ddd DD MMM');\n    } else if (screen === screens.serviceInbound) {\n      title = 'Select return service';\n      subtitle = search.inbound.time.format('ddd DD MMM');\n    } else if (screen === screens.ticketHighlights) {\n      title = 'Choose tickets';\n    } else if (screen === screens.ticketOutbound) {\n      if (search.ticketType === 1) {\n        return <ResultsHeaderThreeMix legNumber={0} outboundTime={search.outbound.time.format('ddd DD MMM')} inboundTime={search.inbound.time.format('ddd DD MMM')} />;\n      } else {\n        title = 'Choose ticket';\n      }\n    } else if (screen === screens.ticketInbound) {\n      return <ResultsHeaderThreeMix legNumber={1} outboundTime={search.outbound.time.format('ddd DD MMM')} inboundTime={search.inbound.time.format('ddd DD MMM')} />;\n    }\n\n    return <ResultsHeaderThree title={title} subtitle={subtitle} />;\n  }\n\n  getHeader() { \n    const { search } = this.props;\n\n    const data = {\n      station: {\n        origin: search.from,\n        destination: search.to,\n      },\n      ticketType: search.ticketType,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToPreviousScreen()} />\n    );\n  }\n\n  getPreviousScreenId() {\n    const { screen, search } = this.props;\n\n    switch (screen) {\n      case screens.serviceOutbound:\n        return screens.search;\n      case screens.serviceInbound:\n        return screens.serviceOutbound;\n      case screens.ticketHighlights:\n        if (search.ticketType === 1) {\n          return screens.serviceInbound;\n        } else {\n          return screens.serviceOutbound;\n        }\n      case screens.ticketOutbound:\n        return screens.ticketHighlights;\n      case screens.ticketInbound:\n        return screens.ticketOutbound;\n      default:\n        return screen - 1;\n    }\n  }\n\n  goToPreviousScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getPreviousScreenId());\n  }\n\n  onScreenChange(id) {\n    const { selectOutboundService, selectInboundService, selectOutboundTicket, selectInboundTicket } = this.props;\n\n    switch (id) {\n      case screens.serviceOutbound:\n        selectOutboundService(null);\n        return;\n      case screens.serviceInbound:\n        selectInboundService(null);\n        return;\n      case screens.ticketHighlights:\n        selectInboundTicket(null);\n        selectOutboundTicket(null);\n        return;\n      case screens.ticketOutbound:\n        selectOutboundTicket(null);\n        selectInboundTicket(null);\n        return;\n      case screens.ticketInbound:\n        selectInboundTicket(null);\n        return;\n      default:\n        return;\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { screen } = this.props;\n\n    // Check did change screen\n    if (prevProps.screen === screen) return;\n\n    this.onScreenChange(screen);\n  }\n\n  onPriceBreakdownClickHighlights(idOut, idIn) {\n    this.setState({\n      priceBreakdownOpen: true,\n      priceBreakdownOutId: idOut,\n      priceBreakdownInId: idIn,\n    });\n  }\n\n  onPriceBreakdownClickOutbound(id) {\n    this.setState({\n      priceBreakdownOpen: true,\n      priceBreakdownOutId: id,\n      priceBreakdownInId: null,\n    });\n  }\n\n  onPriceBreakdownClickInbound(id) {\n    const { selectedOutboundTicket } = this.props;\n\n    this.setState({\n      priceBreakdownOpen: true,\n      priceBreakdownOutId: selectedOutboundTicket.id,\n      priceBreakdownInId: id,\n    });\n  }\n\n  onConditionsClick() {\n    this.setState({\n      termsAndConditions: true,\n    });\n  }\n\n  onServiceInfoClick() {\n    this.setState({\n      serviceInfo: true\n    });\n  }\n\n  getContent() {\n    const { screen, servicesOutbound, servicesInbound } = this.props;\n\n    switch (screen) {\n      case screens.serviceOutbound:\n        return <ResultsThreeServiceOutbound servicesOutbound={servicesOutbound} servicesInbound={servicesInbound} onServiceInfoClick={this.onServiceInfoClick} />;\n      case screens.serviceInbound:\n        return <ResultsThreeServiceInbound servicesOutbound={servicesOutbound} servicesInbound={servicesInbound} onServiceInfoClick={this.onServiceInfoClick} />;\n      case screens.ticketHighlights:\n        return <ResultsThreeTicketHighlights onPriceBreakdownClick={this.onPriceBreakdownClickHighlights} onConditionsClick={this.onConditionsClick} />;\n      case screens.ticketOutbound:\n        return <ResultsThreeTicketOutbound onPriceBreakdownClick={this.onPriceBreakdownClickOutbound} onConditionsClick={this.onConditionsClick} />;\n      case screens.ticketInbound:\n        return <ResultsThreeTicketInbound onPriceBreakdownClick={this.onPriceBreakdownClickInbound} onConditionsClick={this.onConditionsClick} />\n      default:\n        return 'Oh no';\n    }\n  }\n\n  render() {\n    const { serviceInfo, termsAndConditions, priceBreakdownOpen, priceBreakdownOutId, priceBreakdownInId } = this.state;\n\n    return (\n      <React.Fragment>\n        <div className=\"Results\">\n          <div className={`${serviceInfo ? '' : 'hidden'}`}>\n            <Header data={{ title: 'Service information' }} onBackClick={() => this.setState({ serviceInfo: false })} />\n            <img src={serviceInfoScreen} className=\"Results-fakeContent\" />\n          </div>\n          <div className={`${termsAndConditions ? '' : 'hidden'}`}>\n            <Header data={{ title: 'Terms and conditions' }} onBackClick={() => this.setState({ termsAndConditions: false })} />\n            <img src={termsAndConditionsScreen} className=\"Results-fakeContent\" />\n          </div>\n          <div className={`${termsAndConditions || serviceInfo ? 'hidden' : ''}`}>\n            {this.getHeader()}\n            {this.getResultsHeader()}\n            {this.getContent()}\n          </div>\n        </div>\n        {priceBreakdownOpen && <div className=\"Results-modal\" onClick={() => this.setState({ priceBreakdownOpen: false, priceBreakdownInId: null, priceBreakdownOutId: null })}>\n          <ResultsThreePriceBreakdown priceBreakdownOutId={priceBreakdownOutId} priceBreakdownInId={priceBreakdownInId} />\n        </div>}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ResultsThree);\n","import React from 'react';\nimport ticketTypes from '../data/ticketTypes';\nimport { getTicketTypeIcon } from '../utility/get';\n\nimport './TicketTypePicker.css';\n\nexport default class TicketTypePicker extends React.Component {\n  render() {\n    const { selected, onSelect } = this.props;\n\n    return (\n      <div className=\"TicketTypePicker\">\n        {ticketTypes.map(ticketType => (\n          <div className={`TicketTypePicker-section ${ticketType.id === selected ? 'selected' : ''}`} key={ticketType.id} onClick={() => onSelect(ticketType.id)}>\n            {getTicketTypeIcon(ticketType.id, 'TicketTypePicker-section-icon')}\n            <div className=\"TicketTypePicker-section-label\">\n              {ticketType.name}\n            </div>\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { Form } from 'semantic-ui-react';\nimport stations from '../data/stations';\n\nimport './StationPicker.css';\n\nconst options = stations\n  .filter(station => station.name && station.crs)\n  .filter(station => station.name.toLowerCase().includes('london') || station.name.toLowerCase().includes('cambridge') || station.name.toLowerCase().includes('edinburgh') || station.name.toLowerCase().includes('peterborough') || station.name === 'Leeds' || station.name === 'Harrogate' || station.name === 'York')\n  .map(station => {\n    if (station.id === 2317) {\n      // Edinburgh Waverley\n      // Sadly can't use aliases (e.g. London King's Cross King's Cross)\n      return {\n        ...station,\n        name: 'Edinburgh Waverley',\n      };\n    }\n    return station;\n  })\n  .map(station => ({\n    key: station.id,\n    value: station.id,\n    text: `${station.name} (${station.crs})`,\n    name: station.name,\n    crs: station.crs,\n  }))\n  .sort((a, b) => a.name < b.name ? -1 : (a.name > b.name ? 1 : 0));\n\nconst stationSearchFunction = (options, term) => {\n  return options.filter(option => {\n    const termLower = term.toLowerCase();\n    return option.name.toLowerCase().includes(termLower) || option.crs.toLowerCase().startsWith(termLower);\n  });\n};\n\nexport default class StationPicker extends React.Component {\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  render() {    \n    const { selected, onChange } = this.props;\n\n    return (\n      <Form.Dropdown className=\"StationPicker\" placeholder='Select a station' defaultValue={selected} search={stationSearchFunction} selection options={options} onChange={onChange} />\n    );\n  }\n}\n","import React from 'react';\nimport moment from 'moment';\n\nimport './JourneyTimePicker.css';\n\nconst beforeOrAfterOptions = [\n  {\n    key: 0,\n    value: 'after',\n    text: 'Depart after',\n  },\n  {\n    key: 1,\n    value: 'before',\n    text: 'Arrive before',\n  },\n];\n\nconst calculateFormValues = input => {\n  const after = input.after;\n\n  const timeMoment = moment(input.time);\n\n  return {\n    after: after ? 'after' : 'before',\n    date: timeMoment.format('YYYY-MM-DD'),\n    time: timeMoment.format('HH:mm'),\n  };\n}\n\nconst calculateState = formValues => {\n  const newstate = {\n    after: formValues.after === 'after',\n    time: moment(`${formValues.date} ${formValues.time}`),\n  };\n  return newstate;\n}\n\nexport default class JourneyTimePicker extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.formValues = calculateFormValues(props.selected);\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleAfterChange = this.handleAfterChange.bind(this);\n    this.handleDateChange = this.handleDateChange.bind(this);\n    this.handleTimeChange = this.handleTimeChange.bind(this);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { selected } = nextProps;\n    this.formValues = calculateFormValues(selected);\n  }\n\n  handleChange(newFormValues) {\n    const { onChange } = this.props;\n\n    onChange(calculateState(newFormValues));\n  }\n\n  handleAfterChange(e) {\n    this.handleChange({ ...this.formValues, after: e.target.value });\n  }\n\n  handleDateChange(e) {\n    this.handleChange({ ...this.formValues, date: e.target.value });\n  }\n\n  handleTimeChange(e) {\n    this.handleChange({\n      ...this.formValues,\n      time: e.target.value,\n    });\n  }\n\n  render() {    \n    return (\n      <div className=\"JourneyTimePicker\">\n        <select value={this.formValues.after} className=\"JourneyTimePicker-after\" onChange={this.handleAfterChange}>\n          {beforeOrAfterOptions.map(option => (\n            <option value={option.value} key={option.key}>{option.text}</option>\n          ))}\n        </select> \n        <input className=\"JourneyTimePicker-day\" type=\"date\" value={this.formValues.date} onChange={this.handleDateChange} />\n        <input className=\"JourneyTimePicker-time\" type=\"time\" value={this.formValues.time} onChange={this.handleTimeChange} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport './PassengerPicker.css';\n\nexport default class PassengerPicker extends React.Component {\n  render() {    \n    const { selected, maxOption, onChange } = this.props;\n\n    const passengerDropdownOptions = [...Array(maxOption+1).keys()]\n      .map(n => ({\n        key: n,\n        value: n,\n        text: n.toString(),\n      }));\n    \n    return (\n      <select className=\"PassengerPicker\" value={selected} onChange={e => onChange(e.target.value)}>\n        {passengerDropdownOptions.map(option => (\n          <option key={option.key} value={option.value}>\n            {option.text}\n          </option>\n        ))}\n      </select>\n    );\n  }\n}\n","import React from 'react';\n\nimport './Button.css';\n\nexport default class Button extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick(e) {\n    const { onClick, loading, disabled } = this.props;\n\n    if (!loading && !disabled ) {\n      onClick(e)\n    }\n  }\n\n  render() {\n    const { text, loading, disabled } = this.props;\n\n    return (\n      <button className={`Button ${disabled ? 'disabled' : ''}`} onClick={this.handleClick}>\n        {loading ? 'Loading...' : text}\n      </button>\n    )\n  }\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport Header from '../ui/Header';\nimport TicketTypePicker from '../pickers/TicketTypePicker';\nimport StationPicker from '../pickers/StationPicker';\nimport JourneyTimePicker from '../pickers/JourneyTimePicker';\nimport { changeSearchData, executeSearch } from '../redux/actions';\nimport PassengerPicker from '../pickers/PassengerPicker';\nimport Button from '../ui/Button';\n\nimport './Search.css';\n\nconst mapStateToProps = state => {\n  return {\n    from: state.search.from,\n    to: state.search.to,\n    ticketType: state.search.ticketType,\n    outbound: state.search.outbound,\n    inbound: state.search.inbound,\n    searching: state.search.searching,\n    adults: state.search.adults,\n    children: state.search.children,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeSearchData: change => dispatch(changeSearchData(change)),\n    executeSearch: () => dispatch(executeSearch()),\n  };\n}\n\nclass Search extends React.Component {\n  canSearch() {\n    const { to, from, ticketType, outbound, inbound } = this.props;\n\n    return to && from && outbound.time && (ticketType !== 1 || inbound.time);\n  }\n\n  render() {\n    const { changeSearchData, executeSearch } = this.props;\n    const { from, to, ticketType, outbound, inbound, searching, adults, children } = this.props;\n\n    return (\n      <div className=\"Search\">\n        <Header noBack data={{ title: 'Plan and buy' }} />\n        <div className=\"Search-content\">\n          <div className=\"Search-stations\">\n            <StationPicker selected={from} onChange={(e, { value }) => changeSearchData({ from: value })} />\n            <StationPicker selected={to} onChange={(e, { value }) => changeSearchData({ to: value })} />\n          </div>\n          <div className=\"Search-ticketType\">\n            <TicketTypePicker selected={ticketType} onSelect={id => changeSearchData({ ticketType: id })} />\n          </div>\n          <div className=\"Search-datetime\">\n            <h3>Outbound</h3>\n            <JourneyTimePicker selected={outbound} onChange={value => changeSearchData({ outbound: value })} />\n          </div>\n          {ticketType === 1 && <div className=\"Search-datetime\">\n            <h3>Return</h3>\n            <JourneyTimePicker selected={inbound} onChange={value => changeSearchData({ inbound: value })} />\n          </div>}\n          <div className=\"Search-passengers\">\n            <h3>Passengers</h3>\n            <label>Adults</label>\n            <PassengerPicker selected={adults} maxOption={8 - children} onChange={value => changeSearchData({ adults: value })} />\n            <label>Children</label>\n            <PassengerPicker selected={children} maxOption={8 - adults} onChange={value => changeSearchData({ children: value })} />\n          </div>\n          <Button primary disabled={!this.canSearch()} loading={searching} onClick={executeSearch} text=\"Search for trains\" />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Search);","import React from 'react';\nimport Header from '../ui/Header';\nimport { changeScreen, changeSelectedInboundTicket } from '../redux/actions';\nimport reviewFooter from '../data/review-footer.png';\nimport reviewScreen from '../data/review.png';\n\nimport './Review.css';\nimport { getChangesString, getDurationString, getSelectedOutboundTicket, getSelectedOutboundService, getSelectedInboundService, getSelectedInboundTicket } from '../utility/get';\nimport Block from '../ui/Block';\nimport { connect } from 'react-redux';\n\nconst mapStateToProps = state => {\n  const { results, selection, search } = state;\n\n  const outboundService = getSelectedOutboundService(results, selection);\n  const outboundTicket = getSelectedOutboundTicket(results, selection);\n  const inboundService = getSelectedInboundService(results, selection);\n  const inboundTicket = getSelectedInboundTicket(results, selection);\n\n  return {\n    results,\n    search,\n    selection,\n    outboundService,\n    outboundTicket,\n    inboundService,\n    inboundTicket,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeScreen: id => dispatch(changeScreen(id)),\n    selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n  };\n};\n\nclass Review extends React.Component {\n  getPreviousScreenId() {\n    const { results, selection } = this.props;\n\n    const hasSelectedReturn = getSelectedOutboundTicket(results, selection).isReturn;\n\n    return (!hasSelectedReturn && results.inbound) ? 4 : 2;\n  }\n\n  goToPreviousScreen() {\n    const { changeScreen, selectInboundTicket } = this.props;\n\n    selectInboundTicket(null);\n    changeScreen(this.getPreviousScreenId());\n  }\n\n  getNextScreenId() {\n    return 6;\n  }\n\n  goToNextScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getNextScreenId());\n  }\n\n  presentService(service, ticket) {\n    if (!service || !ticket) {\n      return null;\n    }\n\n    return (\n      <Block className=\"Review-service\">\n        <div className=\"Review-service-name\">\n          {service.station.origin} > {service.station.destination}\n        </div>\n        <div className=\"Review-service-date\">\n          {service.time.departure.format('ddd D MMM')}\n        </div>\n        <div className=\"Review-service-time\">\n          {service.time.departure.format('HH:mm')} > {service.time.arrival.format('HH:mm')}\n        </div>\n        <div className=\"Review-service-meta\">\n          {getDurationString(service.time.departure, service.time.arrival)}, {getChangesString(service.changes)}\n        </div>\n        <div className=\"Review-service-tickets\">\n          <div className=\"Review-service-tickets-label\">\n            Tickets\n          </div>\n          <div className=\"Review-service-tickets-name\">\n            {ticket.name}\n          </div>\n        </div>\n        <div className=\"Review-actions\">\n          <div className=\"Review-action\">\n            Journey info\n          </div>\n          <div className=\"Review-action\">\n            Ticket conditions\n          </div>\n        </div>\n      </Block>\n    );\n  }\n\n  presentSeatGroup(service) {\n    if (!service) {\n      return null;\n    }\n\n    return (\n      <div className=\"Review-seats-group\">\n        <div className=\"Review-seats-group-name\">\n          {service.station.origin} > {service.station.destination}\n        </div>\n        <div className=\"Review-seats-group-item\">\n          Coach B, Seat 52\n        </div>\n        <div className=\"Review-seats-group-item\">\n          Coach B, Seat 53\n        </div>\n      </div>\n    );\n  }\n\n  getHeader() { \n    const { search } = this.props;\n\n    const data = {\n      station: {\n        origin: search.from,\n        destination: search.to,\n      },\n      ticketType: search.ticketType,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToPreviousScreen()} />\n    );\n  }\n\n  render() {\n    const { outboundService, outboundTicket, inboundService, inboundTicket } = this.props;\n\n    return (\n      <div className=\"Review\">\n        {this.getHeader()}\n        <div className=\"Review-title\">\n          Review your selection\n        </div>\n        <div className=\"Review-services\">\n          {this.presentService(outboundService, outboundTicket)}\n          {this.presentService(inboundService, inboundTicket)}\n        </div>\n        <img src={reviewScreen} className=\"Review-fakeContent\" />\n        <img src={reviewFooter} className=\"Review-fakeContent\" onClick={() => this.goToNextScreen()} />\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Review);","import React from 'react';\nimport Header from '../ui/Header';\nimport { changeScreen, changeSelectedOutboundTicket, changeSelectedInboundTicket } from '../redux/actions';\nimport reviewFooter from '../data/review-footer.png';\nimport reviewScreen from '../data/review.png';\n\nimport './ReviewThree.css';\nimport { getChangesString, getDurationString, getSelectedOutboundTicket, getSelectedOutboundService, getSelectedInboundService, getSelectedInboundTicket } from '../utility/get';\nimport Block from '../ui/Block';\nimport { connect } from 'react-redux';\n\nconst mapStateToProps = state => {\n  const { results, selection, search } = state;\n\n  const outboundService = getSelectedOutboundService(results, selection);\n  const outboundTicket = getSelectedOutboundTicket(results, selection);\n  const inboundService = getSelectedInboundService(results, selection);\n  const inboundTicket = getSelectedInboundTicket(results, selection);\n\n  return {\n    results,\n    search,\n    selection,\n    outboundService,\n    outboundTicket,\n    inboundService,\n    inboundTicket,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeScreen: id => dispatch(changeScreen(id)),\n    selectOutboundTicket: id => dispatch(changeSelectedOutboundTicket(id)),\n    selectInboundTicket: id => dispatch(changeSelectedInboundTicket(id)),\n  };\n};\n\nclass ReviewThree extends React.Component {\n  goToPreviousScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(3);\n  }\n\n  goToNextScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(6);\n  }\n\n  presentService(service, ticket) {\n    if (!service || !ticket) {\n      return null;\n    }\n\n    return (\n      <Block className=\"ReviewThree-service\">\n        <div className=\"ReviewThree-service-name\">\n          {service.station.origin} - {service.station.destination}\n        </div>\n        <div className=\"ReviewThree-service-date\">\n          {service.time.departure.format('ddd D MMM')}\n        </div>\n        <div className=\"ReviewThree-service-time\">\n          {service.time.departure.format('HH:mm')} > {service.time.arrival.format('HH:mm')}\n        </div>\n        <div className=\"ReviewThree-service-meta\">\n          {getDurationString(service.time.departure, service.time.arrival)}, {getChangesString(service.changes)}\n        </div>\n        <div className=\"ReviewThree-service-tickets\">\n          <div className=\"ReviewThree-service-tickets-label\">\n            Tickets\n          </div>\n          <div className=\"ReviewThree-service-tickets-name\">\n            {ticket.name}\n          </div>\n        </div>\n        <div className=\"ReviewThree-actions\">\n          <div className=\"ReviewThree-action\">\n            Journey info\n          </div>\n          <div className=\"ReviewThree-action\">\n            Ticket conditions\n          </div>\n        </div>\n      </Block>\n    );\n  }\n\n  presentSeatGroupRowItem(title, value, index) {\n    return (\n      <div key={index} className=\"ReviewThree-seats-group-row-item\">\n        <div className=\"ReviewThree-seats-group-row-item-title\">\n          {title}\n        </div>\n        <div className=\"ReviewThree-seats-group-row-item-value\">\n          {value}\n        </div>\n      </div>\n    );\n  }\n\n  presentSeatGroup(service) {\n    if (!service) {\n      return null;\n    }\n\n    const coaches = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];\n    const seats = [...new Array(64).keys()].map(seat => seat + 1);\n\n    return (\n      <React.Fragment>\n        {service.legs.map((leg, legIndex) => {\n          const selectedCoach = coaches[Math.floor(Math.random() * coaches.length)];\n          const selectedSeats = [...new Array(service.passengers).keys()].map(() => seats[Math.floor(Math.random() * seats.length)]).sort();\n          const isLner = leg.toc === 'GR';\n\n          return (\n            <Block key={legIndex} className=\"ReviewThree-seats-group\">\n              <div className=\"ReviewThree-seats-group-name\">\n                {leg.origin} - {leg.destination}\n              </div>\n              <div className=\"ReviewThree-seats-group-row\">\n                {this.presentSeatGroupRowItem('Coach', selectedCoach)}\n                {selectedSeats.map((seat, seatIndex) => this.presentSeatGroupRowItem('Seat', seat, seatIndex))}\n                {isLner && <div className=\"ReviewThree-seats-group-row-action\">\n                  Change seats\n                </div>}\n              </div>\n              {!isLner && <div className=\"ReviewThree-seats-group-note\">\n                Non-LNER service: to change seats call 01811 0855\n              </div>}\n            </Block>\n          );\n        })}\n      </React.Fragment>\n    );\n  }\n\n  getHeader() { \n    const { search } = this.props;\n\n    const data = {\n      station: {\n        origin: search.from,\n        destination: search.to,\n      },\n      ticketType: search.ticketType,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToPreviousScreen()} />\n    );\n  }\n\n  render() {\n    const { outboundService, outboundTicket, inboundService, inboundTicket } = this.props;\n\n    return (\n      <div className=\"Review\">\n        {this.getHeader()}\n        <div className=\"ReviewThree-title\">\n          Review your selection\n        </div>\n        <div className=\"ReviewThree-services\">\n          {this.presentService(outboundService, outboundTicket)}\n          {this.presentService(inboundService, inboundTicket)}\n        </div>\n        <div className=\"ReviewThree-title\">\n          Seat reservations\n        </div>\n        <div className=\"ReviewThree-seats\">\n          {this.presentSeatGroup(outboundService)}\n          {this.presentSeatGroup(inboundService)}\n        </div>\n        <img src={reviewScreen} className=\"ReviewThree-fakeContent\" />\n        <img src={reviewFooter} className=\"ReviewThree-fakeContent\" onClick={() => this.goToNextScreen()} />\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ReviewThree);","import React from 'react';\nimport { connect } from 'react-redux';\nimport Header from '../ui/Header';\nimport Button from '../ui/Button';\nimport { changeScreen } from '../redux/actions';\nimport paymentScreen from '../data/payment.png';\n\nimport './Payment.css';\n\nconst mapStateToProps = state => {\n  const { search } = state;\n\n  return {\n    search,\n  };\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeScreen: id => dispatch(changeScreen(id)),\n  };\n};\n\nclass Payment extends React.Component {\n  getPreviousScreenId() {\n    return 5;\n  }\n\n  goToPreviousScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getPreviousScreenId());\n  }\n\n  getNextScreenId() {\n    return 7;\n  }\n\n  goToNextScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(this.getNextScreenId());\n  }\n\n  getHeader() { \n    const { search } = this.props;\n\n    const data = {\n      station: {\n        origin: search.from,\n        destination: search.to,\n      },\n      ticketType: search.ticketType,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToPreviousScreen()} />\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"Payment\">\n        {this.getHeader()}\n        <img src={paymentScreen} className=\"Payment-fakeContent\" />\n        <Button text=\"Pay\" onClick={() => this.goToNextScreen()} />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Payment);","import oneABReview from '../data/userCaseScreens/1ab-review.png';\nimport oneABConfirmation from '../data/userCaseScreens/1ab-confirmation.png';\nimport oneCReview from '../data/userCaseScreens/1c-review.png';\nimport oneCConfirmation from '../data/userCaseScreens/1c-confirmation.png';\nimport oneEReview from '../data/userCaseScreens/1e-review.png';\nimport oneEConfirmation from '../data/userCaseScreens/1e-confirmation.png';\nimport twoAReview from '../data/userCaseScreens/2a-review.png';\nimport twoAConfirmation from '../data/userCaseScreens/2a-confirmation.png';\nimport twoBReview from '../data/userCaseScreens/2b-review.png';\nimport twoBConfirmation from '../data/userCaseScreens/2b-confirmation.png';\nimport twoBTwoReview from '../data/userCaseScreens/2b2-review.png';\nimport twoBTwoConfirmation from '../data/userCaseScreens/2b2-confirmation.png';\nimport threeABReview from '../data/userCaseScreens/3ab-review.png';\nimport threeABConfirmation from '../data/userCaseScreens/3ab-confirmation.png';\n\nconst userCases = [\n  {\n    id: '1A/B',\n    name: 'Business user going to a conference / PA/Admin - group booking',\n    review: oneABReview,\n    confirmation: oneABConfirmation,\n  },\n  {\n    id: '1C',\n    name: 'User has family emergency',\n    review: oneCReview,\n    confirmation: oneCConfirmation,\n  },\n  {\n    id: '1E',\n    name: 'Student visits family during break',\n    review: oneEReview,\n    confirmation: oneEConfirmation,\n  },\n  {\n    id: '2A',\n    name: 'Business user - meeting',\n    review: twoAReview,\n    confirmation: twoAConfirmation,\n  },\n  {\n    id: '2B',\n    name: 'Student goes to a \\'festival`\\'',\n    review: twoBReview,\n    confirmation: twoBConfirmation,\n  },\n  {\n    id: '2B.2',\n    name: 'User goes for a city break',\n    review: twoBTwoReview,\n    confirmation: twoBTwoConfirmation,\n  },\n  {\n    id: '3A/B',\n    name: 'PA/Admin users - mix booking / Business user - meeting',\n    review: threeABReview,\n    confirmation: threeABConfirmation,\n  },\n]\n\nexport default userCases;","import React from 'react';\nimport { connect } from 'react-redux';\nimport Header from '../ui/Header';\nimport { changeScreen } from '../redux/actions';\nimport userCases from '../data/userCases';\nimport confirmationScreen from '../data/confirmation.png';\n\nimport './Confirmation.css';\n\nconst mapStateToProps = state => {\n  return {\n    usercase: userCases.find(uc => uc.id === state.usercase),\n    results: state.results,\n    selection: state.selection,\n    search: state.search,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeScreen: id => dispatch(changeScreen(id)),\n  };\n};\n\nclass Confirmation extends React.Component {\n  goToFirstScreen() {\n    const { changeScreen } = this.props;\n\n    changeScreen(0);\n  }\n\n  getHeader() { \n    const { search } = this.props;\n\n    const data = {\n      station: {\n        origin: search.from,\n        destination: search.to,\n      },\n      ticketType: search.ticketType,\n    };\n\n    return (\n      <Header data={data} onBackClick={() => this.goToFirstScreen()} />\n    );\n  }\n\n  render() {\n    const { usercase } = this.props;\n    \n    return (\n      <div className=\"Confirmation\">\n        {this.getHeader()}\n        <img src={confirmationScreen} className=\"Confirmation-fakeContent\" />\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Confirmation);","import React from 'react';\nimport Header from '../ui/Header';\nimport userCases from '../data/userCases';\nimport { changeUserCase, changeScreen } from '../redux/actions';\nimport { connect } from 'react-redux';\n\nimport './Menu.css';\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeUserCase: id => dispatch(changeUserCase(id)),\n    changeScreen: id => dispatch(changeScreen(id)),\n  };\n};\n\nclass Menu extends React.Component {\n  selectUserCase(id) {\n    const { changeUserCase, changeScreen } = this.props;\n    \n    changeUserCase(id);\n    changeScreen(0);\n  }\n\n  render() {\n    return (\n      <div className=\"Menu\">\n        <Header noBack data={{ title: 'Journey menu' }} />\n        <div className = \"Menu-list\">\n          {userCases.map((userCase, userCaseIndex) => {\n            return (\n              <div key={userCaseIndex} className=\"Menu-list-item\" onClick={() => this.selectUserCase(userCase.id)}>\n                <div className=\"Menu-list-item-id\">\n                  {userCase.id}\n                </div>\n                <div className=\"Menu-list-item-name\">\n                  {userCase.name}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  null,\n  mapDispatchToProps,\n)(Menu);","\nimport React from 'react';\n\nconst icon = ({ className }) => (\n  <svg className={className}viewBox=\"0 0 50 50\">\n    <path d=\"M45.861,13.296c-0.947-1.685-3.08-2.284-4.767-1.335c-1.685,0.947-2.282,3.081-1.335,4.766  c1.411,2.51,2.157,5.371,2.157,8.273c0,9.328-7.589,16.917-16.917,16.917S8.083,34.328,8.083,25S15.672,8.083,25,8.083  c2.053,0,4.058,0.363,5.96,1.079c1.812,0.681,3.828-0.235,4.508-2.043c0.681-1.809-0.233-3.828-2.043-4.508  C30.732,1.597,27.897,1.083,25,1.083C11.812,1.083,1.083,11.812,1.083,25c0,13.188,10.729,23.917,23.917,23.917  c13.188,0,23.917-10.729,23.917-23.917C48.917,20.898,47.86,16.851,45.861,13.296z\" />\n  </svg>\n);\n\nexport default icon;\n","import React from 'react';\nimport Results from './screens/Results';\nimport ResultsThree from './screens/ResultsThree';\nimport Search from './screens/Search';\nimport Review from './screens/Review';\nimport ReviewThree from './screens/ReviewThree';\nimport Payment from './screens/Payment';\nimport Confirmation from './screens/Confirmation';\nimport Menu from './screens/Menu';\n\nimport Spinner from './data/icon/spinner';\n\nimport './App.css';\nimport { connect } from 'react-redux';\n\nconst mapStateToProps = state => {\n  return {\n    search: state.search,\n    screen: state.screen,\n    loading: state.loading,\n  };\n}\n\nclass App extends React.Component {\n  getScreen() {\n    const { screen } = this.props;\n\n    const useThreeScreen = true;\n\n    switch (screen) {\n      case 0:\n        return <Search />;\n      case 1:\n      case 2:\n      case 3:\n      case 4:\n      case 10:\n      case 11:\n        if (useThreeScreen) {\n          return <ResultsThree />;\n        } else {\n          return <Results />;\n        }\n      case 5:\n        if (useThreeScreen) {\n          return <ReviewThree />;\n        } else {\n          return <Review />;\n        }\n      case 6:\n        return <Payment />;\n      case 7:\n        return <Confirmation />;\n      case 100:\n        return <Menu />;\n      default:\n        return <div>oh no</div>;\n    };\n  }\n\n  render() {\n    const { search, loading } = this.props;\n\n    const displaySpinner = search.searching || loading;\n\n    return (\n      <div className=\"App\">\n        <div id=\"App-mobileFrame\">\n          {displaySpinner && <div className=\"App-loading\">\n            <Spinner className=\"App-loading-spinner\" />\n          </div>}\n          {this.getScreen()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  null\n)(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { CHANGE_SCREEN } from '../actionTypes';\n\nconst initialState = 100;\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CHANGE_SCREEN: {\n      return action.id;\n    }\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","import { CHANGE_SEARCH_DATA } from '../actionTypes';\nimport moment from 'moment';\n\n// qq Move this to update when we go to the search form\n\nconst nextTime = moment().add(20, 'minutes');\n    \n// Round up to nearest 5 minutes\nconst remainder = 5 - (nextTime.minutes() % 5);\nnextTime.add(remainder, 'minutes').startOf('minute');\n\nconst initialState = {\n  searching: false,\n  from: 3599,\n  to: 6069,\n  ticketType: 0,\n  outbound: {\n    time: nextTime,\n    after: true,\n  },\n  inbound: {\n    time: nextTime.clone().add(1, 'day'),\n    after: true,\n  },\n  adults: 1,\n  children: 0,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CHANGE_SEARCH_DATA: {\n      return {\n        ...state,\n        ...action.data,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","import { CHANGE_SELECTED_OUTBOUND_SERVICE, CHANGE_SELECTED_OUTBOUND_TICKET, CHANGE_SELECTED_INBOUND_SERVICE, CHANGE_SELECTED_INBOUND_TICKET } from '../actionTypes';\n\nconst initialState = {\n  outboundJourney: null,\n  outboundTicket: null,\n  inboundJourney: null,\n  inboundTicket: null,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CHANGE_SELECTED_OUTBOUND_SERVICE: {\n      return {\n        ...state,\n        outboundJourney: action.id,\n      };\n    }\n    case CHANGE_SELECTED_OUTBOUND_TICKET: {\n      return {\n        ...state,\n        outboundTicket: action.id,\n      };\n    }\n    case CHANGE_SELECTED_INBOUND_SERVICE: {\n      return {\n        ...state,\n        inboundJourney: action.id,\n      };\n    }\n    case CHANGE_SELECTED_INBOUND_TICKET: {\n      return {\n        ...state,\n        inboundTicket: action.id,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","import { CHANGE_RESULTS } from '../actionTypes';\nimport moment from 'moment';\n\nconst initialState = {};\n\nconst translateJourneyResponse = journey => {\n  if (!journey) {\n    return null;\n  }\n\n  if (!journey.Services) {\n    return null;\n  }\n\n  return journey.Services.map((service, serviceIndex) => {\n    const DisplayFares = service.DisplayFaresFixed.concat(service.DisplayFaresFlexible);\n\n    const tickets = DisplayFares\n      .filter(fare => fare.Available)\n      .map((fare, fareIndex) => {\n        return {\n          id: fareIndex,\n          isDiscounted: fare.IsDiscounted,\n          isReturn: fare.IsReturn,\n          isFirst: fare.TicketClass === 'First',\n          isFlexible: fare.IsFlexible,\n          name: fare.DisplayName,\n          price: fare.TotalPrice,\n          description: `${fare.RouteRestrictionDisplayName} ${fare.ShortTermsLabel}.`,\n        };\n      });\n\n    const legs = service.Legs.map(leg => (\n      {\n        destination: leg.Destination.Name,\n        origin: leg.Origin.Name,\n        toc: leg.TocIdString,\n      }\n    ));\n\n    // Add a discount the FIRST result\n    if (serviceIndex === 0 && tickets.length > 0) {\n      tickets[0].isDiscounted = true;\n    }\n\n    return {\n      id: serviceIndex,\n      station: {\n        origin: service.Origin.Name,\n        destination: service.Destination.Name,\n      },\n      time: {\n        departure: moment(service.DepartureDateTime),\n        arrival: moment(service.ArrivalDateTime),\n      },\n      changes: service.Changes,\n      toc: service.PrimaryTocId,\n      tickets,\n      legs,\n    };\n  });\n};\n\nconst translateApiResponse = response => {\n  return {\n    outbound: translateJourneyResponse(response.OutwardJourney),\n    inbound: translateJourneyResponse(response.ReturnJourney),\n  };\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CHANGE_RESULTS: {\n      return translateApiResponse(action.data);\n    }\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","import { CHANGE_USER_CASE } from '../actionTypes';\n\nconst initialState = null;\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CHANGE_USER_CASE: {\n      return action.id;\n    }\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","import { BEGIN_LOADING, END_LOADING } from '../actionTypes';\n\nconst initialState = false;\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case BEGIN_LOADING:\n      return true;\n    case END_LOADING:\n      return false;\n    default:\n      return false;\n  }\n}\n\nexport default reducer;","import { combineReducers } from 'redux';\nimport screen from './screen';\nimport search from './search';\nimport selection from './selection';\nimport results from './results';\nimport usercase from './usercase';\nimport loading from './loading';\n\nexport default combineReducers({\n  search: search, \n  screen: screen,\n  selection: selection,\n  results: results,\n  usercase: usercase,\n  loading: loading,\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer, applyMiddleware(thunk));\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\n\nconst documentRoot = document.getElementById('root');\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  documentRoot\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/serviceInfo.98d08560.png\";","module.exports = __webpack_public_path__ + \"static/media/termsAndConditions.af017db9.png\";","module.exports = __webpack_public_path__ + \"static/media/review-footer.c2c93743.png\";","module.exports = __webpack_public_path__ + \"static/media/review.2cd76d8f.png\";"],"sourceRoot":""}